{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 114881,
  "base_commit": "3bb20e39ab1bc094ff412602e3217be08f230631",
  "runner": "factory",
  "model": "claude-sonnet-4-5-20250929",
  "timeout_s": 7200,
  "status": "success",
  "elapsed_ms": 656951,
  "patch_unified": "diff --git a/modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateQueryBuilder.java b/modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateQueryBuilder.java\nindex 6b37b02a..5f383806 100644\n--- a/modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateQueryBuilder.java\n+++ b/modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateQueryBuilder.java\n@@ -47,6 +47,7 @@ import org.elasticsearch.common.logging.DeprecationLogger;\n import org.elasticsearch.common.xcontent.LoggingDeprecationHandler;\n import org.elasticsearch.common.xcontent.XContentHelper;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.index.IndexVersion;\n import org.elasticsearch.index.IndexVersions;\n import org.elasticsearch.index.fielddata.FieldDataContext;\n@@ -368,13 +369,17 @@ public class PercolateQueryBuilder extends AbstractQueryBuilder<PercolateQueryBu\n             DOCUMENTS_FIELD.getPreferredName(),\n             INDEXED_DOCUMENT_FIELD_ID.getPreferredName()\n         );\n+        @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS) // Remove V_7 compatibility\n+        var indexedDocumentFieldTypeV7 = INDEXED_DOCUMENT_FIELD_TYPE.forRestApiVersion(equalTo(RestApiVersion.V_7));\n         PARSER.declareString(\n             deprecateAndIgnoreType(\"percolate_with_type\", TYPE_DEPRECATION_MESSAGE),\n-            INDEXED_DOCUMENT_FIELD_TYPE.forRestApiVersion(equalTo(RestApiVersion.V_7))\n+            indexedDocumentFieldTypeV7\n         );\n+        @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS) // Remove V_7 compatibility\n+        var documentTypeFieldV7 = DOCUMENT_TYPE_FIELD.forRestApiVersion(equalTo(RestApiVersion.V_7));\n         PARSER.declareString(\n             deprecateAndIgnoreType(\"percolate_with_document_type\", DOCUMENT_TYPE_DEPRECATION_MESSAGE),\n-            DOCUMENT_TYPE_FIELD.forRestApiVersion(equalTo(RestApiVersion.V_7))\n+            documentTypeFieldV7\n         );\n     }\n \ndiff --git a/server/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequest.java b/server/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequest.java\nindex fefc4131..0c91919a 100644\n--- a/server/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequest.java\n+++ b/server/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequest.java\n@@ -69,6 +69,7 @@ public class RolloverRequest extends AcknowledgedRequest<RolloverRequest> implem\n                 );\n             }\n             request.createIndexRequest.mapping(mappings);\n+        @UpdateForV9(owner = UpdateForV9.Owner.DATA_MANAGEMENT) // Remove V_7 compatibility\n         }, CreateIndexRequest.MAPPINGS.forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7)), ObjectParser.ValueType.OBJECT);\n         PARSER.declareField((parser, request, context) -> {\n             // a type is not included, add a dummy _doc type\ndiff --git a/server/src/main/java/org/elasticsearch/action/bulk/BulkRequestParser.java b/server/src/main/java/org/elasticsearch/action/bulk/BulkRequestParser.java\nindex cd74989e..abc0e635 100644\n--- a/server/src/main/java/org/elasticsearch/action/bulk/BulkRequestParser.java\n+++ b/server/src/main/java/org/elasticsearch/action/bulk/BulkRequestParser.java\n@@ -271,7 +271,9 @@ public final class BulkRequestParser {\n                                 }\n                                 index = stringDeduplicator.computeIfAbsent(parser.text(), Function.identity());\n                             } else if (TYPE.match(currentFieldName, parser.getDeprecationHandler())) {\n-                                if (parser.getRestApiVersion().matches(RestApiVersion.equalTo(RestApiVersion.V_7))) {\n+                                @UpdateForV9(owner = UpdateForV9.Owner.DISTRIBUTED_INDEXING) // Remove V_7 compatibility check\n+                                var isV7Api = parser.getRestApiVersion().matches(RestApiVersion.equalTo(RestApiVersion.V_7));\n+                                if (isV7Api) {\n                                     // for bigger bulks, deprecation throttling might not be enough\n                                     if (deprecateOrErrorOnType && typesDeprecationLogged == false) {\n                                         deprecationLogger.compatibleCritical(\"bulk_with_types\", RestBulkAction.TYPES_DEPRECATION_MESSAGE);\ndiff --git a/server/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineRequest.java b/server/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineRequest.java\nindex 6adcd80c..5735b57c 100644\n--- a/server/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineRequest.java\n+++ b/server/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineRequest.java\n@@ -172,7 +172,9 @@ public class SimulatePipelineRequest extends ActionRequest implements ToXContent\n             String index = ConfigurationUtils.readStringOrIntProperty(null, null, dataMap, Metadata.INDEX.getFieldName(), \"_index\");\n             String id = ConfigurationUtils.readStringOrIntProperty(null, null, dataMap, Metadata.ID.getFieldName(), \"_id\");\n             String routing = ConfigurationUtils.readOptionalStringOrIntProperty(null, null, dataMap, Metadata.ROUTING.getFieldName());\n-            if (restApiVersion == RestApiVersion.V_7 && dataMap.containsKey(Metadata.TYPE.getFieldName())) {\n+            @UpdateForV9(owner = UpdateForV9.Owner.DATA_MANAGEMENT) // Remove V_7 compatibility check\n+            var isRestApiV7 = restApiVersion == RestApiVersion.V_7;\n+            if (isRestApiV7 && dataMap.containsKey(Metadata.TYPE.getFieldName())) {\n                 deprecationLogger.compatibleCritical(\n                     \"simulate_pipeline_with_types\",\n                     \"[types removal] specifying _type in pipeline simulation requests is deprecated\"\ndiff --git a/server/src/main/java/org/elasticsearch/action/search/MultiSearchRequest.java b/server/src/main/java/org/elasticsearch/action/search/MultiSearchRequest.java\nindex 8467ee6f..3b105402 100644\n--- a/server/src/main/java/org/elasticsearch/action/search/MultiSearchRequest.java\n+++ b/server/src/main/java/org/elasticsearch/action/search/MultiSearchRequest.java\n@@ -214,7 +214,9 @@ public class MultiSearchRequest extends ActionRequest implements CompositeIndice\n                 break;\n             }\n             // support first line with \\n\n-            if (parserConfig.restApiVersion() == RestApiVersion.V_7 && nextMarker == 0) {\n+            @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS) // Remove V_7 compatibility check\n+            var isV7 = parserConfig.restApiVersion() == RestApiVersion.V_7;\n+            if (isV7 && nextMarker == 0) {\n                 deprecationLogger.compatibleCritical(\"msearch_first_line_empty\", FIRST_LINE_EMPTY_DEPRECATION_MESSAGE);\n                 from = nextMarker + 1;\n                 continue;\n@@ -281,7 +283,9 @@ public class MultiSearchRequest extends ActionRequest implements CompositeIndice\n                             allowNoIndices = value;\n                         } else if (\"ignore_throttled\".equals(entry.getKey()) || \"ignoreThrottled\".equals(entry.getKey())) {\n                             ignoreThrottled = value;\n-                        } else if (parserConfig.restApiVersion() == RestApiVersion.V_7\n+                        @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS) // Remove V_7 compatibility check\n+                        var isRestApiV7 = parserConfig.restApiVersion() == RestApiVersion.V_7;\n+                        } else if (isRestApiV7\n                             && (\"type\".equals(entry.getKey()) || \"types\".equals(entry.getKey()))) {\n                                 deprecationLogger.compatibleCritical(\"msearch_with_types\", RestMultiSearchAction.TYPES_DEPRECATION_MESSAGE);\n                             } else if (extraParamParser.apply(entry.getKey(), value, searchRequest)) {\ndiff --git a/server/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java b/server/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java\nindex a36158d1..b2b6d4f3 100644\n--- a/server/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java\n+++ b/server/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java\n@@ -583,7 +583,9 @@ public final class TermVectorsRequest extends SingleShardRequest<TermVectorsRequ\n                     termVectorsRequest.version = parser.longValue();\n                 } else if (VERSION_TYPE.match(currentFieldName, parser.getDeprecationHandler())) {\n                     termVectorsRequest.versionType = VersionType.fromString(parser.text());\n-                } else if (restApiVersion == RestApiVersion.V_7 && TYPE.match(currentFieldName, parser.getDeprecationHandler())) {\n+                @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS) // Remove V_7 compatibility check\n+                var isRestApiV7 = restApiVersion == RestApiVersion.V_7;\n+                } else if (isRestApiV7 && TYPE.match(currentFieldName, parser.getDeprecationHandler())) {\n                     deprecationLogger.compatibleCritical(\"termvectors_with_types\", RestTermVectorsAction.TYPES_DEPRECATION_MESSAGE);\n                 } else {\n                     throw new ElasticsearchParseException(\"failed to parse term vectors request. unknown field [{}]\", currentFieldName);\ndiff --git a/server/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java b/server/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java\nindex 263c6bd3..63d9df5f 100644\n--- a/server/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java\n+++ b/server/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java\n@@ -16,6 +16,7 @@ import org.elasticsearch.common.ParsingException;\n import org.elasticsearch.common.io.stream.StreamOutput;\n import org.elasticsearch.common.logging.DeprecationLogger;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.xcontent.ParseField;\n import org.elasticsearch.xcontent.XContentBuilder;\n import org.elasticsearch.xcontent.XContentParser;\n@@ -27,6 +28,7 @@ public class CommonTermsQueryBuilder extends AbstractQueryBuilder<CommonTermsQue\n     public static final String COMMON_TERMS_QUERY_DEPRECATION_MSG = \"Common Terms Query usage is not supported. \"\n         + \"Use [match] query which can efficiently skip blocks of documents if the total number of hits is not tracked.\";\n \n+    @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS) // Remove V_7 compatibility\n     public static ParseField NAME_V7 = new ParseField(\"common\").withAllDeprecated(COMMON_TERMS_QUERY_DEPRECATION_MSG)\n         .forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\n \ndiff --git a/server/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilder.java b/server/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilder.java\nindex 22cc68fb..0fcbf80d 100644\n--- a/server/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilder.java\n+++ b/server/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilder.java\n@@ -25,6 +25,7 @@ import org.elasticsearch.common.io.stream.StreamInput;\n import org.elasticsearch.common.io.stream.StreamOutput;\n import org.elasticsearch.common.logging.DeprecationLogger;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.geometry.Rectangle;\n import org.elasticsearch.geometry.utils.Geohash;\n import org.elasticsearch.index.mapper.GeoShapeQueryable;\n@@ -55,6 +56,7 @@ public class GeoBoundingBoxQueryBuilder extends AbstractQueryBuilder<GeoBounding\n      */\n     public static final boolean DEFAULT_IGNORE_UNMAPPED = false;\n \n+    @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_ANALYTICS) // Remove V_7 compatibility\n     private static final ParseField TYPE_FIELD = new ParseField(\"type\").forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\n     private static final ParseField VALIDATION_METHOD_FIELD = new ParseField(\"validation_method\");\n     private static final ParseField IGNORE_UNMAPPED_FIELD = new ParseField(\"ignore_unmapped\");\ndiff --git a/server/src/main/java/org/elasticsearch/index/query/MatchQueryBuilder.java b/server/src/main/java/org/elasticsearch/index/query/MatchQueryBuilder.java\nindex d72b755e..f4f4dec8 100644\n--- a/server/src/main/java/org/elasticsearch/index/query/MatchQueryBuilder.java\n+++ b/server/src/main/java/org/elasticsearch/index/query/MatchQueryBuilder.java\n@@ -21,6 +21,7 @@ import org.elasticsearch.common.lucene.search.Queries;\n import org.elasticsearch.common.unit.Fuzziness;\n import org.elasticsearch.common.xcontent.LoggingDeprecationHandler;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.index.analysis.NamedAnalyzer;\n import org.elasticsearch.index.mapper.MappedFieldType;\n import org.elasticsearch.index.query.support.QueryParsers;\n@@ -39,6 +40,7 @@ import java.util.Objects;\n public class MatchQueryBuilder extends AbstractQueryBuilder<MatchQueryBuilder> {\n     private static final String CUTOFF_FREQUENCY_DEPRECATION_MSG = \"cutoff_freqency is not supported. \"\n         + \"The [match] query can skip block of documents efficiently if the total number of hits is not tracked\";\n+    @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS) // Remove V_7 compatibility\n     public static final ParseField CUTOFF_FREQUENCY_FIELD = new ParseField(\"cutoff_frequency\").withAllDeprecated(\n         CUTOFF_FREQUENCY_DEPRECATION_MSG\n     ).forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\ndiff --git a/server/src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java b/server/src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java\nindex a83fb8d1..bd545066 100644\n--- a/server/src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java\n+++ b/server/src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java\n@@ -22,6 +22,7 @@ import org.elasticsearch.common.io.stream.Writeable;\n import org.elasticsearch.common.unit.Fuzziness;\n import org.elasticsearch.common.xcontent.LoggingDeprecationHandler;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.index.query.support.QueryParsers;\n import org.elasticsearch.index.search.MatchQueryParser;\n import org.elasticsearch.index.search.MultiMatchQueryParser;\n@@ -47,6 +48,7 @@ public final class MultiMatchQueryBuilder extends AbstractQueryBuilder<MultiMatc\n     public static final String NAME = \"multi_match\";\n     private static final String CUTOFF_FREQUENCY_DEPRECATION_MSG = \"cutoff_freqency is not supported.\"\n         + \" The [multi_match] query can skip block of documents efficiently if the total number of hits is not tracked\";\n+    @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS) // Remove V_7 compatibility\n     private static final ParseField CUTOFF_FREQUENCY_FIELD = new ParseField(\"cutoff_frequency\").withAllDeprecated(\n         CUTOFF_FREQUENCY_DEPRECATION_MSG\n     ).forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\ndiff --git a/server/src/main/java/org/elasticsearch/index/query/TypeQueryV7Builder.java b/server/src/main/java/org/elasticsearch/index/query/TypeQueryV7Builder.java\nindex f707684c..1eef676a 100644\n--- a/server/src/main/java/org/elasticsearch/index/query/TypeQueryV7Builder.java\n+++ b/server/src/main/java/org/elasticsearch/index/query/TypeQueryV7Builder.java\n@@ -18,6 +18,7 @@ import org.elasticsearch.common.io.stream.StreamInput;\n import org.elasticsearch.common.io.stream.StreamOutput;\n import org.elasticsearch.common.logging.DeprecationLogger;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.index.mapper.MapperService;\n import org.elasticsearch.xcontent.ObjectParser;\n import org.elasticsearch.xcontent.ParseField;\n@@ -32,20 +33,21 @@ public class TypeQueryV7Builder extends AbstractQueryBuilder<TypeQueryV7Builder>\n         + \"prefer to filter on a field instead.\";\n \n     private static final String NAME = \"type\";\n+    @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS) // Remove V_7 compatibility\n     public static final ParseField NAME_V7 = new ParseField(NAME).forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\n     private static final ParseField VALUE_FIELD = new ParseField(\"value\");\n     private static final ObjectParser<TypeQueryV7Builder, Void> PARSER = new ObjectParser<>(NAME, TypeQueryV7Builder::new);\n \n     static {\n-        PARSER.declareString(\n-            QueryBuilder::queryName,\n-            AbstractQueryBuilder.NAME_FIELD.forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7))\n-        );\n-        PARSER.declareFloat(\n-            QueryBuilder::boost,\n-            AbstractQueryBuilder.BOOST_FIELD.forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7))\n-        );\n-        PARSER.declareString(TypeQueryV7Builder::setValue, VALUE_FIELD.forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7)));\n+        @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS) // Remove V_7 compatibility\n+        var nameFieldV7 = AbstractQueryBuilder.NAME_FIELD.forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\n+        PARSER.declareString(QueryBuilder::queryName, nameFieldV7);\n+        @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS) // Remove V_7 compatibility\n+        var boostFieldV7 = AbstractQueryBuilder.BOOST_FIELD.forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\n+        PARSER.declareFloat(QueryBuilder::boost, boostFieldV7);\n+        @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS) // Remove V_7 compatibility\n+        var valueFieldV7 = VALUE_FIELD.forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\n+        PARSER.declareString(TypeQueryV7Builder::setValue, valueFieldV7);\n     }\n \n     private String value;\ndiff --git a/server/src/main/java/org/elasticsearch/index/reindex/ReindexRequest.java b/server/src/main/java/org/elasticsearch/index/reindex/ReindexRequest.java\nindex b7ec486d..c56b6a64 100644\n--- a/server/src/main/java/org/elasticsearch/index/reindex/ReindexRequest.java\n+++ b/server/src/main/java/org/elasticsearch/index/reindex/ReindexRequest.java\n@@ -356,6 +356,7 @@ public class ReindexRequest extends AbstractBulkIndexByScrollRequest<ReindexRequ\n \n         PARSER.declareInt(\n             ReindexRequest::setMaxDocsValidateIdentical,\n+            @UpdateForV9(owner = UpdateForV9.Owner.DISTRIBUTED_INDEXING) // Remove V_7 compatibility\n             new ParseField(\"max_docs\", \"size\").forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7))\n         );\n \ndiff --git a/server/src/main/java/org/elasticsearch/indices/TermsLookup.java b/server/src/main/java/org/elasticsearch/indices/TermsLookup.java\nindex b1c74c60..fbb3b72d 100644\n--- a/server/src/main/java/org/elasticsearch/indices/TermsLookup.java\n+++ b/server/src/main/java/org/elasticsearch/indices/TermsLookup.java\n@@ -109,7 +109,9 @@ public class TermsLookup implements Writeable, ToXContentFragment {\n         PARSER.declareString(constructorArg(), new ParseField(\"id\"));\n         PARSER.declareString(constructorArg(), new ParseField(\"path\"));\n         PARSER.declareString(TermsLookup::routing, new ParseField(\"routing\"));\n-        PARSER.declareString((termLookup, type) -> {}, new ParseField(\"type\").forRestApiVersion(equalTo(RestApiVersion.V_7)));\n+        @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS) // Remove V_7 compatibility\n+        var typeFieldV7 = new ParseField(\"type\").forRestApiVersion(equalTo(RestApiVersion.V_7));\n+        PARSER.declareString((termLookup, type) -> {}, typeFieldV7);\n     }\n \n     public static TermsLookup parseTermsLookup(XContentParser parser) throws IOException {\ndiff --git a/server/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetAliasesAction.java b/server/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetAliasesAction.java\nindex 79e5c574..65964ea0 100644\n--- a/server/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetAliasesAction.java\n+++ b/server/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetAliasesAction.java\n@@ -214,7 +214,9 @@ public class RestGetAliasesAction extends BaseRestHandler {\n         if (request.hasParam(\"local\")) {\n             // consume this param just for validation\n             final var localParam = request.paramAsBoolean(\"local\", false);\n-            if (request.getRestApiVersion() != RestApiVersion.V_7) {\n+            @UpdateForV9(owner = UpdateForV9.Owner.DATA_MANAGEMENT) // Remove V_7 compatibility check\n+            var isNotV7 = request.getRestApiVersion() != RestApiVersion.V_7;\n+            if (isNotV7) {\n                 DEPRECATION_LOGGER.critical(\n                     DeprecationCategory.API,\n                     \"get-aliases-local\",\ndiff --git a/server/src/main/java/org/elasticsearch/rest/action/cat/RestAliasAction.java b/server/src/main/java/org/elasticsearch/rest/action/cat/RestAliasAction.java\nindex 0957821e..c42caeb8 100644\n--- a/server/src/main/java/org/elasticsearch/rest/action/cat/RestAliasAction.java\n+++ b/server/src/main/java/org/elasticsearch/rest/action/cat/RestAliasAction.java\n@@ -18,6 +18,7 @@ import org.elasticsearch.common.Table;\n import org.elasticsearch.common.logging.DeprecationCategory;\n import org.elasticsearch.common.logging.DeprecationLogger;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.rest.RestRequest;\n import org.elasticsearch.rest.RestResponse;\n import org.elasticsearch.rest.Scope;\n@@ -60,7 +61,9 @@ public class RestAliasAction extends AbstractCatAction {\n         if (request.hasParam(\"local\")) {\n             // consume this param just for validation\n             final var localParam = request.paramAsBoolean(\"local\", false);\n-            if (request.getRestApiVersion() != RestApiVersion.V_7) {\n+            @UpdateForV9(owner = UpdateForV9.Owner.DATA_MANAGEMENT) // Remove V_7 compatibility check\n+            var isNotV7 = request.getRestApiVersion() != RestApiVersion.V_7;\n+            if (isNotV7) {\n                 DEPRECATION_LOGGER.critical(\n                     DeprecationCategory.API,\n                     \"cat-aliases-local\",\ndiff --git a/server/src/main/java/org/elasticsearch/search/SearchModule.java b/server/src/main/java/org/elasticsearch/search/SearchModule.java\nindex 0bb914a9..d082d461 100644\n--- a/server/src/main/java/org/elasticsearch/search/SearchModule.java\n+++ b/server/src/main/java/org/elasticsearch/search/SearchModule.java\n@@ -687,7 +687,9 @@ public class SearchModule {\n                 .setAggregatorRegistrar(CompositeAggregationBuilder::registerAggregators),\n             builder\n         );\n-        if (RestApiVersion.minimumSupported() == RestApiVersion.V_7) {\n+        @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS) // Remove V_7 compatibility check and registration\n+        var shouldRegisterV7Query = RestApiVersion.minimumSupported() == RestApiVersion.V_7;\n+        if (shouldRegisterV7Query) {\n             registerQuery(\n                 new QuerySpec<>(\n                     CommonTermsQueryBuilder.NAME_V7,\n@@ -816,7 +818,9 @@ public class SearchModule {\n                 SerialDiffPipelineAggregationBuilder::parse\n             )\n         );\n-        if (RestApiVersion.minimumSupported() == RestApiVersion.V_7) {\n+        @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_ANALYTICS) // Remove V_7 compatibility check and registration\n+        var shouldRegisterV7PipelineAgg = RestApiVersion.minimumSupported() == RestApiVersion.V_7;\n+        if (shouldRegisterV7PipelineAgg) {\n             registerPipelineAggregation(\n                 new PipelineAggregationSpec(\n                     MovAvgPipelineAggregationBuilder.NAME_V7,\n@@ -1204,7 +1208,9 @@ public class SearchModule {\n \n         registerFromPlugin(plugins, SearchPlugin::getQueries, this::registerQuery);\n \n-        if (RestApiVersion.minimumSupported() == RestApiVersion.V_7) {\n+        @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS) // Remove V_7 compatibility check and registration\n+        var shouldRegisterTypeQueryV7 = RestApiVersion.minimumSupported() == RestApiVersion.V_7;\n+        if (shouldRegisterTypeQueryV7) {\n             registerQuery(new QuerySpec<>(TypeQueryV7Builder.NAME_V7, TypeQueryV7Builder::new, TypeQueryV7Builder::fromXContent));\n         }\n     }\ndiff --git a/server/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateIntervalWrapper.java b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateIntervalWrapper.java\nindex 6f03f9e5..5ff3c303 100644\n--- a/server/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateIntervalWrapper.java\n+++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateIntervalWrapper.java\n@@ -19,6 +19,7 @@ import org.elasticsearch.common.logging.DeprecationCategory;\n import org.elasticsearch.common.logging.DeprecationLogger;\n import org.elasticsearch.core.RestApiVersion;\n import org.elasticsearch.core.TimeValue;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.xcontent.ObjectParser;\n import org.elasticsearch.xcontent.ParseField;\n import org.elasticsearch.xcontent.ToXContentFragment;\n@@ -112,6 +113,7 @@ public class DateIntervalWrapper implements ToXContentFragment, Writeable {\n             } else {\n                 return new DateHistogramInterval(p.text());\n             }\n+        @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_ANALYTICS) // Remove V_7 compatibility\n         }, Histogram.INTERVAL_FIELD.forRestApiVersion(equalTo(RestApiVersion.V_7)), ObjectParser.ValueType.LONG);\n \n         parser.declareField(\ndiff --git a/server/src/main/java/org/elasticsearch/search/aggregations/pipeline/MovAvgPipelineAggregationBuilder.java b/server/src/main/java/org/elasticsearch/search/aggregations/pipeline/MovAvgPipelineAggregationBuilder.java\nindex 06848731..27f7e13d 100644\n--- a/server/src/main/java/org/elasticsearch/search/aggregations/pipeline/MovAvgPipelineAggregationBuilder.java\n+++ b/server/src/main/java/org/elasticsearch/search/aggregations/pipeline/MovAvgPipelineAggregationBuilder.java\n@@ -40,6 +40,7 @@ public class MovAvgPipelineAggregationBuilder extends AbstractPipelineAggregatio\n     public static final String MOVING_AVG_AGG_DEPRECATION_MSG = \"Moving Average aggregation usage is not supported. \"\n         + \"Use the [moving_fn] aggregation instead.\";\n \n+    @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_ANALYTICS) // Remove V_7 compatibility\n     public static final ParseField NAME_V7 = new ParseField(\"moving_avg\").withAllDeprecated(MOVING_AVG_AGG_DEPRECATION_MSG)\n         .forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\n \ndiff --git a/server/src/main/java/org/elasticsearch/search/fetch/subphase/FieldAndFormat.java b/server/src/main/java/org/elasticsearch/search/fetch/subphase/FieldAndFormat.java\nindex 719729f6..91d49d33 100644\n--- a/server/src/main/java/org/elasticsearch/search/fetch/subphase/FieldAndFormat.java\n+++ b/server/src/main/java/org/elasticsearch/search/fetch/subphase/FieldAndFormat.java\n@@ -56,6 +56,7 @@ public final class FieldAndFormat implements Writeable, ToXContentObject {\n         PARSER.declareField(\n             ConstructingObjectParser.optionalConstructorArg(),\n             ignoreUseFieldMappingStringParser(),\n+            @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS) // Remove V_7 compatibility\n             FORMAT_FIELD.forRestApiVersion(equalTo(RestApiVersion.V_7)),\n             ObjectParser.ValueType.STRING_OR_NULL\n         );\ndiff --git a/server/src/main/java/org/elasticsearch/search/sort/SortBuilder.java b/server/src/main/java/org/elasticsearch/search/sort/SortBuilder.java\nindex 9f943e63..1bc1d714 100644\n--- a/server/src/main/java/org/elasticsearch/search/sort/SortBuilder.java\n+++ b/server/src/main/java/org/elasticsearch/search/sort/SortBuilder.java\n@@ -19,6 +19,7 @@ import org.elasticsearch.common.io.stream.VersionedNamedWriteable;\n import org.elasticsearch.common.lucene.search.Queries;\n import org.elasticsearch.common.util.BigArrays;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.index.fielddata.IndexFieldData.XFieldComparatorSource.Nested;\n import org.elasticsearch.index.mapper.NestedObjectMapper;\n import org.elasticsearch.index.query.QueryBuilder;\n@@ -50,8 +51,10 @@ public abstract class SortBuilder<T extends SortBuilder<T>>\n \n     // parse fields common to more than one SortBuilder\n     public static final ParseField ORDER_FIELD = new ParseField(\"order\");\n+    @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS) // Remove V_7 compatibility\n     public static final ParseField NESTED_FILTER_FIELD = new ParseField(\"nested_filter\").withAllDeprecated()\n         .forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\n+    @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS) // Remove V_7 compatibility\n     public static final ParseField NESTED_PATH_FIELD = new ParseField(\"nested_path\").withAllDeprecated()\n         .forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\n \ndiff --git a/x-pack/plugin/core/src/main/java/org/elasticsearch/license/License.java b/x-pack/plugin/core/src/main/java/org/elasticsearch/license/License.java\nindex 0d1a007d..e2de28c7 100644\n--- a/x-pack/plugin/core/src/main/java/org/elasticsearch/license/License.java\n+++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/license/License.java\n@@ -16,6 +16,7 @@ import org.elasticsearch.common.io.stream.StreamOutput;\n import org.elasticsearch.common.xcontent.LoggingDeprecationHandler;\n import org.elasticsearch.common.xcontent.XContentHelper;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.features.NodeFeature;\n import org.elasticsearch.xcontent.ToXContentObject;\n import org.elasticsearch.xcontent.XContentBuilder;\n@@ -145,6 +146,7 @@ public class License implements ToXContentObject {\n      * XContent param name to map the \"enterprise\" license type to \"platinum\"\n      * for backwards compatibility with older clients\n      */\n+    @UpdateForV9(owner = UpdateForV9.Owner.SECURITY) // Remove V_7 compatibility\n     public static final String XCONTENT_HIDE_ENTERPRISE = \"hide_enterprise\";\n \n     public static final Comparator<License> LATEST_ISSUE_DATE_FIRST = Comparator.comparing(License::issueDate).reversed();\ndiff --git a/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/CloseJobAction.java b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/CloseJobAction.java\nindex ca815099..7fb2465b 100644\n--- a/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/CloseJobAction.java\n+++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/CloseJobAction.java\n@@ -14,6 +14,7 @@ import org.elasticsearch.common.io.stream.StreamOutput;\n import org.elasticsearch.common.io.stream.Writeable;\n import org.elasticsearch.core.RestApiVersion;\n import org.elasticsearch.core.TimeValue;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.tasks.Task;\n import org.elasticsearch.xcontent.ObjectParser;\n import org.elasticsearch.xcontent.ParseField;\n@@ -44,6 +45,7 @@ public class CloseJobAction extends ActionType<CloseJobAction.Response> {\n         public static final ParseField TIMEOUT = new ParseField(\"timeout\");\n         public static final ParseField FORCE = new ParseField(\"force\");\n         public static final ParseField ALLOW_NO_MATCH = new ParseField(\"allow_no_match\").forRestApiVersion(onOrAfter(RestApiVersion.V_8));\n+        @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING) // Remove V_7 compatibility\n         public static final ParseField ALLOW_NO_MATCH_V7 = new ParseField(\"allow_no_match\", DEPRECATED_ALLOW_NO_JOBS_PARAM)\n             .forRestApiVersion(equalTo(RestApiVersion.V_7));\n         public static final ObjectParser<Request, Void> PARSER = new ObjectParser<>(NAME, Request::new);\ndiff --git a/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/GetOverallBucketsAction.java b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/GetOverallBucketsAction.java\nindex 12c8696a..d308e93d 100644\n--- a/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/GetOverallBucketsAction.java\n+++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/GetOverallBucketsAction.java\n@@ -15,6 +15,7 @@ import org.elasticsearch.common.io.stream.StreamOutput;\n import org.elasticsearch.common.time.DateMathParser;\n import org.elasticsearch.core.RestApiVersion;\n import org.elasticsearch.core.TimeValue;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.index.mapper.DateFieldMapper;\n import org.elasticsearch.xcontent.ObjectParser;\n import org.elasticsearch.xcontent.ParseField;\n@@ -68,6 +69,7 @@ public class GetOverallBucketsAction extends ActionType<GetOverallBucketsAction.\n         public static final ParseField START = new ParseField(\"start\");\n         public static final ParseField END = new ParseField(\"end\");\n         public static final ParseField ALLOW_NO_MATCH = new ParseField(\"allow_no_match\").forRestApiVersion(onOrAfter(RestApiVersion.V_8));\n+        @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING) // Remove V_7 compatibility\n         public static final ParseField ALLOW_NO_MATCH_V7 = new ParseField(\"allow_no_match\", DEPRECATED_ALLOW_NO_JOBS_PARAM)\n             .forRestApiVersion(equalTo(RestApiVersion.V_7));\n \ndiff --git a/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/StopDatafeedAction.java b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/StopDatafeedAction.java\nindex cb89cfa8..40ba2109 100644\n--- a/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/StopDatafeedAction.java\n+++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/StopDatafeedAction.java\n@@ -15,6 +15,7 @@ import org.elasticsearch.common.io.stream.StreamOutput;\n import org.elasticsearch.common.io.stream.Writeable;\n import org.elasticsearch.core.RestApiVersion;\n import org.elasticsearch.core.TimeValue;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.tasks.Task;\n import org.elasticsearch.xcontent.ObjectParser;\n import org.elasticsearch.xcontent.ParseField;\n@@ -47,6 +48,7 @@ public class StopDatafeedAction extends ActionType<StopDatafeedAction.Response>\n         public static final ParseField TIMEOUT = new ParseField(\"timeout\");\n         public static final ParseField FORCE = new ParseField(\"force\");\n         public static final ParseField ALLOW_NO_MATCH = new ParseField(\"allow_no_match\").forRestApiVersion(onOrAfter(RestApiVersion.V_8));\n+        @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING) // Remove V_7 compatibility\n         public static final ParseField ALLOW_NO_MATCH_V7 = new ParseField(\"allow_no_match\", DEPRECATED_ALLOW_NO_DATAFEEDS_PARAM)\n             .forRestApiVersion(equalTo(RestApiVersion.V_7));\n \ndiff --git a/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/inference/TrainedModelConfig.java b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/inference/TrainedModelConfig.java\nindex 5ae19f6d..d2b8f096 100644\n--- a/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/inference/TrainedModelConfig.java\n+++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/inference/TrainedModelConfig.java\n@@ -18,6 +18,7 @@ import org.elasticsearch.common.io.stream.Writeable;\n import org.elasticsearch.common.unit.ByteSizeValue;\n import org.elasticsearch.core.Nullable;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.license.License;\n import org.elasticsearch.xcontent.NamedXContentRegistry;\n import org.elasticsearch.xcontent.ObjectParser;\n@@ -515,8 +516,10 @@ public class TrainedModelConfig implements ToXContentObject, Writeable {\n                 createTime.toEpochMilli()\n             );\n             // If we are NOT storing the model, we should return the deprecated field name\n-            if (params.paramAsBoolean(ToXContentParams.FOR_INTERNAL_STORAGE, false) == false\n-                && builder.getRestApiVersion().matches(RestApiVersion.equalTo(RestApiVersion.V_7))) {\n+            @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING) // Remove V_7 compatibility check\n+            var shouldOutputDeprecatedField = params.paramAsBoolean(ToXContentParams.FOR_INTERNAL_STORAGE, false) == false\n+                && builder.getRestApiVersion().matches(RestApiVersion.equalTo(RestApiVersion.V_7));\n+            if (shouldOutputDeprecatedField) {\n                 builder.humanReadableField(\n                     DEPRECATED_ESTIMATED_HEAP_MEMORY_USAGE_BYTES.getPreferredName(),\n                     ESTIMATED_HEAP_MEMORY_USAGE_HUMAN,\ndiff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/cat/RestCatDatafeedsAction.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/cat/RestCatDatafeedsAction.java\nindex b93089ea..0bf2a150 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/cat/RestCatDatafeedsAction.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/cat/RestCatDatafeedsAction.java\n@@ -11,6 +11,7 @@ import org.elasticsearch.cluster.node.DiscoveryNode;\n import org.elasticsearch.common.Strings;\n import org.elasticsearch.common.Table;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.core.TimeValue;\n import org.elasticsearch.rest.RestRequest;\n import org.elasticsearch.rest.RestResponse;\n@@ -52,10 +53,12 @@ public class RestCatDatafeedsAction extends AbstractCatAction {\n             datafeedId = GetDatafeedsStatsAction.ALL;\n         }\n         Request request = new Request(datafeedId);\n+        @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING) // Remove V_7 compatibility\n+        var deprecatedParamVersion = RestApiVersion.V_7;\n         checkAndSetDeprecatedParam(\n             DEPRECATED_ALLOW_NO_DATAFEEDS_PARAM,\n             Request.ALLOW_NO_MATCH,\n-            RestApiVersion.V_7,\n+            deprecatedParamVersion,\n             restRequest,\n             (r, s) -> r.paramAsBoolean(s, request.allowNoMatch()),\n             request::setAllowNoMatch\ndiff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/cat/RestCatJobsAction.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/cat/RestCatJobsAction.java\nindex cb02990d..655b2e76 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/cat/RestCatJobsAction.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/cat/RestCatJobsAction.java\n@@ -14,6 +14,7 @@ import org.elasticsearch.common.Table;\n import org.elasticsearch.common.unit.ByteSizeValue;\n import org.elasticsearch.core.RestApiVersion;\n import org.elasticsearch.core.TimeValue;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.rest.RestRequest;\n import org.elasticsearch.rest.RestResponse;\n import org.elasticsearch.rest.Scope;\n@@ -57,10 +58,12 @@ public class RestCatJobsAction extends AbstractCatAction {\n             jobId = Metadata.ALL;\n         }\n         Request request = new Request(jobId);\n+        @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING) // Remove V_7 compatibility\n+        var deprecatedParamVersion = RestApiVersion.V_7;\n         checkAndSetDeprecatedParam(\n             DEPRECATED_ALLOW_NO_JOBS_PARAM,\n             Request.ALLOW_NO_MATCH,\n-            RestApiVersion.V_7,\n+            deprecatedParamVersion,\n             restRequest,\n             (r, s) -> r.paramAsBoolean(s, request.allowNoMatch()),\n             request::setAllowNoMatch\ndiff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestGetDatafeedStatsAction.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestGetDatafeedStatsAction.java\nindex eb930edf..76646253 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestGetDatafeedStatsAction.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestGetDatafeedStatsAction.java\n@@ -9,6 +9,7 @@ package org.elasticsearch.xpack.ml.rest.datafeeds;\n import org.elasticsearch.client.internal.node.NodeClient;\n import org.elasticsearch.common.Strings;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.rest.BaseRestHandler;\n import org.elasticsearch.rest.RestRequest;\n import org.elasticsearch.rest.Scope;\n@@ -48,10 +49,12 @@ public class RestGetDatafeedStatsAction extends BaseRestHandler {\n             datafeedId = GetDatafeedsStatsAction.ALL;\n         }\n         Request request = new Request(datafeedId);\n+        @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING) // Remove V_7 compatibility\n+        var deprecatedParamVersion = RestApiVersion.V_7;\n         checkAndSetDeprecatedParam(\n             DEPRECATED_ALLOW_NO_DATAFEEDS_PARAM,\n             Request.ALLOW_NO_MATCH,\n-            RestApiVersion.V_7,\n+            deprecatedParamVersion,\n             restRequest,\n             (r, s) -> r.paramAsBoolean(s, request.allowNoMatch()),\n             request::setAllowNoMatch\ndiff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestGetDatafeedsAction.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestGetDatafeedsAction.java\nindex 6b3a857c..d4fc42b3 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestGetDatafeedsAction.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestGetDatafeedsAction.java\n@@ -8,6 +8,7 @@ package org.elasticsearch.xpack.ml.rest.datafeeds;\n \n import org.elasticsearch.client.internal.node.NodeClient;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.rest.BaseRestHandler;\n import org.elasticsearch.rest.RestRequest;\n import org.elasticsearch.rest.Scope;\n@@ -51,10 +52,12 @@ public class RestGetDatafeedsAction extends BaseRestHandler {\n             datafeedId = GetDatafeedsAction.ALL;\n         }\n         Request request = new Request(datafeedId);\n+        @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING) // Remove V_7 compatibility\n+        var deprecatedParamVersion = RestApiVersion.V_7;\n         checkAndSetDeprecatedParam(\n             DEPRECATED_ALLOW_NO_DATAFEEDS_PARAM,\n             GetDatafeedsStatsAction.Request.ALLOW_NO_MATCH,\n-            RestApiVersion.V_7,\n+            deprecatedParamVersion,\n             restRequest,\n             (r, s) -> r.paramAsBoolean(s, request.allowNoMatch()),\n             request::setAllowNoMatch\ndiff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestStopDatafeedAction.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestStopDatafeedAction.java\nindex bdbdc18a..bb910edb 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestStopDatafeedAction.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestStopDatafeedAction.java\n@@ -9,6 +9,7 @@ package org.elasticsearch.xpack.ml.rest.datafeeds;\n import org.elasticsearch.client.internal.node.NodeClient;\n import org.elasticsearch.core.RestApiVersion;\n import org.elasticsearch.core.TimeValue;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.rest.BaseRestHandler;\n import org.elasticsearch.rest.RestRequest;\n import org.elasticsearch.rest.RestResponse;\n@@ -61,10 +62,12 @@ public class RestStopDatafeedAction extends BaseRestHandler {\n             if (restRequest.hasParam(Request.FORCE.getPreferredName())) {\n                 request.setForce(restRequest.paramAsBoolean(Request.FORCE.getPreferredName(), request.isForce()));\n             }\n+            @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING) // Remove V_7 compatibility\n+            var deprecatedParamVersion = RestApiVersion.V_7;\n             checkAndSetDeprecatedParam(\n                 DEPRECATED_ALLOW_NO_DATAFEEDS_PARAM,\n                 Request.ALLOW_NO_MATCH.getPreferredName(),\n-                RestApiVersion.V_7,\n+                deprecatedParamVersion,\n                 restRequest,\n                 (r, s) -> r.paramAsBoolean(s, request.allowNoMatch()),\n                 request::setAllowNoMatch\ndiff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestCloseJobAction.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestCloseJobAction.java\nindex 0986a6a2..eeac0ef8 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestCloseJobAction.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestCloseJobAction.java\n@@ -9,6 +9,7 @@ package org.elasticsearch.xpack.ml.rest.job;\n import org.elasticsearch.client.internal.node.NodeClient;\n import org.elasticsearch.core.RestApiVersion;\n import org.elasticsearch.core.TimeValue;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.rest.BaseRestHandler;\n import org.elasticsearch.rest.RestRequest;\n import org.elasticsearch.rest.Scope;\n@@ -55,10 +56,12 @@ public class RestCloseJobAction extends BaseRestHandler {\n             if (restRequest.hasParam(Request.FORCE.getPreferredName())) {\n                 request.setForce(restRequest.paramAsBoolean(Request.FORCE.getPreferredName(), request.isForce()));\n             }\n+            @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING) // Remove V_7 compatibility\n+            var deprecatedParamVersion = RestApiVersion.V_7;\n             checkAndSetDeprecatedParam(\n                 DEPRECATED_ALLOW_NO_JOBS_PARAM,\n                 Request.ALLOW_NO_MATCH.getPreferredName(),\n-                RestApiVersion.V_7,\n+                deprecatedParamVersion,\n                 restRequest,\n                 (r, s) -> r.paramAsBoolean(s, request.allowNoMatch()),\n                 request::setAllowNoMatch\ndiff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestGetJobStatsAction.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestGetJobStatsAction.java\nindex 1ecc0ff0..719a43a8 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestGetJobStatsAction.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestGetJobStatsAction.java\n@@ -10,6 +10,7 @@ import org.elasticsearch.client.internal.node.NodeClient;\n import org.elasticsearch.cluster.metadata.Metadata;\n import org.elasticsearch.common.Strings;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.rest.BaseRestHandler;\n import org.elasticsearch.rest.RestRequest;\n import org.elasticsearch.rest.Scope;\n@@ -52,10 +53,12 @@ public class RestGetJobStatsAction extends BaseRestHandler {\n             jobId = Metadata.ALL;\n         }\n         Request request = new Request(jobId);\n+        @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING) // Remove V_7 compatibility\n+        var deprecatedParamVersion = RestApiVersion.V_7;\n         checkAndSetDeprecatedParam(\n             DEPRECATED_ALLOW_NO_JOBS_PARAM,\n             Request.ALLOW_NO_MATCH,\n-            RestApiVersion.V_7,\n+            deprecatedParamVersion,\n             restRequest,\n             (r, s) -> r.paramAsBoolean(s, request.allowNoMatch()),\n             request::setAllowNoMatch\ndiff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestGetJobsAction.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestGetJobsAction.java\nindex e6f43250..9973bec9 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestGetJobsAction.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestGetJobsAction.java\n@@ -10,6 +10,7 @@ import org.elasticsearch.client.internal.node.NodeClient;\n import org.elasticsearch.cluster.metadata.Metadata;\n import org.elasticsearch.common.Strings;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.rest.BaseRestHandler;\n import org.elasticsearch.rest.RestRequest;\n import org.elasticsearch.rest.Scope;\n@@ -52,10 +53,12 @@ public class RestGetJobsAction extends BaseRestHandler {\n             jobId = Metadata.ALL;\n         }\n         Request request = new Request(jobId);\n+        @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING) // Remove V_7 compatibility\n+        var deprecatedParamVersion = RestApiVersion.V_7;\n         checkAndSetDeprecatedParam(\n             DEPRECATED_ALLOW_NO_JOBS_PARAM,\n             Request.ALLOW_NO_MATCH,\n-            RestApiVersion.V_7,\n+            deprecatedParamVersion,\n             restRequest,\n             (r, s) -> r.paramAsBoolean(s, request.allowNoMatch()),\n             request::setAllowNoMatch\ndiff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/results/RestGetOverallBucketsAction.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/results/RestGetOverallBucketsAction.java\nindex e73e5b32..130d82be 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/results/RestGetOverallBucketsAction.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/results/RestGetOverallBucketsAction.java\n@@ -8,6 +8,7 @@ package org.elasticsearch.xpack.ml.rest.results;\n \n import org.elasticsearch.client.internal.node.NodeClient;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.rest.BaseRestHandler;\n import org.elasticsearch.rest.RestRequest;\n import org.elasticsearch.rest.Scope;\n@@ -65,10 +66,12 @@ public class RestGetOverallBucketsAction extends BaseRestHandler {\n             if (restRequest.hasParam(Request.END.getPreferredName())) {\n                 request.setEnd(restRequest.param(Request.END.getPreferredName()));\n             }\n+            @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING) // Remove V_7 compatibility\n+            var deprecatedParamVersion = RestApiVersion.V_7;\n             checkAndSetDeprecatedParam(\n                 DEPRECATED_ALLOW_NO_JOBS_PARAM,\n                 Request.ALLOW_NO_MATCH.getPreferredName(),\n-                RestApiVersion.V_7,\n+                deprecatedParamVersion,\n                 restRequest,\n                 (r, s) -> r.paramAsBoolean(s, request.allowNoMatch()),\n                 request::setAllowNoMatch",
  "logs_path": "factory/claude-sonnet-4-5-20250929/074538b9/elastic_elasticsearch_pr114881/logs.jsonl",
  "errors": [],
  "edit_run_id": "074538b9",
  "test_label": "v0"
}