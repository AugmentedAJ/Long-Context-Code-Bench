{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 114890,
  "base_commit": "6de48b122f41ad9ddd8449dbcaec46e883d7e4a8",
  "runner": "factory",
  "model": "claude-sonnet-4-5-20250929",
  "timeout_s": 7200,
  "status": "success",
  "elapsed_ms": 282128,
  "patch_unified": "diff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/inference/adaptiveallocations/AdaptiveAllocationsScalerService.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/inference/adaptiveallocations/AdaptiveAllocationsScalerService.java\nindex 1c3a73a4..9624d619 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/inference/adaptiveallocations/AdaptiveAllocationsScalerService.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/inference/adaptiveallocations/AdaptiveAllocationsScalerService.java\n@@ -433,7 +433,8 @@ public class AdaptiveAllocationsScalerService implements ClusterStateListener {\n     public boolean maybeStartAllocation(TrainedModelAssignment assignment) {\n         if (assignment.getAdaptiveAllocationsSettings() != null\n             && assignment.getAdaptiveAllocationsSettings().getEnabled() == Boolean.TRUE\n-            && assignment.getAdaptiveAllocationsSettings().getMinNumberOfAllocations() == 0) {\n+            && (assignment.getAdaptiveAllocationsSettings().getMinNumberOfAllocations() == null\n+                || assignment.getAdaptiveAllocationsSettings().getMinNumberOfAllocations() == 0)) {\n \n             // Prevent against a flurry of scale up requests.\n             if (deploymentIdsWithInFlightScaleFromZeroRequests.contains(assignment.getDeploymentId()) == false) {\ndiff --git a/x-pack/plugin/ml/src/test/java/org/elasticsearch/xpack/ml/inference/adaptiveallocations/AdaptiveAllocationsScalerServiceTests.java b/x-pack/plugin/ml/src/test/java/org/elasticsearch/xpack/ml/inference/adaptiveallocations/AdaptiveAllocationsScalerServiceTests.java\nindex 79f2a913..a4a4c119 100644\n--- a/x-pack/plugin/ml/src/test/java/org/elasticsearch/xpack/ml/inference/adaptiveallocations/AdaptiveAllocationsScalerServiceTests.java\n+++ b/x-pack/plugin/ml/src/test/java/org/elasticsearch/xpack/ml/inference/adaptiveallocations/AdaptiveAllocationsScalerServiceTests.java\n@@ -274,11 +274,17 @@ public class AdaptiveAllocationsScalerServiceTests extends ESTestCase {\n                 TrainedModelAssignment.Builder.empty(taskParams(0), new AdaptiveAllocationsSettings(Boolean.TRUE, 1, 2)).build()\n             )\n         );\n+        // min allocations = 0 or null should start\n         assertTrue(\n             service.maybeStartAllocation(\n                 TrainedModelAssignment.Builder.empty(taskParams(0), new AdaptiveAllocationsSettings(Boolean.TRUE, 0, 2)).build()\n             )\n         );\n+        assertTrue(\n+            service.maybeStartAllocation(\n+                TrainedModelAssignment.Builder.empty(taskParams(0), new AdaptiveAllocationsSettings(Boolean.TRUE, null, 2)).build()\n+            )\n+        );\n     }\n \n     public void testMaybeStartAllocation_BlocksMultipleRequests() throws Exception {",
  "logs_path": "factory/claude-sonnet-4-5-20250929/074538b9/elastic_elasticsearch_pr114890/logs.jsonl",
  "errors": [],
  "edit_run_id": "074538b9",
  "test_label": "v0"
}