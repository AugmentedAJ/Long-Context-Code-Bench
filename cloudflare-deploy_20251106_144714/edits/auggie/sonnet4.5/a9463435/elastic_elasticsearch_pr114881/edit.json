{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 114881,
  "base_commit": "3bb20e39ab1bc094ff412602e3217be08f230631",
  "runner": "auggie",
  "model": "sonnet4.5",
  "timeout_s": 1800,
  "status": "success",
  "elapsed_ms": 1266372,
  "patch_unified": "diff --git a/libs/core/src/main/java/org/elasticsearch/core/RestApiVersion.java b/libs/core/src/main/java/org/elasticsearch/core/RestApiVersion.java\nindex 672090d1..2409ed7a 100644\n--- a/libs/core/src/main/java/org/elasticsearch/core/RestApiVersion.java\n+++ b/libs/core/src/main/java/org/elasticsearch/core/RestApiVersion.java\n@@ -50,6 +50,7 @@ public enum RestApiVersion {\n         return PREVIOUS;\n     }\n \n+    @UpdateForV9(owner = UpdateForV9.Owner.CORE_INFRA)\n     public static Predicate<RestApiVersion> equalTo(RestApiVersion restApiVersion) {\n         return switch (restApiVersion) {\n             case V_9 -> r -> r.major == V_9.major;\n@@ -58,6 +59,7 @@ public enum RestApiVersion {\n         };\n     }\n \n+    @UpdateForV9(owner = UpdateForV9.Owner.CORE_INFRA)\n     public static Predicate<RestApiVersion> onOrAfter(RestApiVersion restApiVersion) {\n         return switch (restApiVersion) {\n             case V_9 -> r -> r.major >= V_9.major;\n@@ -66,6 +68,7 @@ public enum RestApiVersion {\n         };\n     }\n \n+    @UpdateForV9(owner = UpdateForV9.Owner.CORE_INFRA)\n     public static RestApiVersion forMajor(int major) {\n         switch (major) {\n             case 7 -> {\ndiff --git a/modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateQueryBuilder.java b/modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateQueryBuilder.java\nindex 6b37b02a..61264a90 100644\n--- a/modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateQueryBuilder.java\n+++ b/modules/percolator/src/main/java/org/elasticsearch/percolator/PercolateQueryBuilder.java\n@@ -47,6 +47,7 @@ import org.elasticsearch.common.logging.DeprecationLogger;\n import org.elasticsearch.common.xcontent.LoggingDeprecationHandler;\n import org.elasticsearch.common.xcontent.XContentHelper;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.index.IndexVersion;\n import org.elasticsearch.index.IndexVersions;\n import org.elasticsearch.index.fielddata.FieldDataContext;\n@@ -368,13 +369,17 @@ public class PercolateQueryBuilder extends AbstractQueryBuilder<PercolateQueryBu\n             DOCUMENTS_FIELD.getPreferredName(),\n             INDEXED_DOCUMENT_FIELD_ID.getPreferredName()\n         );\n+        @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS)\n+        var indexedDocumentFieldTypeV7 = INDEXED_DOCUMENT_FIELD_TYPE.forRestApiVersion(equalTo(RestApiVersion.V_7));\n         PARSER.declareString(\n             deprecateAndIgnoreType(\"percolate_with_type\", TYPE_DEPRECATION_MESSAGE),\n-            INDEXED_DOCUMENT_FIELD_TYPE.forRestApiVersion(equalTo(RestApiVersion.V_7))\n+            indexedDocumentFieldTypeV7\n         );\n+        @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS)\n+        var documentTypeFieldV7 = DOCUMENT_TYPE_FIELD.forRestApiVersion(equalTo(RestApiVersion.V_7));\n         PARSER.declareString(\n             deprecateAndIgnoreType(\"percolate_with_document_type\", DOCUMENT_TYPE_DEPRECATION_MESSAGE),\n-            DOCUMENT_TYPE_FIELD.forRestApiVersion(equalTo(RestApiVersion.V_7))\n+            documentTypeFieldV7\n         );\n     }\n \ndiff --git a/server/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequest.java b/server/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequest.java\nindex fefc4131..f8ea163e 100644\n--- a/server/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequest.java\n+++ b/server/src/main/java/org/elasticsearch/action/admin/indices/rollover/RolloverRequest.java\n@@ -19,6 +19,7 @@ import org.elasticsearch.cluster.metadata.DataStream;\n import org.elasticsearch.common.io.stream.StreamInput;\n import org.elasticsearch.common.io.stream.StreamOutput;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.index.mapper.MapperService;\n import org.elasticsearch.tasks.CancellableTask;\n import org.elasticsearch.tasks.Task;\n@@ -57,6 +58,8 @@ public class RolloverRequest extends AcknowledgedRequest<RolloverRequest> implem\n             CreateIndexRequest.SETTINGS,\n             ObjectParser.ValueType.OBJECT\n         );\n+        @UpdateForV9(owner = UpdateForV9.Owner.DATA_MANAGEMENT)\n+        var mappingsFieldV7 = CreateIndexRequest.MAPPINGS.forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\n         PARSER.declareField((parser, request, context) -> {\n             // a type is not included, add a dummy _doc type\n             Map<String, Object> mappings = parser.map();\n@@ -69,7 +72,7 @@ public class RolloverRequest extends AcknowledgedRequest<RolloverRequest> implem\n                 );\n             }\n             request.createIndexRequest.mapping(mappings);\n-        }, CreateIndexRequest.MAPPINGS.forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7)), ObjectParser.ValueType.OBJECT);\n+        }, mappingsFieldV7, ObjectParser.ValueType.OBJECT);\n         PARSER.declareField((parser, request, context) -> {\n             // a type is not included, add a dummy _doc type\n             Map<String, Object> mappings = parser.map();\ndiff --git a/server/src/main/java/org/elasticsearch/action/bulk/BulkRequestParser.java b/server/src/main/java/org/elasticsearch/action/bulk/BulkRequestParser.java\nindex cd74989e..b4f41eab 100644\n--- a/server/src/main/java/org/elasticsearch/action/bulk/BulkRequestParser.java\n+++ b/server/src/main/java/org/elasticsearch/action/bulk/BulkRequestParser.java\n@@ -271,13 +271,15 @@ public final class BulkRequestParser {\n                                 }\n                                 index = stringDeduplicator.computeIfAbsent(parser.text(), Function.identity());\n                             } else if (TYPE.match(currentFieldName, parser.getDeprecationHandler())) {\n-                                if (parser.getRestApiVersion().matches(RestApiVersion.equalTo(RestApiVersion.V_7))) {\n+                                @UpdateForV9(owner = UpdateForV9.Owner.DISTRIBUTED_INDEXING)\n+                                var restApiVersion = parser.getRestApiVersion();\n+                                if (restApiVersion.matches(RestApiVersion.equalTo(RestApiVersion.V_7))) {\n                                     // for bigger bulks, deprecation throttling might not be enough\n                                     if (deprecateOrErrorOnType && typesDeprecationLogged == false) {\n                                         deprecationLogger.compatibleCritical(\"bulk_with_types\", RestBulkAction.TYPES_DEPRECATION_MESSAGE);\n                                         typesDeprecationLogged = true;\n                                     }\n-                                } else if (parser.getRestApiVersion().matches(RestApiVersion.onOrAfter(RestApiVersion.V_8))\n+                                } else if (restApiVersion.matches(RestApiVersion.onOrAfter(RestApiVersion.V_8))\n                                     && deprecateOrErrorOnType) {\n                                         throw new IllegalArgumentException(\n                                             \"Action/metadata line [\" + line + \"] contains an unknown parameter [\" + currentFieldName + \"]\"\ndiff --git a/server/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineRequest.java b/server/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineRequest.java\nindex 6adcd80c..fed5cf22 100644\n--- a/server/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineRequest.java\n+++ b/server/src/main/java/org/elasticsearch/action/ingest/SimulatePipelineRequest.java\n@@ -18,6 +18,7 @@ import org.elasticsearch.common.logging.DeprecationLogger;\n import org.elasticsearch.common.lucene.uid.Versions;\n import org.elasticsearch.common.xcontent.XContentHelper;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.index.VersionType;\n import org.elasticsearch.ingest.ConfigurationUtils;\n import org.elasticsearch.ingest.IngestDocument;\n@@ -172,7 +173,9 @@ public class SimulatePipelineRequest extends ActionRequest implements ToXContent\n             String index = ConfigurationUtils.readStringOrIntProperty(null, null, dataMap, Metadata.INDEX.getFieldName(), \"_index\");\n             String id = ConfigurationUtils.readStringOrIntProperty(null, null, dataMap, Metadata.ID.getFieldName(), \"_id\");\n             String routing = ConfigurationUtils.readOptionalStringOrIntProperty(null, null, dataMap, Metadata.ROUTING.getFieldName());\n-            if (restApiVersion == RestApiVersion.V_7 && dataMap.containsKey(Metadata.TYPE.getFieldName())) {\n+            @UpdateForV9(owner = UpdateForV9.Owner.DATA_MANAGEMENT)\n+            var apiVersion = restApiVersion;\n+            if (apiVersion == RestApiVersion.V_7 && dataMap.containsKey(Metadata.TYPE.getFieldName())) {\n                 deprecationLogger.compatibleCritical(\n                     \"simulate_pipeline_with_types\",\n                     \"[types removal] specifying _type in pipeline simulation requests is deprecated\"\ndiff --git a/server/src/main/java/org/elasticsearch/action/search/MultiSearchRequest.java b/server/src/main/java/org/elasticsearch/action/search/MultiSearchRequest.java\nindex 8467ee6f..180215e7 100644\n--- a/server/src/main/java/org/elasticsearch/action/search/MultiSearchRequest.java\n+++ b/server/src/main/java/org/elasticsearch/action/search/MultiSearchRequest.java\n@@ -21,6 +21,7 @@ import org.elasticsearch.common.io.stream.StreamOutput;\n import org.elasticsearch.common.logging.DeprecationLogger;\n import org.elasticsearch.common.xcontent.XContentHelper;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.rest.action.search.RestMultiSearchAction;\n import org.elasticsearch.rest.action.search.RestSearchAction;\n import org.elasticsearch.tasks.CancellableTask;\n@@ -214,7 +215,9 @@ public class MultiSearchRequest extends ActionRequest implements CompositeIndice\n                 break;\n             }\n             // support first line with \\n\n-            if (parserConfig.restApiVersion() == RestApiVersion.V_7 && nextMarker == 0) {\n+            @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS)\n+            var restApiVersion = parserConfig.restApiVersion();\n+            if (restApiVersion == RestApiVersion.V_7 && nextMarker == 0) {\n                 deprecationLogger.compatibleCritical(\"msearch_first_line_empty\", FIRST_LINE_EMPTY_DEPRECATION_MESSAGE);\n                 from = nextMarker + 1;\n                 continue;\n@@ -281,15 +284,18 @@ public class MultiSearchRequest extends ActionRequest implements CompositeIndice\n                             allowNoIndices = value;\n                         } else if (\"ignore_throttled\".equals(entry.getKey()) || \"ignoreThrottled\".equals(entry.getKey())) {\n                             ignoreThrottled = value;\n-                        } else if (parserConfig.restApiVersion() == RestApiVersion.V_7\n-                            && (\"type\".equals(entry.getKey()) || \"types\".equals(entry.getKey()))) {\n+                        } else {\n+                            @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS)\n+                            var apiVersion = parserConfig.restApiVersion();\n+                            if (apiVersion == RestApiVersion.V_7\n+                                && (\"type\".equals(entry.getKey()) || \"types\".equals(entry.getKey()))) {\n                                 deprecationLogger.compatibleCritical(\"msearch_with_types\", RestMultiSearchAction.TYPES_DEPRECATION_MESSAGE);\n                             } else if (extraParamParser.apply(entry.getKey(), value, searchRequest)) {\n                                 // Skip, the parser handled the key/value\n                             } else {\n                                 throw new IllegalArgumentException(\"key [\" + entry.getKey() + \"] is not supported in the metadata section\");\n                             }\n-                    }\n+                        }\n                     defaultOptions = IndicesOptions.fromParameters(\n                         expandWildcards,\n                         ignoreUnavailable,\ndiff --git a/server/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java b/server/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java\nindex a36158d1..1816e779 100644\n--- a/server/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java\n+++ b/server/src/main/java/org/elasticsearch/action/termvectors/TermVectorsRequest.java\n@@ -25,6 +25,7 @@ import org.elasticsearch.common.lucene.uid.Versions;\n import org.elasticsearch.common.util.set.Sets;\n import org.elasticsearch.common.xcontent.XContentHelper;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.index.VersionType;\n import org.elasticsearch.rest.action.document.RestTermVectorsAction;\n import org.elasticsearch.xcontent.ParseField;\n@@ -583,12 +584,15 @@ public final class TermVectorsRequest extends SingleShardRequest<TermVectorsRequ\n                     termVectorsRequest.version = parser.longValue();\n                 } else if (VERSION_TYPE.match(currentFieldName, parser.getDeprecationHandler())) {\n                     termVectorsRequest.versionType = VersionType.fromString(parser.text());\n-                } else if (restApiVersion == RestApiVersion.V_7 && TYPE.match(currentFieldName, parser.getDeprecationHandler())) {\n-                    deprecationLogger.compatibleCritical(\"termvectors_with_types\", RestTermVectorsAction.TYPES_DEPRECATION_MESSAGE);\n                 } else {\n-                    throw new ElasticsearchParseException(\"failed to parse term vectors request. unknown field [{}]\", currentFieldName);\n+                    @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS)\n+                    var apiVersion = restApiVersion;\n+                    if (apiVersion == RestApiVersion.V_7 && TYPE.match(currentFieldName, parser.getDeprecationHandler())) {\n+                        deprecationLogger.compatibleCritical(\"termvectors_with_types\", RestTermVectorsAction.TYPES_DEPRECATION_MESSAGE);\n+                    } else {\n+                        throw new ElasticsearchParseException(\"failed to parse term vectors request. unknown field [{}]\", currentFieldName);\n+                    }\n                 }\n-            }\n         }\n         if (fields.size() > 0) {\n             String[] fieldsAsArray = new String[fields.size()];\ndiff --git a/server/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java b/server/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java\nindex 263c6bd3..8e0f1d87 100644\n--- a/server/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java\n+++ b/server/src/main/java/org/elasticsearch/index/query/CommonTermsQueryBuilder.java\n@@ -16,6 +16,7 @@ import org.elasticsearch.common.ParsingException;\n import org.elasticsearch.common.io.stream.StreamOutput;\n import org.elasticsearch.common.logging.DeprecationLogger;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.xcontent.ParseField;\n import org.elasticsearch.xcontent.XContentBuilder;\n import org.elasticsearch.xcontent.XContentParser;\n@@ -27,6 +28,7 @@ public class CommonTermsQueryBuilder extends AbstractQueryBuilder<CommonTermsQue\n     public static final String COMMON_TERMS_QUERY_DEPRECATION_MSG = \"Common Terms Query usage is not supported. \"\n         + \"Use [match] query which can efficiently skip blocks of documents if the total number of hits is not tracked.\";\n \n+    @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_RELEVANCE)\n     public static ParseField NAME_V7 = new ParseField(\"common\").withAllDeprecated(COMMON_TERMS_QUERY_DEPRECATION_MSG)\n         .forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\n \ndiff --git a/server/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilder.java b/server/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilder.java\nindex 22cc68fb..5c025ab4 100644\n--- a/server/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilder.java\n+++ b/server/src/main/java/org/elasticsearch/index/query/GeoBoundingBoxQueryBuilder.java\n@@ -25,6 +25,7 @@ import org.elasticsearch.common.io.stream.StreamInput;\n import org.elasticsearch.common.io.stream.StreamOutput;\n import org.elasticsearch.common.logging.DeprecationLogger;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.geometry.Rectangle;\n import org.elasticsearch.geometry.utils.Geohash;\n import org.elasticsearch.index.mapper.GeoShapeQueryable;\n@@ -55,6 +56,7 @@ public class GeoBoundingBoxQueryBuilder extends AbstractQueryBuilder<GeoBounding\n      */\n     public static final boolean DEFAULT_IGNORE_UNMAPPED = false;\n \n+    @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS)\n     private static final ParseField TYPE_FIELD = new ParseField(\"type\").forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\n     private static final ParseField VALIDATION_METHOD_FIELD = new ParseField(\"validation_method\");\n     private static final ParseField IGNORE_UNMAPPED_FIELD = new ParseField(\"ignore_unmapped\");\ndiff --git a/server/src/main/java/org/elasticsearch/index/query/MatchQueryBuilder.java b/server/src/main/java/org/elasticsearch/index/query/MatchQueryBuilder.java\nindex d72b755e..432fdf31 100644\n--- a/server/src/main/java/org/elasticsearch/index/query/MatchQueryBuilder.java\n+++ b/server/src/main/java/org/elasticsearch/index/query/MatchQueryBuilder.java\n@@ -21,6 +21,7 @@ import org.elasticsearch.common.lucene.search.Queries;\n import org.elasticsearch.common.unit.Fuzziness;\n import org.elasticsearch.common.xcontent.LoggingDeprecationHandler;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.index.analysis.NamedAnalyzer;\n import org.elasticsearch.index.mapper.MappedFieldType;\n import org.elasticsearch.index.query.support.QueryParsers;\n@@ -39,6 +40,7 @@ import java.util.Objects;\n public class MatchQueryBuilder extends AbstractQueryBuilder<MatchQueryBuilder> {\n     private static final String CUTOFF_FREQUENCY_DEPRECATION_MSG = \"cutoff_freqency is not supported. \"\n         + \"The [match] query can skip block of documents efficiently if the total number of hits is not tracked\";\n+    @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_RELEVANCE)\n     public static final ParseField CUTOFF_FREQUENCY_FIELD = new ParseField(\"cutoff_frequency\").withAllDeprecated(\n         CUTOFF_FREQUENCY_DEPRECATION_MSG\n     ).forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\ndiff --git a/server/src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java b/server/src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java\nindex a83fb8d1..aee0f698 100644\n--- a/server/src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java\n+++ b/server/src/main/java/org/elasticsearch/index/query/MultiMatchQueryBuilder.java\n@@ -22,6 +22,7 @@ import org.elasticsearch.common.io.stream.Writeable;\n import org.elasticsearch.common.unit.Fuzziness;\n import org.elasticsearch.common.xcontent.LoggingDeprecationHandler;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.index.query.support.QueryParsers;\n import org.elasticsearch.index.search.MatchQueryParser;\n import org.elasticsearch.index.search.MultiMatchQueryParser;\n@@ -47,6 +48,7 @@ public final class MultiMatchQueryBuilder extends AbstractQueryBuilder<MultiMatc\n     public static final String NAME = \"multi_match\";\n     private static final String CUTOFF_FREQUENCY_DEPRECATION_MSG = \"cutoff_freqency is not supported.\"\n         + \" The [multi_match] query can skip block of documents efficiently if the total number of hits is not tracked\";\n+    @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_RELEVANCE)\n     private static final ParseField CUTOFF_FREQUENCY_FIELD = new ParseField(\"cutoff_frequency\").withAllDeprecated(\n         CUTOFF_FREQUENCY_DEPRECATION_MSG\n     ).forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\ndiff --git a/server/src/main/java/org/elasticsearch/index/query/TypeQueryV7Builder.java b/server/src/main/java/org/elasticsearch/index/query/TypeQueryV7Builder.java\nindex f707684c..d01469fe 100644\n--- a/server/src/main/java/org/elasticsearch/index/query/TypeQueryV7Builder.java\n+++ b/server/src/main/java/org/elasticsearch/index/query/TypeQueryV7Builder.java\n@@ -18,6 +18,7 @@ import org.elasticsearch.common.io.stream.StreamInput;\n import org.elasticsearch.common.io.stream.StreamOutput;\n import org.elasticsearch.common.logging.DeprecationLogger;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.index.mapper.MapperService;\n import org.elasticsearch.xcontent.ObjectParser;\n import org.elasticsearch.xcontent.ParseField;\n@@ -32,20 +33,27 @@ public class TypeQueryV7Builder extends AbstractQueryBuilder<TypeQueryV7Builder>\n         + \"prefer to filter on a field instead.\";\n \n     private static final String NAME = \"type\";\n+    @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS)\n     public static final ParseField NAME_V7 = new ParseField(NAME).forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\n     private static final ParseField VALUE_FIELD = new ParseField(\"value\");\n     private static final ObjectParser<TypeQueryV7Builder, Void> PARSER = new ObjectParser<>(NAME, TypeQueryV7Builder::new);\n \n     static {\n+        @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS)\n+        var nameFieldV7 = AbstractQueryBuilder.NAME_FIELD.forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\n         PARSER.declareString(\n             QueryBuilder::queryName,\n-            AbstractQueryBuilder.NAME_FIELD.forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7))\n+            nameFieldV7\n         );\n+        @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS)\n+        var boostFieldV7 = AbstractQueryBuilder.BOOST_FIELD.forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\n         PARSER.declareFloat(\n             QueryBuilder::boost,\n-            AbstractQueryBuilder.BOOST_FIELD.forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7))\n+            boostFieldV7\n         );\n-        PARSER.declareString(TypeQueryV7Builder::setValue, VALUE_FIELD.forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7)));\n+        @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS)\n+        var valueFieldV7 = VALUE_FIELD.forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\n+        PARSER.declareString(TypeQueryV7Builder::setValue, valueFieldV7);\n     }\n \n     private String value;\ndiff --git a/server/src/main/java/org/elasticsearch/index/reindex/ReindexRequest.java b/server/src/main/java/org/elasticsearch/index/reindex/ReindexRequest.java\nindex b7ec486d..ba95d098 100644\n--- a/server/src/main/java/org/elasticsearch/index/reindex/ReindexRequest.java\n+++ b/server/src/main/java/org/elasticsearch/index/reindex/ReindexRequest.java\n@@ -22,6 +22,7 @@ import org.elasticsearch.common.settings.SecureString;\n import org.elasticsearch.common.xcontent.XContentHelper;\n import org.elasticsearch.core.RestApiVersion;\n import org.elasticsearch.core.TimeValue;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.features.NodeFeature;\n import org.elasticsearch.index.VersionType;\n import org.elasticsearch.index.query.QueryBuilder;\n@@ -354,9 +355,11 @@ public class ReindexRequest extends AbstractBulkIndexByScrollRequest<ReindexRequ\n             ObjectParser.ValueType.OBJECT\n         );\n \n+        @UpdateForV9(owner = UpdateForV9.Owner.DATA_MANAGEMENT)\n+        var maxDocsFieldV7 = new ParseField(\"max_docs\", \"size\").forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\n         PARSER.declareInt(\n             ReindexRequest::setMaxDocsValidateIdentical,\n-            new ParseField(\"max_docs\", \"size\").forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7))\n+            maxDocsFieldV7\n         );\n \n         PARSER.declareInt(\ndiff --git a/server/src/main/java/org/elasticsearch/indices/TermsLookup.java b/server/src/main/java/org/elasticsearch/indices/TermsLookup.java\nindex b1c74c60..8e541223 100644\n--- a/server/src/main/java/org/elasticsearch/indices/TermsLookup.java\n+++ b/server/src/main/java/org/elasticsearch/indices/TermsLookup.java\n@@ -14,6 +14,7 @@ import org.elasticsearch.common.io.stream.StreamInput;\n import org.elasticsearch.common.io.stream.StreamOutput;\n import org.elasticsearch.common.io.stream.Writeable;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.index.mapper.MapperService;\n import org.elasticsearch.index.query.TermsQueryBuilder;\n import org.elasticsearch.xcontent.ConstructingObjectParser;\n@@ -109,7 +110,9 @@ public class TermsLookup implements Writeable, ToXContentFragment {\n         PARSER.declareString(constructorArg(), new ParseField(\"id\"));\n         PARSER.declareString(constructorArg(), new ParseField(\"path\"));\n         PARSER.declareString(TermsLookup::routing, new ParseField(\"routing\"));\n-        PARSER.declareString((termLookup, type) -> {}, new ParseField(\"type\").forRestApiVersion(equalTo(RestApiVersion.V_7)));\n+        @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS)\n+        var typeField = new ParseField(\"type\").forRestApiVersion(equalTo(RestApiVersion.V_7));\n+        PARSER.declareString((termLookup, type) -> {}, typeField);\n     }\n \n     public static TermsLookup parseTermsLookup(XContentParser parser) throws IOException {\ndiff --git a/server/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetAliasesAction.java b/server/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetAliasesAction.java\nindex 79e5c574..34b1c5b1 100644\n--- a/server/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetAliasesAction.java\n+++ b/server/src/main/java/org/elasticsearch/rest/action/admin/indices/RestGetAliasesAction.java\n@@ -214,7 +214,9 @@ public class RestGetAliasesAction extends BaseRestHandler {\n         if (request.hasParam(\"local\")) {\n             // consume this param just for validation\n             final var localParam = request.paramAsBoolean(\"local\", false);\n-            if (request.getRestApiVersion() != RestApiVersion.V_7) {\n+            @UpdateForV9(owner = UpdateForV9.Owner.DATA_MANAGEMENT)\n+            var restApiVersion = request.getRestApiVersion();\n+            if (restApiVersion != RestApiVersion.V_7) {\n                 DEPRECATION_LOGGER.critical(\n                     DeprecationCategory.API,\n                     \"get-aliases-local\",\ndiff --git a/server/src/main/java/org/elasticsearch/rest/action/cat/RestAliasAction.java b/server/src/main/java/org/elasticsearch/rest/action/cat/RestAliasAction.java\nindex 0957821e..eaff4afe 100644\n--- a/server/src/main/java/org/elasticsearch/rest/action/cat/RestAliasAction.java\n+++ b/server/src/main/java/org/elasticsearch/rest/action/cat/RestAliasAction.java\n@@ -18,6 +18,7 @@ import org.elasticsearch.common.Table;\n import org.elasticsearch.common.logging.DeprecationCategory;\n import org.elasticsearch.common.logging.DeprecationLogger;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.rest.RestRequest;\n import org.elasticsearch.rest.RestResponse;\n import org.elasticsearch.rest.Scope;\n@@ -60,7 +61,9 @@ public class RestAliasAction extends AbstractCatAction {\n         if (request.hasParam(\"local\")) {\n             // consume this param just for validation\n             final var localParam = request.paramAsBoolean(\"local\", false);\n-            if (request.getRestApiVersion() != RestApiVersion.V_7) {\n+            @UpdateForV9(owner = UpdateForV9.Owner.DATA_MANAGEMENT)\n+            var restApiVersion = request.getRestApiVersion();\n+            if (restApiVersion != RestApiVersion.V_7) {\n                 DEPRECATION_LOGGER.critical(\n                     DeprecationCategory.API,\n                     \"cat-aliases-local\",\ndiff --git a/server/src/main/java/org/elasticsearch/search/SearchModule.java b/server/src/main/java/org/elasticsearch/search/SearchModule.java\nindex 0bb914a9..bc643296 100644\n--- a/server/src/main/java/org/elasticsearch/search/SearchModule.java\n+++ b/server/src/main/java/org/elasticsearch/search/SearchModule.java\n@@ -687,15 +687,6 @@ public class SearchModule {\n                 .setAggregatorRegistrar(CompositeAggregationBuilder::registerAggregators),\n             builder\n         );\n-        if (RestApiVersion.minimumSupported() == RestApiVersion.V_7) {\n-            registerQuery(\n-                new QuerySpec<>(\n-                    CommonTermsQueryBuilder.NAME_V7,\n-                    (streamInput) -> new CommonTermsQueryBuilder(),\n-                    CommonTermsQueryBuilder::fromXContent\n-                )\n-            );\n-        }\n \n         registerFromPlugin(plugins, SearchPlugin::getAggregations, (agg) -> this.registerAggregation(agg, builder));\n \n@@ -816,15 +807,6 @@ public class SearchModule {\n                 SerialDiffPipelineAggregationBuilder::parse\n             )\n         );\n-        if (RestApiVersion.minimumSupported() == RestApiVersion.V_7) {\n-            registerPipelineAggregation(\n-                new PipelineAggregationSpec(\n-                    MovAvgPipelineAggregationBuilder.NAME_V7,\n-                    MovAvgPipelineAggregationBuilder::new,\n-                    MovAvgPipelineAggregationBuilder.PARSER\n-                )\n-            );\n-        }\n \n         registerFromPlugin(plugins, SearchPlugin::getPipelineAggregations, this::registerPipelineAggregation);\n     }\n@@ -1203,10 +1185,6 @@ public class SearchModule {\n         }));\n \n         registerFromPlugin(plugins, SearchPlugin::getQueries, this::registerQuery);\n-\n-        if (RestApiVersion.minimumSupported() == RestApiVersion.V_7) {\n-            registerQuery(new QuerySpec<>(TypeQueryV7Builder.NAME_V7, TypeQueryV7Builder::new, TypeQueryV7Builder::fromXContent));\n-        }\n     }\n \n     private void registerIntervalsSourceProviders() {\ndiff --git a/server/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateIntervalWrapper.java b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateIntervalWrapper.java\nindex 6f03f9e5..f551dfbe 100644\n--- a/server/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateIntervalWrapper.java\n+++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateIntervalWrapper.java\n@@ -19,6 +19,7 @@ import org.elasticsearch.common.logging.DeprecationCategory;\n import org.elasticsearch.common.logging.DeprecationLogger;\n import org.elasticsearch.core.RestApiVersion;\n import org.elasticsearch.core.TimeValue;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.xcontent.ObjectParser;\n import org.elasticsearch.xcontent.ParseField;\n import org.elasticsearch.xcontent.ToXContentFragment;\n@@ -95,6 +96,8 @@ public class DateIntervalWrapper implements ToXContentFragment, Writeable {\n          REST version compatibility.  When in V_7 compatibility mode, continue to parse the old style interval parameter,\n          but immediately adapt it into either fixed or calendar interval.\n          */\n+        @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_ANALYTICS)\n+        var intervalFieldV7 = Histogram.INTERVAL_FIELD.forRestApiVersion(equalTo(RestApiVersion.V_7));\n         parser.declareField((wrapper, interval) -> {\n             DEPRECATION_LOGGER.warn(DeprecationCategory.AGGREGATIONS, \"date-interval-getter\", DEPRECATION_TEXT);\n             if (interval instanceof Long) {\n@@ -112,7 +115,7 @@ public class DateIntervalWrapper implements ToXContentFragment, Writeable {\n             } else {\n                 return new DateHistogramInterval(p.text());\n             }\n-        }, Histogram.INTERVAL_FIELD.forRestApiVersion(equalTo(RestApiVersion.V_7)), ObjectParser.ValueType.LONG);\n+        }, intervalFieldV7, ObjectParser.ValueType.LONG);\n \n         parser.declareField(\n             DateIntervalConsumer::calendarInterval,\ndiff --git a/server/src/main/java/org/elasticsearch/search/aggregations/pipeline/MovAvgPipelineAggregationBuilder.java b/server/src/main/java/org/elasticsearch/search/aggregations/pipeline/MovAvgPipelineAggregationBuilder.java\nindex 06848731..ed33e820 100644\n--- a/server/src/main/java/org/elasticsearch/search/aggregations/pipeline/MovAvgPipelineAggregationBuilder.java\n+++ b/server/src/main/java/org/elasticsearch/search/aggregations/pipeline/MovAvgPipelineAggregationBuilder.java\n@@ -40,6 +40,7 @@ public class MovAvgPipelineAggregationBuilder extends AbstractPipelineAggregatio\n     public static final String MOVING_AVG_AGG_DEPRECATION_MSG = \"Moving Average aggregation usage is not supported. \"\n         + \"Use the [moving_fn] aggregation instead.\";\n \n+    @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_ANALYTICS)\n     public static final ParseField NAME_V7 = new ParseField(\"moving_avg\").withAllDeprecated(MOVING_AVG_AGG_DEPRECATION_MSG)\n         .forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\n \ndiff --git a/server/src/main/java/org/elasticsearch/search/fetch/subphase/FieldAndFormat.java b/server/src/main/java/org/elasticsearch/search/fetch/subphase/FieldAndFormat.java\nindex 719729f6..9cea8111 100644\n--- a/server/src/main/java/org/elasticsearch/search/fetch/subphase/FieldAndFormat.java\n+++ b/server/src/main/java/org/elasticsearch/search/fetch/subphase/FieldAndFormat.java\n@@ -16,6 +16,7 @@ import org.elasticsearch.common.logging.DeprecationLogger;\n import org.elasticsearch.core.CheckedFunction;\n import org.elasticsearch.core.Nullable;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.xcontent.ConstructingObjectParser;\n import org.elasticsearch.xcontent.ObjectParser;\n import org.elasticsearch.xcontent.ParseField;\n@@ -53,10 +54,12 @@ public final class FieldAndFormat implements Writeable, ToXContentObject {\n             ConstructingObjectParser.optionalConstructorArg(),\n             FORMAT_FIELD.forRestApiVersion(onOrAfter(RestApiVersion.V_8))\n         );\n+        @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS)\n+        var formatFieldV7 = FORMAT_FIELD.forRestApiVersion(equalTo(RestApiVersion.V_7));\n         PARSER.declareField(\n             ConstructingObjectParser.optionalConstructorArg(),\n             ignoreUseFieldMappingStringParser(),\n-            FORMAT_FIELD.forRestApiVersion(equalTo(RestApiVersion.V_7)),\n+            formatFieldV7,\n             ObjectParser.ValueType.STRING_OR_NULL\n         );\n         PARSER.declareBoolean(ConstructingObjectParser.optionalConstructorArg(), INCLUDE_UNMAPPED_FIELD);\ndiff --git a/server/src/main/java/org/elasticsearch/search/sort/SortBuilder.java b/server/src/main/java/org/elasticsearch/search/sort/SortBuilder.java\nindex 9f943e63..173971a0 100644\n--- a/server/src/main/java/org/elasticsearch/search/sort/SortBuilder.java\n+++ b/server/src/main/java/org/elasticsearch/search/sort/SortBuilder.java\n@@ -19,6 +19,7 @@ import org.elasticsearch.common.io.stream.VersionedNamedWriteable;\n import org.elasticsearch.common.lucene.search.Queries;\n import org.elasticsearch.common.util.BigArrays;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.index.fielddata.IndexFieldData.XFieldComparatorSource.Nested;\n import org.elasticsearch.index.mapper.NestedObjectMapper;\n import org.elasticsearch.index.query.QueryBuilder;\n@@ -50,8 +51,10 @@ public abstract class SortBuilder<T extends SortBuilder<T>>\n \n     // parse fields common to more than one SortBuilder\n     public static final ParseField ORDER_FIELD = new ParseField(\"order\");\n+    @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS)\n     public static final ParseField NESTED_FILTER_FIELD = new ParseField(\"nested_filter\").withAllDeprecated()\n         .forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\n+    @UpdateForV9(owner = UpdateForV9.Owner.SEARCH_FOUNDATIONS)\n     public static final ParseField NESTED_PATH_FIELD = new ParseField(\"nested_path\").withAllDeprecated()\n         .forRestApiVersion(RestApiVersion.equalTo(RestApiVersion.V_7));\n \ndiff --git a/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/CloseJobAction.java b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/CloseJobAction.java\nindex ca815099..a1fc8f5d 100644\n--- a/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/CloseJobAction.java\n+++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/CloseJobAction.java\n@@ -14,6 +14,7 @@ import org.elasticsearch.common.io.stream.StreamOutput;\n import org.elasticsearch.common.io.stream.Writeable;\n import org.elasticsearch.core.RestApiVersion;\n import org.elasticsearch.core.TimeValue;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.tasks.Task;\n import org.elasticsearch.xcontent.ObjectParser;\n import org.elasticsearch.xcontent.ParseField;\n@@ -44,6 +45,7 @@ public class CloseJobAction extends ActionType<CloseJobAction.Response> {\n         public static final ParseField TIMEOUT = new ParseField(\"timeout\");\n         public static final ParseField FORCE = new ParseField(\"force\");\n         public static final ParseField ALLOW_NO_MATCH = new ParseField(\"allow_no_match\").forRestApiVersion(onOrAfter(RestApiVersion.V_8));\n+        @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING)\n         public static final ParseField ALLOW_NO_MATCH_V7 = new ParseField(\"allow_no_match\", DEPRECATED_ALLOW_NO_JOBS_PARAM)\n             .forRestApiVersion(equalTo(RestApiVersion.V_7));\n         public static final ObjectParser<Request, Void> PARSER = new ObjectParser<>(NAME, Request::new);\ndiff --git a/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/GetOverallBucketsAction.java b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/GetOverallBucketsAction.java\nindex 12c8696a..8394c12b 100644\n--- a/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/GetOverallBucketsAction.java\n+++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/GetOverallBucketsAction.java\n@@ -15,6 +15,7 @@ import org.elasticsearch.common.io.stream.StreamOutput;\n import org.elasticsearch.common.time.DateMathParser;\n import org.elasticsearch.core.RestApiVersion;\n import org.elasticsearch.core.TimeValue;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.index.mapper.DateFieldMapper;\n import org.elasticsearch.xcontent.ObjectParser;\n import org.elasticsearch.xcontent.ParseField;\n@@ -68,6 +69,7 @@ public class GetOverallBucketsAction extends ActionType<GetOverallBucketsAction.\n         public static final ParseField START = new ParseField(\"start\");\n         public static final ParseField END = new ParseField(\"end\");\n         public static final ParseField ALLOW_NO_MATCH = new ParseField(\"allow_no_match\").forRestApiVersion(onOrAfter(RestApiVersion.V_8));\n+        @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING)\n         public static final ParseField ALLOW_NO_MATCH_V7 = new ParseField(\"allow_no_match\", DEPRECATED_ALLOW_NO_JOBS_PARAM)\n             .forRestApiVersion(equalTo(RestApiVersion.V_7));\n \ndiff --git a/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/StopDatafeedAction.java b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/StopDatafeedAction.java\nindex cb89cfa8..dcc0c0b7 100644\n--- a/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/StopDatafeedAction.java\n+++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/action/StopDatafeedAction.java\n@@ -15,6 +15,7 @@ import org.elasticsearch.common.io.stream.StreamOutput;\n import org.elasticsearch.common.io.stream.Writeable;\n import org.elasticsearch.core.RestApiVersion;\n import org.elasticsearch.core.TimeValue;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.tasks.Task;\n import org.elasticsearch.xcontent.ObjectParser;\n import org.elasticsearch.xcontent.ParseField;\n@@ -47,6 +48,7 @@ public class StopDatafeedAction extends ActionType<StopDatafeedAction.Response>\n         public static final ParseField TIMEOUT = new ParseField(\"timeout\");\n         public static final ParseField FORCE = new ParseField(\"force\");\n         public static final ParseField ALLOW_NO_MATCH = new ParseField(\"allow_no_match\").forRestApiVersion(onOrAfter(RestApiVersion.V_8));\n+        @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING)\n         public static final ParseField ALLOW_NO_MATCH_V7 = new ParseField(\"allow_no_match\", DEPRECATED_ALLOW_NO_DATAFEEDS_PARAM)\n             .forRestApiVersion(equalTo(RestApiVersion.V_7));\n \ndiff --git a/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/inference/TrainedModelConfig.java b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/inference/TrainedModelConfig.java\nindex 5ae19f6d..0acb4152 100644\n--- a/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/inference/TrainedModelConfig.java\n+++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/ml/inference/TrainedModelConfig.java\n@@ -18,6 +18,7 @@ import org.elasticsearch.common.io.stream.Writeable;\n import org.elasticsearch.common.unit.ByteSizeValue;\n import org.elasticsearch.core.Nullable;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.license.License;\n import org.elasticsearch.xcontent.NamedXContentRegistry;\n import org.elasticsearch.xcontent.ObjectParser;\n@@ -515,8 +516,10 @@ public class TrainedModelConfig implements ToXContentObject, Writeable {\n                 createTime.toEpochMilli()\n             );\n             // If we are NOT storing the model, we should return the deprecated field name\n+            @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING)\n+            var apiVersion = builder.getRestApiVersion();\n             if (params.paramAsBoolean(ToXContentParams.FOR_INTERNAL_STORAGE, false) == false\n-                && builder.getRestApiVersion().matches(RestApiVersion.equalTo(RestApiVersion.V_7))) {\n+                && apiVersion.matches(RestApiVersion.equalTo(RestApiVersion.V_7))) {\n                 builder.humanReadableField(\n                     DEPRECATED_ESTIMATED_HEAP_MEMORY_USAGE_BYTES.getPreferredName(),\n                     ESTIMATED_HEAP_MEMORY_USAGE_HUMAN,\ndiff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/cat/RestCatDatafeedsAction.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/cat/RestCatDatafeedsAction.java\nindex b93089ea..8b2844a9 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/cat/RestCatDatafeedsAction.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/cat/RestCatDatafeedsAction.java\n@@ -12,6 +12,7 @@ import org.elasticsearch.common.Strings;\n import org.elasticsearch.common.Table;\n import org.elasticsearch.core.RestApiVersion;\n import org.elasticsearch.core.TimeValue;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.rest.RestRequest;\n import org.elasticsearch.rest.RestResponse;\n import org.elasticsearch.rest.Scope;\n@@ -52,10 +53,12 @@ public class RestCatDatafeedsAction extends AbstractCatAction {\n             datafeedId = GetDatafeedsStatsAction.ALL;\n         }\n         Request request = new Request(datafeedId);\n+        @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING)\n+        var restApiVersion = RestApiVersion.V_7;\n         checkAndSetDeprecatedParam(\n             DEPRECATED_ALLOW_NO_DATAFEEDS_PARAM,\n             Request.ALLOW_NO_MATCH,\n-            RestApiVersion.V_7,\n+            restApiVersion,\n             restRequest,\n             (r, s) -> r.paramAsBoolean(s, request.allowNoMatch()),\n             request::setAllowNoMatch\ndiff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/cat/RestCatJobsAction.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/cat/RestCatJobsAction.java\nindex cb02990d..a0c7bccc 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/cat/RestCatJobsAction.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/cat/RestCatJobsAction.java\n@@ -14,6 +14,7 @@ import org.elasticsearch.common.Table;\n import org.elasticsearch.common.unit.ByteSizeValue;\n import org.elasticsearch.core.RestApiVersion;\n import org.elasticsearch.core.TimeValue;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.rest.RestRequest;\n import org.elasticsearch.rest.RestResponse;\n import org.elasticsearch.rest.Scope;\n@@ -57,10 +58,12 @@ public class RestCatJobsAction extends AbstractCatAction {\n             jobId = Metadata.ALL;\n         }\n         Request request = new Request(jobId);\n+        @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING)\n+        var restApiVersion = RestApiVersion.V_7;\n         checkAndSetDeprecatedParam(\n             DEPRECATED_ALLOW_NO_JOBS_PARAM,\n             Request.ALLOW_NO_MATCH,\n-            RestApiVersion.V_7,\n+            restApiVersion,\n             restRequest,\n             (r, s) -> r.paramAsBoolean(s, request.allowNoMatch()),\n             request::setAllowNoMatch\ndiff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestGetDatafeedStatsAction.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestGetDatafeedStatsAction.java\nindex eb930edf..bb2c91f9 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestGetDatafeedStatsAction.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestGetDatafeedStatsAction.java\n@@ -9,6 +9,7 @@ package org.elasticsearch.xpack.ml.rest.datafeeds;\n import org.elasticsearch.client.internal.node.NodeClient;\n import org.elasticsearch.common.Strings;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.rest.BaseRestHandler;\n import org.elasticsearch.rest.RestRequest;\n import org.elasticsearch.rest.Scope;\n@@ -48,10 +49,12 @@ public class RestGetDatafeedStatsAction extends BaseRestHandler {\n             datafeedId = GetDatafeedsStatsAction.ALL;\n         }\n         Request request = new Request(datafeedId);\n+        @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING)\n+        var restApiVersion = RestApiVersion.V_7;\n         checkAndSetDeprecatedParam(\n             DEPRECATED_ALLOW_NO_DATAFEEDS_PARAM,\n             Request.ALLOW_NO_MATCH,\n-            RestApiVersion.V_7,\n+            restApiVersion,\n             restRequest,\n             (r, s) -> r.paramAsBoolean(s, request.allowNoMatch()),\n             request::setAllowNoMatch\ndiff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestGetDatafeedsAction.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestGetDatafeedsAction.java\nindex 6b3a857c..b834696e 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestGetDatafeedsAction.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestGetDatafeedsAction.java\n@@ -8,6 +8,7 @@ package org.elasticsearch.xpack.ml.rest.datafeeds;\n \n import org.elasticsearch.client.internal.node.NodeClient;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.rest.BaseRestHandler;\n import org.elasticsearch.rest.RestRequest;\n import org.elasticsearch.rest.Scope;\n@@ -51,10 +52,12 @@ public class RestGetDatafeedsAction extends BaseRestHandler {\n             datafeedId = GetDatafeedsAction.ALL;\n         }\n         Request request = new Request(datafeedId);\n+        @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING)\n+        var restApiVersion = RestApiVersion.V_7;\n         checkAndSetDeprecatedParam(\n             DEPRECATED_ALLOW_NO_DATAFEEDS_PARAM,\n             GetDatafeedsStatsAction.Request.ALLOW_NO_MATCH,\n-            RestApiVersion.V_7,\n+            restApiVersion,\n             restRequest,\n             (r, s) -> r.paramAsBoolean(s, request.allowNoMatch()),\n             request::setAllowNoMatch\ndiff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestStopDatafeedAction.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestStopDatafeedAction.java\nindex bdbdc18a..40a1d9f2 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestStopDatafeedAction.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/datafeeds/RestStopDatafeedAction.java\n@@ -9,6 +9,7 @@ package org.elasticsearch.xpack.ml.rest.datafeeds;\n import org.elasticsearch.client.internal.node.NodeClient;\n import org.elasticsearch.core.RestApiVersion;\n import org.elasticsearch.core.TimeValue;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.rest.BaseRestHandler;\n import org.elasticsearch.rest.RestRequest;\n import org.elasticsearch.rest.RestResponse;\n@@ -61,10 +62,12 @@ public class RestStopDatafeedAction extends BaseRestHandler {\n             if (restRequest.hasParam(Request.FORCE.getPreferredName())) {\n                 request.setForce(restRequest.paramAsBoolean(Request.FORCE.getPreferredName(), request.isForce()));\n             }\n+            @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING)\n+            var restApiVersion = RestApiVersion.V_7;\n             checkAndSetDeprecatedParam(\n                 DEPRECATED_ALLOW_NO_DATAFEEDS_PARAM,\n                 Request.ALLOW_NO_MATCH.getPreferredName(),\n-                RestApiVersion.V_7,\n+                restApiVersion,\n                 restRequest,\n                 (r, s) -> r.paramAsBoolean(s, request.allowNoMatch()),\n                 request::setAllowNoMatch\ndiff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestCloseJobAction.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestCloseJobAction.java\nindex 0986a6a2..f22a248e 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestCloseJobAction.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestCloseJobAction.java\n@@ -9,6 +9,7 @@ package org.elasticsearch.xpack.ml.rest.job;\n import org.elasticsearch.client.internal.node.NodeClient;\n import org.elasticsearch.core.RestApiVersion;\n import org.elasticsearch.core.TimeValue;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.rest.BaseRestHandler;\n import org.elasticsearch.rest.RestRequest;\n import org.elasticsearch.rest.Scope;\n@@ -55,10 +56,12 @@ public class RestCloseJobAction extends BaseRestHandler {\n             if (restRequest.hasParam(Request.FORCE.getPreferredName())) {\n                 request.setForce(restRequest.paramAsBoolean(Request.FORCE.getPreferredName(), request.isForce()));\n             }\n+            @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING)\n+            var restApiVersion = RestApiVersion.V_7;\n             checkAndSetDeprecatedParam(\n                 DEPRECATED_ALLOW_NO_JOBS_PARAM,\n                 Request.ALLOW_NO_MATCH.getPreferredName(),\n-                RestApiVersion.V_7,\n+                restApiVersion,\n                 restRequest,\n                 (r, s) -> r.paramAsBoolean(s, request.allowNoMatch()),\n                 request::setAllowNoMatch\ndiff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestGetJobStatsAction.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestGetJobStatsAction.java\nindex 1ecc0ff0..62c905c8 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestGetJobStatsAction.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestGetJobStatsAction.java\n@@ -10,6 +10,7 @@ import org.elasticsearch.client.internal.node.NodeClient;\n import org.elasticsearch.cluster.metadata.Metadata;\n import org.elasticsearch.common.Strings;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.rest.BaseRestHandler;\n import org.elasticsearch.rest.RestRequest;\n import org.elasticsearch.rest.Scope;\n@@ -52,10 +53,12 @@ public class RestGetJobStatsAction extends BaseRestHandler {\n             jobId = Metadata.ALL;\n         }\n         Request request = new Request(jobId);\n+        @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING)\n+        var restApiVersion = RestApiVersion.V_7;\n         checkAndSetDeprecatedParam(\n             DEPRECATED_ALLOW_NO_JOBS_PARAM,\n             Request.ALLOW_NO_MATCH,\n-            RestApiVersion.V_7,\n+            restApiVersion,\n             restRequest,\n             (r, s) -> r.paramAsBoolean(s, request.allowNoMatch()),\n             request::setAllowNoMatch\ndiff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestGetJobsAction.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestGetJobsAction.java\nindex e6f43250..82c6cabb 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestGetJobsAction.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/job/RestGetJobsAction.java\n@@ -10,6 +10,7 @@ import org.elasticsearch.client.internal.node.NodeClient;\n import org.elasticsearch.cluster.metadata.Metadata;\n import org.elasticsearch.common.Strings;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.rest.BaseRestHandler;\n import org.elasticsearch.rest.RestRequest;\n import org.elasticsearch.rest.Scope;\n@@ -52,10 +53,12 @@ public class RestGetJobsAction extends BaseRestHandler {\n             jobId = Metadata.ALL;\n         }\n         Request request = new Request(jobId);\n+        @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING)\n+        var restApiVersion = RestApiVersion.V_7;\n         checkAndSetDeprecatedParam(\n             DEPRECATED_ALLOW_NO_JOBS_PARAM,\n             Request.ALLOW_NO_MATCH,\n-            RestApiVersion.V_7,\n+            restApiVersion,\n             restRequest,\n             (r, s) -> r.paramAsBoolean(s, request.allowNoMatch()),\n             request::setAllowNoMatch\ndiff --git a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/results/RestGetOverallBucketsAction.java b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/results/RestGetOverallBucketsAction.java\nindex e73e5b32..a45b24c3 100644\n--- a/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/results/RestGetOverallBucketsAction.java\n+++ b/x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/rest/results/RestGetOverallBucketsAction.java\n@@ -8,6 +8,7 @@ package org.elasticsearch.xpack.ml.rest.results;\n \n import org.elasticsearch.client.internal.node.NodeClient;\n import org.elasticsearch.core.RestApiVersion;\n+import org.elasticsearch.core.UpdateForV9;\n import org.elasticsearch.rest.BaseRestHandler;\n import org.elasticsearch.rest.RestRequest;\n import org.elasticsearch.rest.Scope;\n@@ -65,10 +66,12 @@ public class RestGetOverallBucketsAction extends BaseRestHandler {\n             if (restRequest.hasParam(Request.END.getPreferredName())) {\n                 request.setEnd(restRequest.param(Request.END.getPreferredName()));\n             }\n+            @UpdateForV9(owner = UpdateForV9.Owner.MACHINE_LEARNING)\n+            var restApiVersion = RestApiVersion.V_7;\n             checkAndSetDeprecatedParam(\n                 DEPRECATED_ALLOW_NO_JOBS_PARAM,\n                 Request.ALLOW_NO_MATCH.getPreferredName(),\n-                RestApiVersion.V_7,\n+                restApiVersion,\n                 restRequest,\n                 (r, s) -> r.paramAsBoolean(s, request.allowNoMatch()),\n                 request::setAllowNoMatch",
  "logs_path": "auggie/sonnet4.5/a9463435/elastic_elasticsearch_pr114881/logs.jsonl",
  "errors": [],
  "edit_run_id": "a9463435",
  "test_label": "v0"
}