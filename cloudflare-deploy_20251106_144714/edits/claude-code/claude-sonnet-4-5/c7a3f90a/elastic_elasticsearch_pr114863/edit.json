{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 114863,
  "base_commit": "4fa8485a26d5d57e52117ae8d9f89491853703d9",
  "runner": "claude-code",
  "model": "claude-sonnet-4-5",
  "timeout_s": 1200,
  "status": "success",
  "elapsed_ms": 259012,
  "patch_unified": "diff --git a/x-pack/plugin/esql-core/src/main/java/org/elasticsearch/xpack/esql/core/type/DataType.java b/x-pack/plugin/esql-core/src/main/java/org/elasticsearch/xpack/esql/core/type/DataType.java\nindex b23703c6..f2f3bec6 100644\n--- a/x-pack/plugin/esql-core/src/main/java/org/elasticsearch/xpack/esql/core/type/DataType.java\n+++ b/x-pack/plugin/esql-core/src/main/java/org/elasticsearch/xpack/esql/core/type/DataType.java\n@@ -24,6 +24,7 @@ import java.util.Arrays;\n import java.util.Collection;\n import java.util.Collections;\n import java.util.Comparator;\n+import java.util.List;\n import java.util.Locale;\n import java.util.Map;\n import java.util.Optional;\n@@ -292,6 +293,10 @@ public enum DataType {\n         return TYPES;\n     }\n \n+    public static List<DataType> stringTypes() {\n+        return TYPES.stream().filter(DataType::isString).toList();\n+    }\n+\n     /**\n      * Resolve a type from a name. This name is sometimes user supplied,\n      * like in the case of {@code ::<typename>} and is sometimes the name\ndiff --git a/x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/expression/function/aggregate/CountDistinct.java b/x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/expression/function/aggregate/CountDistinct.java\nindex 2550e5bd..756000df 100644\n--- a/x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/expression/function/aggregate/CountDistinct.java\n+++ b/x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/expression/function/aggregate/CountDistinct.java\n@@ -209,7 +209,7 @@ public class CountDistinct extends AggregateFunction implements OptionalArgument\n         if (type == DataType.DOUBLE) {\n             return new CountDistinctDoubleAggregatorFunctionSupplier(inputChannels, precision);\n         }\n-        if (type == DataType.KEYWORD || type == DataType.IP || type == DataType.VERSION || type == DataType.TEXT) {\n+        if (DataType.isString(type) || type == DataType.IP || type == DataType.VERSION) {\n             return new CountDistinctBytesRefAggregatorFunctionSupplier(inputChannels, precision);\n         }\n         throw EsqlIllegalArgumentException.illegalDataType(type);\ndiff --git a/x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/expression/function/aggregate/Max.java b/x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/expression/function/aggregate/Max.java\nindex 47d74c71..6119b2ce 100644\n--- a/x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/expression/function/aggregate/Max.java\n+++ b/x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/expression/function/aggregate/Max.java\n@@ -128,7 +128,7 @@ public class Max extends AggregateFunction implements ToAggregator, SurrogateExp\n         if (type == DataType.IP) {\n             return new MaxIpAggregatorFunctionSupplier(inputChannels);\n         }\n-        if (type == DataType.VERSION || type == DataType.KEYWORD || type == DataType.TEXT) {\n+        if (type == DataType.VERSION || DataType.isString(type)) {\n             return new MaxBytesRefAggregatorFunctionSupplier(inputChannels);\n         }\n         throw EsqlIllegalArgumentException.illegalDataType(type);\ndiff --git a/x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/expression/function/aggregate/Min.java b/x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/expression/function/aggregate/Min.java\nindex ce69decc..a1492f79 100644\n--- a/x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/expression/function/aggregate/Min.java\n+++ b/x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/expression/function/aggregate/Min.java\n@@ -128,7 +128,7 @@ public class Min extends AggregateFunction implements ToAggregator, SurrogateExp\n         if (type == DataType.IP) {\n             return new MinIpAggregatorFunctionSupplier(inputChannels);\n         }\n-        if (type == DataType.VERSION || type == DataType.KEYWORD || type == DataType.TEXT) {\n+        if (type == DataType.VERSION || DataType.isString(type)) {\n             return new MinBytesRefAggregatorFunctionSupplier(inputChannels);\n         }\n         throw EsqlIllegalArgumentException.illegalDataType(type);\ndiff --git a/x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/expression/function/scalar/convert/AbstractConvertFunction.java b/x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/expression/function/scalar/convert/AbstractConvertFunction.java\nindex 5401fcf1..2cae4bb5 100644\n--- a/x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/expression/function/scalar/convert/AbstractConvertFunction.java\n+++ b/x-pack/plugin/esql/src/main/java/org/elasticsearch/xpack/esql/expression/function/scalar/convert/AbstractConvertFunction.java\n@@ -48,7 +48,7 @@ public abstract class AbstractConvertFunction extends UnaryScalarFunction {\n \n     // the numeric types convert functions need to handle; the other numeric types are converted upstream to one of these\n     private static final List<DataType> NUMERIC_TYPES = List.of(DataType.INTEGER, DataType.LONG, DataType.UNSIGNED_LONG, DataType.DOUBLE);\n-    public static final List<DataType> STRING_TYPES = DataType.types().stream().filter(DataType::isString).toList();\n+    public static final List<DataType> STRING_TYPES = DataType.stringTypes();\n \n     protected AbstractConvertFunction(Source source, Expression field) {\n         super(source, field);\ndiff --git a/x-pack/plugin/esql/src/test/java/org/elasticsearch/xpack/esql/expression/function/scalar/string/RLikeTests.java b/x-pack/plugin/esql/src/test/java/org/elasticsearch/xpack/esql/expression/function/scalar/string/RLikeTests.java\nindex 5a34d850..dab2fca2 100644\n--- a/x-pack/plugin/esql/src/test/java/org/elasticsearch/xpack/esql/expression/function/scalar/string/RLikeTests.java\n+++ b/x-pack/plugin/esql/src/test/java/org/elasticsearch/xpack/esql/expression/function/scalar/string/RLikeTests.java\n@@ -69,7 +69,7 @@ public class RLikeTests extends AbstractScalarFunctionTestCase {\n         casesForString(cases, \"6 bytes, 2 code points\", () -> \"❗️\", false, escapeString, optionalPattern);\n         casesForString(cases, \"100 random code points\", () -> randomUnicodeOfCodepointLength(100), true, escapeString, optionalPattern);\n         for (DataType type : DataType.types()) {\n-            if (type == DataType.KEYWORD || type == DataType.TEXT || type == DataType.NULL) {\n+            if (DataType.isString(type) || type == DataType.NULL) {\n                 continue;\n             }\n             if (DataType.isRepresentable(type) == false) {",
  "logs_path": "claude-code/claude-sonnet-4-5/c7a3f90a/elastic_elasticsearch_pr114863/logs.jsonl",
  "errors": [],
  "edit_run_id": "c7a3f90a",
  "test_label": "v0"
}