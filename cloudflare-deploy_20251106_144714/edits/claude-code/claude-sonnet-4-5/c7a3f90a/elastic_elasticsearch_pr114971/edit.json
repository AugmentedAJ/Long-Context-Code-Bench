{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 114971,
  "base_commit": "91e1e02edcd877e7b347156f5f9ef39e62bce211",
  "runner": "claude-code",
  "model": "claude-sonnet-4-5",
  "timeout_s": 1200,
  "status": "success",
  "elapsed_ms": 646077,
  "patch_unified": "diff --git a/server/src/main/java/org/elasticsearch/TransportVersions.java b/server/src/main/java/org/elasticsearch/TransportVersions.java\nindex a504087d..e0267949 100644\n--- a/server/src/main/java/org/elasticsearch/TransportVersions.java\n+++ b/server/src/main/java/org/elasticsearch/TransportVersions.java\n@@ -102,73 +102,7 @@ public class TransportVersions {\n     public static final TransportVersion V_8_13_0 = def(8_595_00_0);\n     public static final TransportVersion V_8_13_4 = def(8_595_00_1);\n     public static final TransportVersion V_8_14_0 = def(8_636_00_1);\n-    // 8.15.0+\n-    public static final TransportVersion WATERMARK_THRESHOLDS_STATS = def(8_637_00_0);\n-    public static final TransportVersion ENRICH_CACHE_ADDITIONAL_STATS = def(8_638_00_0);\n-    public static final TransportVersion ML_INFERENCE_RATE_LIMIT_SETTINGS_ADDED = def(8_639_00_0);\n-    public static final TransportVersion ML_TRAINED_MODEL_CACHE_METADATA_ADDED = def(8_640_00_0);\n-    public static final TransportVersion TOP_LEVEL_KNN_SUPPORT_QUERY_NAME = def(8_641_00_0);\n-    public static final TransportVersion INDEX_SEGMENTS_VECTOR_FORMATS = def(8_642_00_0);\n-    public static final TransportVersion ADD_RESOURCE_ALREADY_UPLOADED_EXCEPTION = def(8_643_00_0);\n-    public static final TransportVersion ESQL_MV_ORDERING_SORTED_ASCENDING = def(8_644_00_0);\n-    public static final TransportVersion ESQL_PAGE_MAPPING_TO_ITERATOR = def(8_645_00_0);\n-    public static final TransportVersion BINARY_PIT_ID = def(8_646_00_0);\n-    public static final TransportVersion SECURITY_ROLE_MAPPINGS_IN_CLUSTER_STATE = def(8_647_00_0);\n-    public static final TransportVersion ESQL_REQUEST_TABLES = def(8_648_00_0);\n-    public static final TransportVersion ROLE_REMOTE_CLUSTER_PRIVS = def(8_649_00_0);\n-    public static final TransportVersion NO_GLOBAL_RETENTION_FOR_SYSTEM_DATA_STREAMS = def(8_650_00_0);\n-    public static final TransportVersion SHUTDOWN_REQUEST_TIMEOUTS_FIX = def(8_651_00_0);\n-    public static final TransportVersion INDEXING_PRESSURE_REQUEST_REJECTIONS_COUNT = def(8_652_00_0);\n-    public static final TransportVersion ROLLUP_USAGE = def(8_653_00_0);\n-    public static final TransportVersion SECURITY_ROLE_DESCRIPTION = def(8_654_00_0);\n-    public static final TransportVersion ML_INFERENCE_AZURE_OPENAI_COMPLETIONS = def(8_655_00_0);\n-    public static final TransportVersion JOIN_STATUS_AGE_SERIALIZATION = def(8_656_00_0);\n-    public static final TransportVersion ML_RERANK_DOC_OPTIONAL = def(8_657_00_0);\n-    public static final TransportVersion FAILURE_STORE_FIELD_PARITY = def(8_658_00_0);\n-    public static final TransportVersion ML_INFERENCE_AZURE_AI_STUDIO = def(8_659_00_0);\n-    public static final TransportVersion ML_INFERENCE_COHERE_COMPLETION_ADDED = def(8_660_00_0);\n-    public static final TransportVersion ESQL_REMOVE_ES_SOURCE_OPTIONS = def(8_661_00_0);\n-    public static final TransportVersion NODE_STATS_INGEST_BYTES = def(8_662_00_0);\n-    public static final TransportVersion SEMANTIC_QUERY = def(8_663_00_0);\n-    public static final TransportVersion GET_AUTOSCALING_CAPACITY_UNUSED_TIMEOUT = def(8_664_00_0);\n-    public static final TransportVersion SIMULATE_VALIDATES_MAPPINGS = def(8_665_00_0);\n-    public static final TransportVersion RULE_QUERY_RENAME = def(8_666_00_0);\n-    public static final TransportVersion SPARSE_VECTOR_QUERY_ADDED = def(8_667_00_0);\n-    public static final TransportVersion ESQL_ADD_INDEX_MODE_TO_SOURCE = def(8_668_00_0);\n-    public static final TransportVersion GET_SHUTDOWN_STATUS_TIMEOUT = def(8_669_00_0);\n-    public static final TransportVersion FAILURE_STORE_TELEMETRY = def(8_670_00_0);\n-    public static final TransportVersion ADD_METADATA_FLATTENED_TO_ROLES = def(8_671_00_0);\n-    public static final TransportVersion ML_INFERENCE_GOOGLE_AI_STUDIO_COMPLETION_ADDED = def(8_672_00_0);\n-    public static final TransportVersion WATCHER_REQUEST_TIMEOUTS = def(8_673_00_0);\n-    public static final TransportVersion ML_INFERENCE_ENHANCE_DELETE_ENDPOINT = def(8_674_00_0);\n-    public static final TransportVersion ML_INFERENCE_GOOGLE_AI_STUDIO_EMBEDDINGS_ADDED = def(8_675_00_0);\n-    public static final TransportVersion ADD_MISTRAL_EMBEDDINGS_INFERENCE = def(8_676_00_0);\n-    public static final TransportVersion ML_CHUNK_INFERENCE_OPTION = def(8_677_00_0);\n-    public static final TransportVersion RANK_FEATURE_PHASE_ADDED = def(8_678_00_0);\n-    public static final TransportVersion RANK_DOC_IN_SHARD_FETCH_REQUEST = def(8_679_00_0);\n-    public static final TransportVersion SECURITY_SETTINGS_REQUEST_TIMEOUTS = def(8_680_00_0);\n-    public static final TransportVersion QUERY_RULE_CRUD_API_PUT = def(8_681_00_0);\n-    public static final TransportVersion DROP_UNUSED_NODES_REQUESTS = def(8_682_00_0);\n-    public static final TransportVersion QUERY_RULE_CRUD_API_GET_DELETE = def(8_683_00_0);\n-    public static final TransportVersion MORE_LIGHTER_NODES_REQUESTS = def(8_684_00_0);\n-    public static final TransportVersion DROP_UNUSED_NODES_IDS = def(8_685_00_0);\n-    public static final TransportVersion DELETE_SNAPSHOTS_ASYNC_ADDED = def(8_686_00_0);\n-    public static final TransportVersion VERSION_SUPPORTING_SPARSE_VECTOR_STATS = def(8_687_00_0);\n-    public static final TransportVersion ML_AD_OUTPUT_MEMORY_ALLOCATOR_FIELD = def(8_688_00_0);\n-    public static final TransportVersion FAILURE_STORE_LAZY_CREATION = def(8_689_00_0);\n-    public static final TransportVersion SNAPSHOT_REQUEST_TIMEOUTS = def(8_690_00_0);\n-    public static final TransportVersion INDEX_METADATA_MAPPINGS_UPDATED_VERSION = def(8_691_00_0);\n-    public static final TransportVersion ML_INFERENCE_ELAND_SETTINGS_ADDED = def(8_692_00_0);\n-    public static final TransportVersion ML_ANTHROPIC_INTEGRATION_ADDED = def(8_693_00_0);\n-    public static final TransportVersion ML_INFERENCE_GOOGLE_VERTEX_AI_EMBEDDINGS_ADDED = def(8_694_00_0);\n-    public static final TransportVersion EVENT_INGESTED_RANGE_IN_CLUSTER_STATE = def(8_695_00_0);\n-    public static final TransportVersion ESQL_ADD_AGGREGATE_TYPE = def(8_696_00_0);\n-    public static final TransportVersion SECURITY_MIGRATIONS_MIGRATION_NEEDED_ADDED = def(8_697_00_0);\n-    public static final TransportVersion K_FOR_KNN_QUERY_ADDED = def(8_698_00_0);\n-    public static final TransportVersion TEXT_SIMILARITY_RERANKER_RETRIEVER = def(8_699_00_0);\n-    public static final TransportVersion ML_INFERENCE_GOOGLE_VERTEX_AI_RERANKING_ADDED = def(8_700_00_0);\n-    public static final TransportVersion VERSIONED_MASTER_NODE_REQUESTS = def(8_701_00_0);\n-    public static final TransportVersion ML_INFERENCE_AMAZON_BEDROCK_ADDED = def(8_702_00_0);\n+    public static final TransportVersion V_8_15_0 = def(8_702_00_0);\n     public static final TransportVersion ENTERPRISE_GEOIP_DOWNLOADER_BACKPORT_8_15 = def(8_702_00_1);\n     public static final TransportVersion FIX_VECTOR_SIMILARITY_INNER_HITS_BACKPORT_8_15 = def(8_702_00_2);\n     /**\n@@ -176,76 +110,6 @@ public class TransportVersions {\n      * with only one TransportVersion entry\n      */\n     public static final TransportVersion ESQL_ATTRIBUTE_CACHED_SERIALIZATION_8_15 = def(8_702_00_3);\n-    public static final TransportVersion ML_INFERENCE_DONT_DELETE_WHEN_SEMANTIC_TEXT_EXISTS = def(8_703_00_0);\n-    public static final TransportVersion INFERENCE_ADAPTIVE_ALLOCATIONS = def(8_704_00_0);\n-    public static final TransportVersion INDEX_REQUEST_UPDATE_BY_SCRIPT_ORIGIN = def(8_705_00_0);\n-    public static final TransportVersion ML_INFERENCE_COHERE_UNUSED_RERANK_SETTINGS_REMOVED = def(8_706_00_0);\n-    public static final TransportVersion ENRICH_CACHE_STATS_SIZE_ADDED = def(8_707_00_0);\n-    public static final TransportVersion ENTERPRISE_GEOIP_DOWNLOADER = def(8_708_00_0);\n-    public static final TransportVersion NODES_STATS_ENUM_SET = def(8_709_00_0);\n-    public static final TransportVersion MASTER_NODE_METRICS = def(8_710_00_0);\n-    public static final TransportVersion SEGMENT_LEVEL_FIELDS_STATS = def(8_711_00_0);\n-    public static final TransportVersion ML_ADD_DETECTION_RULE_PARAMS = def(8_712_00_0);\n-    public static final TransportVersion FIX_VECTOR_SIMILARITY_INNER_HITS = def(8_713_00_0);\n-    public static final TransportVersion INDEX_REQUEST_UPDATE_BY_DOC_ORIGIN = def(8_714_00_0);\n-    public static final TransportVersion ESQL_ATTRIBUTE_CACHED_SERIALIZATION = def(8_715_00_0);\n-    public static final TransportVersion REGISTER_SLM_STATS = def(8_716_00_0);\n-    public static final TransportVersion ESQL_NESTED_UNSUPPORTED = def(8_717_00_0);\n-    public static final TransportVersion ESQL_SINGLE_VALUE_QUERY_SOURCE = def(8_718_00_0);\n-    public static final TransportVersion ESQL_ORIGINAL_INDICES = def(8_719_00_0);\n-    public static final TransportVersion ML_INFERENCE_EIS_INTEGRATION_ADDED = def(8_720_00_0);\n-    public static final TransportVersion INGEST_PIPELINE_EXCEPTION_ADDED = def(8_721_00_0);\n-    public static final TransportVersion ZDT_NANOS_SUPPORT_BROKEN = def(8_722_00_0);\n-    public static final TransportVersion REMOVE_GLOBAL_RETENTION_FROM_TEMPLATES = def(8_723_00_0);\n-    public static final TransportVersion RANDOM_RERANKER_RETRIEVER = def(8_724_00_0);\n-    public static final TransportVersion ESQL_PROFILE_SLEEPS = def(8_725_00_0);\n-    public static final TransportVersion ZDT_NANOS_SUPPORT = def(8_726_00_0);\n-    public static final TransportVersion LTR_SERVERLESS_RELEASE = def(8_727_00_0);\n-    public static final TransportVersion ALLOW_PARTIAL_SEARCH_RESULTS_IN_PIT = def(8_728_00_0);\n-    public static final TransportVersion RANK_DOCS_RETRIEVER = def(8_729_00_0);\n-    public static final TransportVersion ESQL_ES_FIELD_CACHED_SERIALIZATION = def(8_730_00_0);\n-    public static final TransportVersion ADD_MANAGE_ROLES_PRIVILEGE = def(8_731_00_0);\n-    public static final TransportVersion REPOSITORIES_TELEMETRY = def(8_732_00_0);\n-    public static final TransportVersion ML_INFERENCE_ALIBABACLOUD_SEARCH_ADDED = def(8_733_00_0);\n-    public static final TransportVersion FIELD_CAPS_RESPONSE_INDEX_MODE = def(8_734_00_0);\n-    public static final TransportVersion GET_DATA_STREAMS_VERBOSE = def(8_735_00_0);\n-    public static final TransportVersion ESQL_ADD_INDEX_MODE_CONCRETE_INDICES = def(8_736_00_0);\n-    public static final TransportVersion UNASSIGNED_PRIMARY_COUNT_ON_CLUSTER_HEALTH = def(8_737_00_0);\n-    public static final TransportVersion ESQL_AGGREGATE_EXEC_TRACKS_INTERMEDIATE_ATTRS = def(8_738_00_0);\n-    public static final TransportVersion CCS_TELEMETRY_STATS = def(8_739_00_0);\n-    public static final TransportVersion GLOBAL_RETENTION_TELEMETRY = def(8_740_00_0);\n-    public static final TransportVersion ROUTING_TABLE_VERSION_REMOVED = def(8_741_00_0);\n-    public static final TransportVersion ML_SCHEDULED_EVENT_TIME_SHIFT_CONFIGURATION = def(8_742_00_0);\n-    public static final TransportVersion SIMULATE_COMPONENT_TEMPLATES_SUBSTITUTIONS = def(8_743_00_0);\n-    public static final TransportVersion ML_INFERENCE_IBM_WATSONX_EMBEDDINGS_ADDED = def(8_744_00_0);\n-    public static final TransportVersion BULK_INCREMENTAL_STATE = def(8_745_00_0);\n-    public static final TransportVersion FAILURE_STORE_STATUS_IN_INDEX_RESPONSE = def(8_746_00_0);\n-    public static final TransportVersion ESQL_AGGREGATION_OPERATOR_STATUS_FINISH_NANOS = def(8_747_00_0);\n-    public static final TransportVersion ML_TELEMETRY_MEMORY_ADDED = def(8_748_00_0);\n-    public static final TransportVersion ILM_ADD_SEARCHABLE_SNAPSHOT_TOTAL_SHARDS_PER_NODE = def(8_749_00_0);\n-    public static final TransportVersion SEMANTIC_TEXT_SEARCH_INFERENCE_ID = def(8_750_00_0);\n-    public static final TransportVersion ML_INFERENCE_CHUNKING_SETTINGS = def(8_751_00_0);\n-    public static final TransportVersion SEMANTIC_QUERY_INNER_HITS = def(8_752_00_0);\n-    public static final TransportVersion RETAIN_ILM_STEP_INFO = def(8_753_00_0);\n-    public static final TransportVersion ADD_DATA_STREAM_OPTIONS = def(8_754_00_0);\n-    public static final TransportVersion CCS_REMOTE_TELEMETRY_STATS = def(8_755_00_0);\n-    public static final TransportVersion ESQL_CCS_EXECUTION_INFO = def(8_756_00_0);\n-    public static final TransportVersion REGEX_AND_RANGE_INTERVAL_QUERIES = def(8_757_00_0);\n-    public static final TransportVersion RRF_QUERY_REWRITE = def(8_758_00_0);\n-    public static final TransportVersion SEARCH_FAILURE_STATS = def(8_759_00_0);\n-    public static final TransportVersion INGEST_GEO_DATABASE_PROVIDERS = def(8_760_00_0);\n-    public static final TransportVersion DATE_TIME_DOC_VALUES_LOCALES = def(8_761_00_0);\n-    public static final TransportVersion FAST_REFRESH_RCO = def(8_762_00_0);\n-    public static final TransportVersion TEXT_SIMILARITY_RERANKER_QUERY_REWRITE = def(8_763_00_0);\n-    public static final TransportVersion SIMULATE_INDEX_TEMPLATES_SUBSTITUTIONS = def(8_764_00_0);\n-    public static final TransportVersion RETRIEVERS_TELEMETRY_ADDED = def(8_765_00_0);\n-    public static final TransportVersion ESQL_CACHED_STRING_SERIALIZATION = def(8_766_00_0);\n-    public static final TransportVersion CHUNK_SENTENCE_OVERLAP_SETTING_ADDED = def(8_767_00_0);\n-    public static final TransportVersion OPT_IN_ESQL_CCS_EXECUTION_INFO = def(8_768_00_0);\n-    public static final TransportVersion QUERY_RULE_TEST_API = def(8_769_00_0);\n-    public static final TransportVersion ESQL_PER_AGGREGATE_FILTER = def(8_770_00_0);\n-    public static final TransportVersion ML_INFERENCE_ATTACH_TO_EXISTSING_DEPLOYMENT = def(8_771_00_0);\n-    public static final TransportVersion CONVERT_FAILURE_STORE_OPTIONS_TO_SELECTOR_OPTIONS_INTERNALLY = def(8_772_00_0);\n \n     /*\n      * STOP! READ THIS FIRST! No, really,\n@@ -310,7 +174,7 @@ public class TransportVersions {\n      * Reference to the minimum transport version that can be used with CCS.\n      * This should be the transport version used by the previous minor release.\n      */\n-    public static final TransportVersion MINIMUM_CCS_VERSION = ESQL_ATTRIBUTE_CACHED_SERIALIZATION_8_15;\n+    public static final TransportVersion MINIMUM_CCS_VERSION = V_8_15_0;\n \n     static final NavigableMap<Integer, TransportVersion> VERSION_IDS = getAllVersionIds(TransportVersions.class);\n \ndiff --git a/server/src/main/java/org/elasticsearch/action/admin/cluster/allocation/TransportGetAllocationStatsAction.java b/server/src/main/java/org/elasticsearch/action/admin/cluster/allocation/TransportGetAllocationStatsAction.java\nindex 259a244b..e14f229f 100644\n--- a/server/src/main/java/org/elasticsearch/action/admin/cluster/allocation/TransportGetAllocationStatsAction.java\n+++ b/server/src/main/java/org/elasticsearch/action/admin/cluster/allocation/TransportGetAllocationStatsAction.java\n@@ -156,7 +156,7 @@ public class TransportGetAllocationStatsAction extends TransportMasterNodeReadAc\n         public Response(StreamInput in) throws IOException {\n             super(in);\n             this.nodeAllocationStats = in.readImmutableMap(StreamInput::readString, NodeAllocationStats::new);\n-            if (in.getTransportVersion().onOrAfter(TransportVersions.WATERMARK_THRESHOLDS_STATS)) {\n+            if (in.getTransportVersion().onOrAfter(TransportVersions.V_8_15_0)) {\n                 this.diskThresholdSettings = in.readOptionalWriteable(DiskThresholdSettings::readFrom);\n             } else {\n                 this.diskThresholdSettings = null;\n@@ -166,7 +166,7 @@ public class TransportGetAllocationStatsAction extends TransportMasterNodeReadAc\n         @Override\n         public void writeTo(StreamOutput out) throws IOException {\n             out.writeMap(nodeAllocationStats, StreamOutput::writeString, StreamOutput::writeWriteable);\n-            if (out.getTransportVersion().onOrAfter(TransportVersions.WATERMARK_THRESHOLDS_STATS)) {\n+            if (out.getTransportVersion().onOrAfter(TransportVersions.V_8_15_0)) {\n                 out.writeOptionalWriteable(diskThresholdSettings);\n             } else {\n                 assert diskThresholdSettings == null;\ndiff --git a/server/src/main/resources/org/elasticsearch/TransportVersions.csv b/server/src/main/resources/org/elasticsearch/TransportVersions.csv\nindex 44c752de..c8b3f251 100644\n--- a/server/src/main/resources/org/elasticsearch/TransportVersions.csv\n+++ b/server/src/main/resources/org/elasticsearch/TransportVersions.csv\n@@ -127,6 +127,6 @@\n 8.14.1,8636001\n 8.14.2,8636001\n 8.14.3,8636001\n-8.15.0,8702002\n-8.15.1,8702002\n-8.15.2,8702003\n+8.15.0,8702000\n+8.15.1,8702000\n+8.15.2,8702000\ndiff --git a/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/enrich/action/EnrichStatsAction.java b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/enrich/action/EnrichStatsAction.java\nindex fc9087d9..7ecb338c 100644\n--- a/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/enrich/action/EnrichStatsAction.java\n+++ b/x-pack/plugin/core/src/main/java/org/elasticsearch/xpack/core/enrich/action/EnrichStatsAction.java\n@@ -207,9 +207,9 @@ public class EnrichStatsAction extends ActionType<EnrichStatsAction.Response> {\n                     in.readVLong(),\n                     in.readVLong(),\n                     in.readVLong(),\n-                    in.getTransportVersion().onOrAfter(TransportVersions.ENRICH_CACHE_ADDITIONAL_STATS) ? in.readLong() : -1,\n-                    in.getTransportVersion().onOrAfter(TransportVersions.ENRICH_CACHE_ADDITIONAL_STATS) ? in.readLong() : -1,\n-                    in.getTransportVersion().onOrAfter(TransportVersions.ENRICH_CACHE_STATS_SIZE_ADDED) ? in.readLong() : -1\n+                    in.getTransportVersion().onOrAfter(TransportVersions.V_8_15_0) ? in.readLong() : -1,\n+                    in.getTransportVersion().onOrAfter(TransportVersions.V_8_15_0) ? in.readLong() : -1,\n+                    in.getTransportVersion().onOrAfter(TransportVersions.V_8_15_0) ? in.readLong() : -1\n                 );\n             }\n \n@@ -233,11 +233,11 @@ public class EnrichStatsAction extends ActionType<EnrichStatsAction.Response> {\n                 out.writeVLong(hits);\n                 out.writeVLong(misses);\n                 out.writeVLong(evictions);\n-                if (out.getTransportVersion().onOrAfter(TransportVersions.ENRICH_CACHE_ADDITIONAL_STATS)) {\n+                if (out.getTransportVersion().onOrAfter(TransportVersions.V_8_15_0)) {\n                     out.writeLong(hitsTimeInMillis);\n                     out.writeLong(missesTimeInMillis);\n                 }\n-                if (out.getTransportVersion().onOrAfter(TransportVersions.ENRICH_CACHE_STATS_SIZE_ADDED)) {\n+                if (out.getTransportVersion().onOrAfter(TransportVersions.V_8_15_0)) {\n                     out.writeLong(cacheSizeInBytes);\n                 }\n             }\ndiff --git a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/azureopenai/AzureOpenAiService.java b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/azureopenai/AzureOpenAiService.java\nindex 4ab5046d..aa1d895f 100644\n--- a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/azureopenai/AzureOpenAiService.java\n+++ b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/azureopenai/AzureOpenAiService.java\n@@ -314,7 +314,7 @@ public class AzureOpenAiService extends SenderService {\n \n     @Override\n     public TransportVersion getMinimalSupportedVersion() {\n-        return TransportVersions.ML_INFERENCE_RATE_LIMIT_SETTINGS_ADDED;\n+        return TransportVersions.V_8_15_0;\n     }\n \n     @Override\ndiff --git a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/azureopenai/embeddings/AzureOpenAiEmbeddingsServiceSettings.java b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/azureopenai/embeddings/AzureOpenAiEmbeddingsServiceSettings.java\nindex 941a4bde..9e8ca478 100644\n--- a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/azureopenai/embeddings/AzureOpenAiEmbeddingsServiceSettings.java\n+++ b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/azureopenai/embeddings/AzureOpenAiEmbeddingsServiceSettings.java\n@@ -185,7 +185,7 @@ public class AzureOpenAiEmbeddingsServiceSettings extends FilteredXContentObject\n         maxInputTokens = in.readOptionalVInt();\n         similarity = in.readOptionalEnum(SimilarityMeasure.class);\n \n-        if (in.getTransportVersion().onOrAfter(TransportVersions.ML_INFERENCE_RATE_LIMIT_SETTINGS_ADDED)) {\n+        if (in.getTransportVersion().onOrAfter(TransportVersions.V_8_15_0)) {\n             rateLimitSettings = new RateLimitSettings(in);\n         } else {\n             rateLimitSettings = DEFAULT_RATE_LIMIT_SETTINGS;\n@@ -303,7 +303,7 @@ public class AzureOpenAiEmbeddingsServiceSettings extends FilteredXContentObject\n         out.writeOptionalVInt(maxInputTokens);\n         out.writeOptionalEnum(SimilarityMeasure.translateSimilarity(similarity, out.getTransportVersion()));\n \n-        if (out.getTransportVersion().onOrAfter(TransportVersions.ML_INFERENCE_RATE_LIMIT_SETTINGS_ADDED)) {\n+        if (out.getTransportVersion().onOrAfter(TransportVersions.V_8_15_0)) {\n             rateLimitSettings.writeTo(out);\n         }\n     }\ndiff --git a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/cohere/CohereService.java b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/cohere/CohereService.java\nindex 6dee08bc..28bb30e6 100644\n--- a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/cohere/CohereService.java\n+++ b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/cohere/CohereService.java\n@@ -315,7 +315,7 @@ public class CohereService extends SenderService {\n \n     @Override\n     public TransportVersion getMinimalSupportedVersion() {\n-        return TransportVersions.ML_INFERENCE_RATE_LIMIT_SETTINGS_ADDED;\n+        return TransportVersions.V_8_15_0;\n     }\n \n     @Override\ndiff --git a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/cohere/CohereServiceSettings.java b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/cohere/CohereServiceSettings.java\nindex 7f28459e..a1943b33 100644\n--- a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/cohere/CohereServiceSettings.java\n+++ b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/cohere/CohereServiceSettings.java\n@@ -124,7 +124,7 @@ public class CohereServiceSettings extends FilteredXContentObject implements Ser\n         maxInputTokens = in.readOptionalVInt();\n         modelId = in.readOptionalString();\n \n-        if (in.getTransportVersion().onOrAfter(TransportVersions.ML_INFERENCE_RATE_LIMIT_SETTINGS_ADDED)) {\n+        if (in.getTransportVersion().onOrAfter(TransportVersions.V_8_15_0)) {\n             rateLimitSettings = new RateLimitSettings(in);\n         } else {\n             rateLimitSettings = DEFAULT_RATE_LIMIT_SETTINGS;\n@@ -219,7 +219,7 @@ public class CohereServiceSettings extends FilteredXContentObject implements Ser\n         out.writeOptionalVInt(maxInputTokens);\n         out.writeOptionalString(modelId);\n \n-        if (out.getTransportVersion().onOrAfter(TransportVersions.ML_INFERENCE_RATE_LIMIT_SETTINGS_ADDED)) {\n+        if (out.getTransportVersion().onOrAfter(TransportVersions.V_8_15_0)) {\n             rateLimitSettings.writeTo(out);\n         }\n     }\ndiff --git a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/cohere/rerank/CohereRerankServiceSettings.java b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/cohere/rerank/CohereRerankServiceSettings.java\nindex 1132dff3..a3d2483a 100644\n--- a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/cohere/rerank/CohereRerankServiceSettings.java\n+++ b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/cohere/rerank/CohereRerankServiceSettings.java\n@@ -101,7 +101,7 @@ public class CohereRerankServiceSettings extends FilteredXContentObject implemen\n \n         this.modelId = in.readOptionalString();\n \n-        if (in.getTransportVersion().onOrAfter(TransportVersions.ML_INFERENCE_RATE_LIMIT_SETTINGS_ADDED)) {\n+        if (in.getTransportVersion().onOrAfter(TransportVersions.V_8_15_0)) {\n             this.rateLimitSettings = new RateLimitSettings(in);\n         } else {\n             this.rateLimitSettings = DEFAULT_RATE_LIMIT_SETTINGS;\n@@ -172,7 +172,7 @@ public class CohereRerankServiceSettings extends FilteredXContentObject implemen\n \n         out.writeOptionalString(modelId);\n \n-        if (out.getTransportVersion().onOrAfter(TransportVersions.ML_INFERENCE_RATE_LIMIT_SETTINGS_ADDED)) {\n+        if (out.getTransportVersion().onOrAfter(TransportVersions.V_8_15_0)) {\n             rateLimitSettings.writeTo(out);\n         }\n     }\ndiff --git a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/huggingface/HuggingFaceService.java b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/huggingface/HuggingFaceService.java\nindex 81069f90..ed36e602 100644\n--- a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/huggingface/HuggingFaceService.java\n+++ b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/huggingface/HuggingFaceService.java\n@@ -134,6 +134,6 @@ public class HuggingFaceService extends HuggingFaceBaseService {\n \n     @Override\n     public TransportVersion getMinimalSupportedVersion() {\n-        return TransportVersions.ML_INFERENCE_RATE_LIMIT_SETTINGS_ADDED;\n+        return TransportVersions.V_8_15_0;\n     }\n }\ndiff --git a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/huggingface/HuggingFaceServiceSettings.java b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/huggingface/HuggingFaceServiceSettings.java\nindex c136e73a..74291538 100644\n--- a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/huggingface/HuggingFaceServiceSettings.java\n+++ b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/huggingface/HuggingFaceServiceSettings.java\n@@ -120,7 +120,7 @@ public class HuggingFaceServiceSettings extends FilteredXContentObject implement\n             maxInputTokens = null;\n         }\n \n-        if (in.getTransportVersion().onOrAfter(TransportVersions.ML_INFERENCE_RATE_LIMIT_SETTINGS_ADDED)) {\n+        if (in.getTransportVersion().onOrAfter(TransportVersions.V_8_15_0)) {\n             rateLimitSettings = new RateLimitSettings(in);\n         } else {\n             rateLimitSettings = DEFAULT_RATE_LIMIT_SETTINGS;\n@@ -171,7 +171,7 @@ public class HuggingFaceServiceSettings extends FilteredXContentObject implement\n             out.writeOptionalVInt(maxInputTokens);\n         }\n \n-        if (out.getTransportVersion().onOrAfter(TransportVersions.ML_INFERENCE_RATE_LIMIT_SETTINGS_ADDED)) {\n+        if (out.getTransportVersion().onOrAfter(TransportVersions.V_8_15_0)) {\n             rateLimitSettings.writeTo(out);\n         }\n     }\ndiff --git a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/huggingface/elser/HuggingFaceElserServiceSettings.java b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/huggingface/elser/HuggingFaceElserServiceSettings.java\nindex b48e7186..be5f595d 100644\n--- a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/huggingface/elser/HuggingFaceElserServiceSettings.java\n+++ b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/huggingface/elser/HuggingFaceElserServiceSettings.java\n@@ -76,7 +76,7 @@ public class HuggingFaceElserServiceSettings extends FilteredXContentObject\n     public HuggingFaceElserServiceSettings(StreamInput in) throws IOException {\n         uri = createUri(in.readString());\n \n-        if (in.getTransportVersion().onOrAfter(TransportVersions.ML_INFERENCE_RATE_LIMIT_SETTINGS_ADDED)) {\n+        if (in.getTransportVersion().onOrAfter(TransportVersions.V_8_15_0)) {\n             rateLimitSettings = new RateLimitSettings(in);\n         } else {\n             rateLimitSettings = DEFAULT_RATE_LIMIT_SETTINGS;\n@@ -134,7 +134,7 @@ public class HuggingFaceElserServiceSettings extends FilteredXContentObject\n     public void writeTo(StreamOutput out) throws IOException {\n         out.writeString(uri.toString());\n \n-        if (out.getTransportVersion().onOrAfter(TransportVersions.ML_INFERENCE_RATE_LIMIT_SETTINGS_ADDED)) {\n+        if (out.getTransportVersion().onOrAfter(TransportVersions.V_8_15_0)) {\n             rateLimitSettings.writeTo(out);\n         }\n     }\ndiff --git a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/openai/OpenAiService.java b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/openai/OpenAiService.java\nindex 6ad8ef4e..7b8975f6 100644\n--- a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/openai/OpenAiService.java\n+++ b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/openai/OpenAiService.java\n@@ -302,7 +302,7 @@ public class OpenAiService extends SenderService {\n \n     @Override\n     public TransportVersion getMinimalSupportedVersion() {\n-        return TransportVersions.ML_INFERENCE_RATE_LIMIT_SETTINGS_ADDED;\n+        return TransportVersions.V_8_15_0;\n     }\n \n     @Override\ndiff --git a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/openai/completion/OpenAiChatCompletionServiceSettings.java b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/openai/completion/OpenAiChatCompletionServiceSettings.java\nindex 96436996..88840cc1 100644\n--- a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/openai/completion/OpenAiChatCompletionServiceSettings.java\n+++ b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/openai/completion/OpenAiChatCompletionServiceSettings.java\n@@ -119,7 +119,7 @@ public class OpenAiChatCompletionServiceSettings extends FilteredXContentObject\n         this.organizationId = in.readOptionalString();\n         this.maxInputTokens = in.readOptionalVInt();\n \n-        if (in.getTransportVersion().onOrAfter(TransportVersions.ML_INFERENCE_RATE_LIMIT_SETTINGS_ADDED)) {\n+        if (in.getTransportVersion().onOrAfter(TransportVersions.V_8_15_0)) {\n             rateLimitSettings = new RateLimitSettings(in);\n         } else {\n             rateLimitSettings = DEFAULT_RATE_LIMIT_SETTINGS;\n@@ -197,7 +197,7 @@ public class OpenAiChatCompletionServiceSettings extends FilteredXContentObject\n         out.writeOptionalString(organizationId);\n         out.writeOptionalVInt(maxInputTokens);\n \n-        if (out.getTransportVersion().onOrAfter(TransportVersions.ML_INFERENCE_RATE_LIMIT_SETTINGS_ADDED)) {\n+        if (out.getTransportVersion().onOrAfter(TransportVersions.V_8_15_0)) {\n             rateLimitSettings.writeTo(out);\n         }\n     }\ndiff --git a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/openai/embeddings/OpenAiEmbeddingsServiceSettings.java b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/openai/embeddings/OpenAiEmbeddingsServiceSettings.java\nindex 940f78bc..4bb87f41 100644\n--- a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/openai/embeddings/OpenAiEmbeddingsServiceSettings.java\n+++ b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/services/openai/embeddings/OpenAiEmbeddingsServiceSettings.java\n@@ -202,7 +202,7 @@ public class OpenAiEmbeddingsServiceSettings extends FilteredXContentObject impl\n             modelId = \"unset\";\n         }\n \n-        if (in.getTransportVersion().onOrAfter(TransportVersions.ML_INFERENCE_RATE_LIMIT_SETTINGS_ADDED)) {\n+        if (in.getTransportVersion().onOrAfter(TransportVersions.V_8_15_0)) {\n             rateLimitSettings = new RateLimitSettings(in);\n         } else {\n             rateLimitSettings = DEFAULT_RATE_LIMIT_SETTINGS;\n@@ -330,7 +330,7 @@ public class OpenAiEmbeddingsServiceSettings extends FilteredXContentObject impl\n             out.writeString(modelId);\n         }\n \n-        if (out.getTransportVersion().onOrAfter(TransportVersions.ML_INFERENCE_RATE_LIMIT_SETTINGS_ADDED)) {\n+        if (out.getTransportVersion().onOrAfter(TransportVersions.V_8_15_0)) {\n             rateLimitSettings.writeTo(out);\n         }\n     }\ndiff --git a/x-pack/plugin/inference/src/test/java/org/elasticsearch/xpack/inference/services/cohere/rerank/CohereRerankServiceSettingsTests.java b/x-pack/plugin/inference/src/test/java/org/elasticsearch/xpack/inference/services/cohere/rerank/CohereRerankServiceSettingsTests.java\nindex a729ac8e..e3401b74 100644\n--- a/x-pack/plugin/inference/src/test/java/org/elasticsearch/xpack/inference/services/cohere/rerank/CohereRerankServiceSettingsTests.java\n+++ b/x-pack/plugin/inference/src/test/java/org/elasticsearch/xpack/inference/services/cohere/rerank/CohereRerankServiceSettingsTests.java\n@@ -78,7 +78,7 @@ public class CohereRerankServiceSettingsTests extends AbstractBWCWireSerializati\n \n     @Override\n     protected CohereRerankServiceSettings mutateInstanceForVersion(CohereRerankServiceSettings instance, TransportVersion version) {\n-        if (version.before(TransportVersions.ML_INFERENCE_RATE_LIMIT_SETTINGS_ADDED)) {\n+        if (version.before(TransportVersions.V_8_15_0)) {\n             // We always default to the same rate limit settings, if a node is on a version before rate limits were introduced\n             return new CohereRerankServiceSettings(instance.uri(), instance.modelId(), CohereServiceSettings.DEFAULT_RATE_LIMIT_SETTINGS);\n         }",
  "logs_path": "claude-code/claude-sonnet-4-5/c7a3f90a/elastic_elasticsearch_pr114971/logs.jsonl",
  "errors": [],
  "edit_run_id": "c7a3f90a",
  "test_label": "v0"
}