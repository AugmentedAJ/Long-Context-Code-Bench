{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 114908,
  "base_commit": "a703b2013efa8aabec76caf98974f180fb3a3a64",
  "runner": "claude-code",
  "model": "claude-sonnet-4-5",
  "timeout_s": 1200,
  "status": "success",
  "elapsed_ms": 120477,
  "patch_unified": "diff --git a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/chunking/EmbeddingRequestChunker.java b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/chunking/EmbeddingRequestChunker.java\nindex 3ae8dc05..638bc6c9 100644\n--- a/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/chunking/EmbeddingRequestChunker.java\n+++ b/x-pack/plugin/inference/src/main/java/org/elasticsearch/xpack/inference/chunking/EmbeddingRequestChunker.java\n@@ -323,8 +323,14 @@ public class EmbeddingRequestChunker {\n         @Override\n         public void onFailure(Exception e) {\n             var errorResult = new ErrorChunkedInferenceResults(e);\n+            int previousIndex = -1;\n             for (var pos : positions) {\n-                errors.setOnce(pos.inputIndex(), errorResult);\n+                // Only set once per unique input index as multiple sub-batches\n+                // may belong to the same input\n+                if (pos.inputIndex() != previousIndex) {\n+                    errors.setOnce(pos.inputIndex(), errorResult);\n+                    previousIndex = pos.inputIndex();\n+                }\n             }\n \n             if (resultCount.incrementAndGet() == totalNumberOfRequests) {",
  "logs_path": "claude-code/claude-sonnet-4-5/c7a3f90a/elastic_elasticsearch_pr114908/logs.jsonl",
  "errors": [],
  "edit_run_id": "c7a3f90a",
  "test_label": "v0"
}