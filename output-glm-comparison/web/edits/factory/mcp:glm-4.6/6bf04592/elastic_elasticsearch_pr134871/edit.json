{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 134871,
  "base_commit": "1923634bf7b0aa66d701b756aa3ded92370ffeb4",
  "runner": "factory",
  "model": "mcp:glm-4.6",
  "timeout_s": 1800,
  "status": "success",
  "elapsed_ms": 837230,
  "patch_unified": "diff --git a/server/src/main/java/org/elasticsearch/common/unit/SizeUnit.java b/server/src/main/java/org/elasticsearch/common/unit/SizeUnit.java\ndeleted file mode 100644\nindex b4b33540..00000000\n--- a/server/src/main/java/org/elasticsearch/common/unit/SizeUnit.java\n+++ /dev/null\n@@ -1,230 +0,0 @@\n-/*\n- * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n- * or more contributor license agreements. Licensed under the \"Elastic License\n- * 2.0\", the \"GNU Affero General Public License v3.0 only\", and the \"Server Side\n- * Public License v 1\"; you may not use this file except in compliance with, at\n- * your election, the \"Elastic License 2.0\", the \"GNU Affero General Public\n- * License v3.0 only\", or the \"Server Side Public License, v 1\".\n- */\n-\n-package org.elasticsearch.common.unit;\n-\n-public enum SizeUnit {\n-    SINGLE {\n-        @Override\n-        public long toSingles(long size) {\n-            return size;\n-        }\n-\n-        @Override\n-        public long toKilo(long size) {\n-            return size / (C1 / C0);\n-        }\n-\n-        @Override\n-        public long toMega(long size) {\n-            return size / (C2 / C0);\n-        }\n-\n-        @Override\n-        public long toGiga(long size) {\n-            return size / (C3 / C0);\n-        }\n-\n-        @Override\n-        public long toTera(long size) {\n-            return size / (C4 / C0);\n-        }\n-\n-        @Override\n-        public long toPeta(long size) {\n-            return size / (C5 / C0);\n-        }\n-    },\n-    KILO {\n-        @Override\n-        public long toSingles(long size) {\n-            return x(size, C1 / C0, MAX / (C1 / C0));\n-        }\n-\n-        @Override\n-        public long toKilo(long size) {\n-            return size;\n-        }\n-\n-        @Override\n-        public long toMega(long size) {\n-            return size / (C2 / C1);\n-        }\n-\n-        @Override\n-        public long toGiga(long size) {\n-            return size / (C3 / C1);\n-        }\n-\n-        @Override\n-        public long toTera(long size) {\n-            return size / (C4 / C1);\n-        }\n-\n-        @Override\n-        public long toPeta(long size) {\n-            return size / (C5 / C1);\n-        }\n-    },\n-    MEGA {\n-        @Override\n-        public long toSingles(long size) {\n-            return x(size, C2 / C0, MAX / (C2 / C0));\n-        }\n-\n-        @Override\n-        public long toKilo(long size) {\n-            return x(size, C2 / C1, MAX / (C2 / C1));\n-        }\n-\n-        @Override\n-        public long toMega(long size) {\n-            return size;\n-        }\n-\n-        @Override\n-        public long toGiga(long size) {\n-            return size / (C3 / C2);\n-        }\n-\n-        @Override\n-        public long toTera(long size) {\n-            return size / (C4 / C2);\n-        }\n-\n-        @Override\n-        public long toPeta(long size) {\n-            return size / (C5 / C2);\n-        }\n-    },\n-    GIGA {\n-        @Override\n-        public long toSingles(long size) {\n-            return x(size, C3 / C0, MAX / (C3 / C0));\n-        }\n-\n-        @Override\n-        public long toKilo(long size) {\n-            return x(size, C3 / C1, MAX / (C3 / C1));\n-        }\n-\n-        @Override\n-        public long toMega(long size) {\n-            return x(size, C3 / C2, MAX / (C3 / C2));\n-        }\n-\n-        @Override\n-        public long toGiga(long size) {\n-            return size;\n-        }\n-\n-        @Override\n-        public long toTera(long size) {\n-            return size / (C4 / C3);\n-        }\n-\n-        @Override\n-        public long toPeta(long size) {\n-            return size / (C5 / C3);\n-        }\n-    },\n-    TERA {\n-        @Override\n-        public long toSingles(long size) {\n-            return x(size, C4 / C0, MAX / (C4 / C0));\n-        }\n-\n-        @Override\n-        public long toKilo(long size) {\n-            return x(size, C4 / C1, MAX / (C4 / C1));\n-        }\n-\n-        @Override\n-        public long toMega(long size) {\n-            return x(size, C4 / C2, MAX / (C4 / C2));\n-        }\n-\n-        @Override\n-        public long toGiga(long size) {\n-            return x(size, C4 / C3, MAX / (C4 / C3));\n-        }\n-\n-        @Override\n-        public long toTera(long size) {\n-            return size;\n-        }\n-\n-        @Override\n-        public long toPeta(long size) {\n-            return size / (C5 / C0);\n-        }\n-    },\n-    PETA {\n-        @Override\n-        public long toSingles(long size) {\n-            return x(size, C5 / C0, MAX / (C5 / C0));\n-        }\n-\n-        @Override\n-        public long toKilo(long size) {\n-            return x(size, C5 / C1, MAX / (C5 / C1));\n-        }\n-\n-        @Override\n-        public long toMega(long size) {\n-            return x(size, C5 / C2, MAX / (C5 / C2));\n-        }\n-\n-        @Override\n-        public long toGiga(long size) {\n-            return x(size, C5 / C3, MAX / (C5 / C3));\n-        }\n-\n-        @Override\n-        public long toTera(long size) {\n-            return x(size, C5 / C4, MAX / (C5 / C4));\n-        }\n-\n-        @Override\n-        public long toPeta(long size) {\n-            return size;\n-        }\n-    };\n-\n-    static final long C0 = 1L;\n-    static final long C1 = C0 * 1000L;\n-    static final long C2 = C1 * 1000L;\n-    static final long C3 = C2 * 1000L;\n-    static final long C4 = C3 * 1000L;\n-    static final long C5 = C4 * 1000L;\n-\n-    static final long MAX = Long.MAX_VALUE;\n-\n-    /**\n-     * Scale d by m, checking for overflow.\n-     * This has a short name to make above code more readable.\n-     */\n-    static long x(long d, long m, long over) {\n-        if (d > over) return Long.MAX_VALUE;\n-        if (d < -over) return Long.MIN_VALUE;\n-        return d * m;\n-    }\n-\n-    public abstract long toSingles(long size);\n-\n-    public abstract long toKilo(long size);\n-\n-    public abstract long toMega(long size);\n-\n-    public abstract long toGiga(long size);\n-\n-    public abstract long toTera(long size);\n-\n-    public abstract long toPeta(long size);\n-}\ndiff --git a/server/src/main/java/org/elasticsearch/common/unit/SizeValue.java b/server/src/main/java/org/elasticsearch/common/unit/SizeValue.java\ndeleted file mode 100644\nindex 9fa57e3b..00000000\n--- a/server/src/main/java/org/elasticsearch/common/unit/SizeValue.java\n+++ /dev/null\n@@ -1,164 +0,0 @@\n-/*\n- * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n- * or more contributor license agreements. Licensed under the \"Elastic License\n- * 2.0\", the \"GNU Affero General Public License v3.0 only\", and the \"Server Side\n- * Public License v 1\"; you may not use this file except in compliance with, at\n- * your election, the \"Elastic License 2.0\", the \"GNU Affero General Public\n- * License v3.0 only\", or the \"Server Side Public License, v 1\".\n- */\n-\n-package org.elasticsearch.common.unit;\n-\n-import org.elasticsearch.ElasticsearchParseException;\n-import org.elasticsearch.common.Strings;\n-import org.elasticsearch.common.io.stream.StreamInput;\n-import org.elasticsearch.common.io.stream.StreamOutput;\n-import org.elasticsearch.common.io.stream.Writeable;\n-\n-import java.io.IOException;\n-\n-public class SizeValue implements Writeable, Comparable<SizeValue> {\n-\n-    private final long size;\n-    private final SizeUnit sizeUnit;\n-\n-    public SizeValue(long singles) {\n-        this(singles, SizeUnit.SINGLE);\n-    }\n-\n-    public SizeValue(long size, SizeUnit sizeUnit) {\n-        if (size < 0) {\n-            throw new IllegalArgumentException(\"size in SizeValue may not be negative\");\n-        }\n-        this.size = size;\n-        this.sizeUnit = sizeUnit;\n-    }\n-\n-    public SizeValue(StreamInput in) throws IOException {\n-        size = in.readVLong();\n-        sizeUnit = SizeUnit.SINGLE;\n-    }\n-\n-    @Override\n-    public void writeTo(StreamOutput out) throws IOException {\n-        out.writeVLong(singles());\n-    }\n-\n-    public long singles() {\n-        return sizeUnit.toSingles(size);\n-    }\n-\n-    public long kilo() {\n-        return sizeUnit.toKilo(size);\n-    }\n-\n-    public long mega() {\n-        return sizeUnit.toMega(size);\n-    }\n-\n-    public long giga() {\n-        return sizeUnit.toGiga(size);\n-    }\n-\n-    public long tera() {\n-        return sizeUnit.toTera(size);\n-    }\n-\n-    public long peta() {\n-        return sizeUnit.toPeta(size);\n-    }\n-\n-    public double kiloFrac() {\n-        return ((double) singles()) / SizeUnit.C1;\n-    }\n-\n-    public double megaFrac() {\n-        return ((double) singles()) / SizeUnit.C2;\n-    }\n-\n-    public double gigaFrac() {\n-        return ((double) singles()) / SizeUnit.C3;\n-    }\n-\n-    public double teraFrac() {\n-        return ((double) singles()) / SizeUnit.C4;\n-    }\n-\n-    public double petaFrac() {\n-        return ((double) singles()) / SizeUnit.C5;\n-    }\n-\n-    @Override\n-    public String toString() {\n-        long singles = singles();\n-        double value = singles;\n-        String suffix = \"\";\n-        if (singles >= SizeUnit.C5) {\n-            value = petaFrac();\n-            suffix = \"p\";\n-        } else if (singles >= SizeUnit.C4) {\n-            value = teraFrac();\n-            suffix = \"t\";\n-        } else if (singles >= SizeUnit.C3) {\n-            value = gigaFrac();\n-            suffix = \"g\";\n-        } else if (singles >= SizeUnit.C2) {\n-            value = megaFrac();\n-            suffix = \"m\";\n-        } else if (singles >= SizeUnit.C1) {\n-            value = kiloFrac();\n-            suffix = \"k\";\n-        }\n-\n-        return Strings.format1Decimals(value, suffix);\n-    }\n-\n-    public static SizeValue parseSizeValue(String sValue) throws ElasticsearchParseException {\n-        return parseSizeValue(sValue, null);\n-    }\n-\n-    public static SizeValue parseSizeValue(String sValue, SizeValue defaultValue) throws ElasticsearchParseException {\n-        if (sValue == null) {\n-            return defaultValue;\n-        }\n-        long singles;\n-        try {\n-            if (sValue.endsWith(\"k\") || sValue.endsWith(\"K\")) {\n-                singles = (long) (Double.parseDouble(sValue.substring(0, sValue.length() - 1)) * SizeUnit.C1);\n-            } else if (sValue.endsWith(\"m\") || sValue.endsWith(\"M\")) {\n-                singles = (long) (Double.parseDouble(sValue.substring(0, sValue.length() - 1)) * SizeUnit.C2);\n-            } else if (sValue.endsWith(\"g\") || sValue.endsWith(\"G\")) {\n-                singles = (long) (Double.parseDouble(sValue.substring(0, sValue.length() - 1)) * SizeUnit.C3);\n-            } else if (sValue.endsWith(\"t\") || sValue.endsWith(\"T\")) {\n-                singles = (long) (Double.parseDouble(sValue.substring(0, sValue.length() - 1)) * SizeUnit.C4);\n-            } else if (sValue.endsWith(\"p\") || sValue.endsWith(\"P\")) {\n-                singles = (long) (Double.parseDouble(sValue.substring(0, sValue.length() - 1)) * SizeUnit.C5);\n-            } else {\n-                singles = Long.parseLong(sValue);\n-            }\n-        } catch (NumberFormatException e) {\n-            throw new ElasticsearchParseException(\"failed to parse [{}]\", e, sValue);\n-        }\n-        return new SizeValue(singles, SizeUnit.SINGLE);\n-    }\n-\n-    @Override\n-    public boolean equals(Object o) {\n-        if (this == o) return true;\n-        if (o == null || getClass() != o.getClass()) return false;\n-\n-        return compareTo((SizeValue) o) == 0;\n-    }\n-\n-    @Override\n-    public int hashCode() {\n-        return Double.hashCode(((double) size) * sizeUnit.toSingles(1));\n-    }\n-\n-    @Override\n-    public int compareTo(SizeValue other) {\n-        double thisValue = ((double) size) * sizeUnit.toSingles(1);\n-        double otherValue = ((double) other.size) * other.sizeUnit.toSingles(1);\n-        return Double.compare(thisValue, otherValue);\n-    }\n-}\ndiff --git a/server/src/main/java/org/elasticsearch/rest/action/cat/RestTable.java b/server/src/main/java/org/elasticsearch/rest/action/cat/RestTable.java\nindex 68716a86..d953e808 100644\n--- a/server/src/main/java/org/elasticsearch/rest/action/cat/RestTable.java\n+++ b/server/src/main/java/org/elasticsearch/rest/action/cat/RestTable.java\n@@ -14,7 +14,7 @@ import org.elasticsearch.common.Table;\n import org.elasticsearch.common.collect.Iterators;\n import org.elasticsearch.common.regex.Regex;\n import org.elasticsearch.common.unit.ByteSizeValue;\n-import org.elasticsearch.common.unit.SizeValue;\n+\n import org.elasticsearch.common.util.set.Sets;\n import org.elasticsearch.core.Booleans;\n import org.elasticsearch.core.TimeValue;\n@@ -370,20 +370,20 @@ public class RestTable {\n                 return v.toString();\n             }\n         }\n-        if (value instanceof SizeValue v) {\n+        if (value instanceof Long v) {\n             String resolution = request.param(\"size\");\n             if (\"\".equals(resolution)) {\n-                return Long.toString(v.singles());\n+                return v.toString();\n             } else if (\"k\".equals(resolution)) {\n-                return Long.toString(v.kilo());\n+                return Long.toString(v / 1000);\n             } else if (\"m\".equals(resolution)) {\n-                return Long.toString(v.mega());\n+                return Long.toString(v / 1000 / 1000);\n             } else if (\"g\".equals(resolution)) {\n-                return Long.toString(v.giga());\n+                return Long.toString(v / 1000 / 1000 / 1000);\n             } else if (\"t\".equals(resolution)) {\n-                return Long.toString(v.tera());\n+                return Long.toString(v / 1000 / 1000 / 1000 / 1000);\n             } else if (\"p\".equals(resolution)) {\n-                return Long.toString(v.peta());\n+                return Long.toString(v / 1000 / 1000 / 1000 / 1000 / 1000);\n             } else {\n                 return v.toString();\n             }\ndiff --git a/server/src/main/java/org/elasticsearch/rest/action/cat/RestThreadPoolAction.java b/server/src/main/java/org/elasticsearch/rest/action/cat/RestThreadPoolAction.java\nindex 5cde4e70..a0193450 100644\n--- a/server/src/main/java/org/elasticsearch/rest/action/cat/RestThreadPoolAction.java\n+++ b/server/src/main/java/org/elasticsearch/rest/action/cat/RestThreadPoolAction.java\n@@ -208,7 +208,7 @@ public class RestThreadPoolAction extends AbstractCatAction {\n \n                 if (poolInfo != null) {\n                     if (poolInfo.getQueueSize() != null) {\n-                        maxQueueSize = poolInfo.getQueueSize().singles();\n+                        maxQueueSize = poolInfo.getQueueSize();\n                     }\n                     if (poolInfo.getKeepAlive() != null) {\n                         keepAlive = poolInfo.getKeepAlive();\ndiff --git a/server/src/main/java/org/elasticsearch/threadpool/FixedExecutorBuilder.java b/server/src/main/java/org/elasticsearch/threadpool/FixedExecutorBuilder.java\nindex 9c723f24..1e61da0b 100644\n--- a/server/src/main/java/org/elasticsearch/threadpool/FixedExecutorBuilder.java\n+++ b/server/src/main/java/org/elasticsearch/threadpool/FixedExecutorBuilder.java\n@@ -11,7 +11,7 @@ package org.elasticsearch.threadpool;\n \n import org.elasticsearch.common.settings.Setting;\n import org.elasticsearch.common.settings.Settings;\n-import org.elasticsearch.common.unit.SizeValue;\n+\n import org.elasticsearch.common.util.concurrent.EsExecutors;\n import org.elasticsearch.common.util.concurrent.EsExecutors.TaskTrackingConfig;\n import org.elasticsearch.common.util.concurrent.ThreadContext;\n@@ -160,7 +160,7 @@ public final class FixedExecutorBuilder extends ExecutorBuilder<FixedExecutorBui\n             size,\n             size,\n             null,\n-            queueSize < 0 ? null : new SizeValue(queueSize)\n+            queueSize < 0 ? null : (long) queueSize\n         );\n         return new ThreadPool.ExecutorHolder(executor, info);\n     }\ndiff --git a/server/src/main/java/org/elasticsearch/threadpool/ThreadPool.java b/server/src/main/java/org/elasticsearch/threadpool/ThreadPool.java\nindex 2a8c42c9..6e63e1e5 100644\n--- a/server/src/main/java/org/elasticsearch/threadpool/ThreadPool.java\n+++ b/server/src/main/java/org/elasticsearch/threadpool/ThreadPool.java\n@@ -19,7 +19,7 @@ import org.elasticsearch.common.settings.Settings;\n import org.elasticsearch.common.time.TimeProvider;\n import org.elasticsearch.common.unit.ByteSizeUnit;\n import org.elasticsearch.common.unit.ByteSizeValue;\n-import org.elasticsearch.common.unit.SizeValue;\n+\n import org.elasticsearch.common.util.concurrent.EsExecutors;\n import org.elasticsearch.common.util.concurrent.EsRejectedExecutionException;\n import org.elasticsearch.common.util.concurrent.EsRejectedExecutionHandler;\n@@ -934,7 +934,7 @@ public class ThreadPool implements ReportingService<ThreadPoolInfo>, Scheduler,\n         private final int min;\n         private final int max;\n         private final TimeValue keepAlive;\n-        private final SizeValue queueSize;\n+        private final Long queueSize;\n \n         public Info(String name, ThreadPoolType type) {\n             this(name, type, -1);\n@@ -944,7 +944,7 @@ public class ThreadPool implements ReportingService<ThreadPoolInfo>, Scheduler,\n             this(name, type, size, size, null, null);\n         }\n \n-        public Info(String name, ThreadPoolType type, int min, int max, @Nullable TimeValue keepAlive, @Nullable SizeValue queueSize) {\n+        public Info(String name, ThreadPoolType type, int min, int max, @Nullable TimeValue keepAlive, @Nullable Long queueSize) {\n             this.name = name;\n             this.type = type;\n             this.min = min;\n@@ -959,7 +959,7 @@ public class ThreadPool implements ReportingService<ThreadPoolInfo>, Scheduler,\n             min = in.readInt();\n             max = in.readInt();\n             keepAlive = in.readOptionalTimeValue();\n-            queueSize = in.readOptionalWriteable(SizeValue::new);\n+            queueSize = in.readOptionalLong();\n         }\n \n         @Override\n@@ -969,7 +969,7 @@ public class ThreadPool implements ReportingService<ThreadPoolInfo>, Scheduler,\n             out.writeInt(min);\n             out.writeInt(max);\n             out.writeOptionalTimeValue(keepAlive);\n-            out.writeOptionalWriteable(queueSize);\n+            out.writeOptionalLong(queueSize);\n         }\n \n         public String getName() {\n@@ -994,7 +994,7 @@ public class ThreadPool implements ReportingService<ThreadPoolInfo>, Scheduler,\n         }\n \n         @Nullable\n-        public SizeValue getQueueSize() {\n+        public Long getQueueSize() {\n             return this.queueSize;\n         }\n \n@@ -1018,7 +1018,7 @@ public class ThreadPool implements ReportingService<ThreadPoolInfo>, Scheduler,\n             if (queueSize == null) {\n                 builder.field(\"queue_size\", -1);\n             } else {\n-                builder.field(\"queue_size\", queueSize.singles());\n+                builder.field(\"queue_size\", queueSize);\n             }\n             builder.endObject();\n             return builder;\ndiff --git a/server/src/test/java/org/elasticsearch/common/unit/SizeValueTests.java b/server/src/test/java/org/elasticsearch/common/unit/SizeValueTests.java\ndeleted file mode 100644\nindex 91f3c45a..00000000\n--- a/server/src/test/java/org/elasticsearch/common/unit/SizeValueTests.java\n+++ /dev/null\n@@ -1,90 +0,0 @@\n-/*\n- * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n- * or more contributor license agreements. Licensed under the \"Elastic License\n- * 2.0\", the \"GNU Affero General Public License v3.0 only\", and the \"Server Side\n- * Public License v 1\"; you may not use this file except in compliance with, at\n- * your election, the \"Elastic License 2.0\", the \"GNU Affero General Public\n- * License v3.0 only\", or the \"Server Side Public License, v 1\".\n- */\n-package org.elasticsearch.common.unit;\n-\n-import org.elasticsearch.test.ESTestCase;\n-\n-import static org.hamcrest.Matchers.containsString;\n-import static org.hamcrest.Matchers.is;\n-\n-public class SizeValueTests extends ESTestCase {\n-    public void testThatConversionWorks() {\n-        SizeValue sizeValue = new SizeValue(1000);\n-        assertThat(sizeValue.kilo(), is(1L));\n-        assertThat(sizeValue.toString(), is(\"1k\"));\n-\n-        sizeValue = new SizeValue(1000, SizeUnit.KILO);\n-        assertThat(sizeValue.singles(), is(1000000L));\n-        assertThat(sizeValue.toString(), is(\"1m\"));\n-\n-        sizeValue = new SizeValue(1000, SizeUnit.MEGA);\n-        assertThat(sizeValue.singles(), is(1000000000L));\n-        assertThat(sizeValue.toString(), is(\"1g\"));\n-\n-        sizeValue = new SizeValue(1000, SizeUnit.GIGA);\n-        assertThat(sizeValue.singles(), is(1000000000000L));\n-        assertThat(sizeValue.toString(), is(\"1t\"));\n-\n-        sizeValue = new SizeValue(1000, SizeUnit.TERA);\n-        assertThat(sizeValue.singles(), is(1000000000000000L));\n-        assertThat(sizeValue.toString(), is(\"1p\"));\n-\n-        sizeValue = new SizeValue(1000, SizeUnit.PETA);\n-        assertThat(sizeValue.singles(), is(1000000000000000000L));\n-        assertThat(sizeValue.toString(), is(\"1000p\"));\n-    }\n-\n-    public void testThatParsingWorks() {\n-        assertThat(SizeValue.parseSizeValue(\"1k\").toString(), is(new SizeValue(1000).toString()));\n-        assertThat(SizeValue.parseSizeValue(\"1p\").toString(), is(new SizeValue(1, SizeUnit.PETA).toString()));\n-        assertThat(SizeValue.parseSizeValue(\"1G\").toString(), is(new SizeValue(1, SizeUnit.GIGA).toString()));\n-    }\n-\n-    public void testThatNegativeValuesThrowException() {\n-        try {\n-            new SizeValue(-1);\n-            fail(\"Expected IllegalArgumentException\");\n-        } catch (IllegalArgumentException e) {\n-            assertThat(e.getMessage(), containsString(\"may not be negative\"));\n-        }\n-    }\n-\n-    public void testCompareEquality() {\n-        long randomValue = randomNonNegativeLong();\n-        SizeUnit randomUnit = randomFrom(SizeUnit.values());\n-        SizeValue firstValue = new SizeValue(randomValue, randomUnit);\n-        SizeValue secondValue = new SizeValue(randomValue, randomUnit);\n-        assertEquals(0, firstValue.compareTo(secondValue));\n-    }\n-\n-    public void testCompareValue() {\n-        long firstRandom = randomNonNegativeLong();\n-        long secondRandom = randomValueOtherThan(firstRandom, ESTestCase::randomNonNegativeLong);\n-        SizeUnit unit = randomFrom(SizeUnit.values());\n-        SizeValue firstSizeValue = new SizeValue(firstRandom, unit);\n-        SizeValue secondSizeValue = new SizeValue(secondRandom, unit);\n-        assertEquals(firstRandom > secondRandom, firstSizeValue.compareTo(secondSizeValue) > 0);\n-        assertEquals(secondRandom > firstRandom, secondSizeValue.compareTo(firstSizeValue) > 0);\n-    }\n-\n-    public void testCompareUnits() {\n-        long number = randomNonNegativeLong();\n-        SizeUnit randomUnit = randomValueOtherThan(SizeUnit.PETA, () -> randomFrom(SizeUnit.values()));\n-        SizeValue firstValue = new SizeValue(number, randomUnit);\n-        SizeValue secondValue = new SizeValue(number, SizeUnit.PETA);\n-        assertTrue(firstValue.compareTo(secondValue) < 0);\n-        assertTrue(secondValue.compareTo(firstValue) > 0);\n-    }\n-\n-    public void testConversionHashCode() {\n-        SizeValue firstValue = new SizeValue(randomIntBetween(0, Integer.MAX_VALUE), SizeUnit.GIGA);\n-        SizeValue secondValue = new SizeValue(firstValue.singles(), SizeUnit.SINGLE);\n-        assertEquals(firstValue.hashCode(), secondValue.hashCode());\n-    }\n-}\ndiff --git a/server/src/test/java/org/elasticsearch/threadpool/ThreadPoolSerializationTests.java b/server/src/test/java/org/elasticsearch/threadpool/ThreadPoolSerializationTests.java\nindex 29af0902..5c76776c 100644\n--- a/server/src/test/java/org/elasticsearch/threadpool/ThreadPoolSerializationTests.java\n+++ b/server/src/test/java/org/elasticsearch/threadpool/ThreadPoolSerializationTests.java\n@@ -13,7 +13,7 @@ import org.elasticsearch.common.bytes.BytesReference;\n import org.elasticsearch.common.io.stream.BytesStreamOutput;\n import org.elasticsearch.common.io.stream.StreamInput;\n import org.elasticsearch.common.settings.Settings;\n-import org.elasticsearch.common.unit.SizeValue;\n+\n import org.elasticsearch.common.xcontent.XContentHelper;\n import org.elasticsearch.core.TimeValue;\n import org.elasticsearch.telemetry.metric.MeterRegistry;\n@@ -47,7 +47,7 @@ public class ThreadPoolSerializationTests extends ESTestCase {\n             1,\n             10,\n             TimeValue.timeValueMillis(3000),\n-            SizeValue.parseSizeValue(\"10k\")\n+            10000L\n         );\n         output.setTransportVersion(TransportVersion.current());\n         info.writeTo(output);\n@@ -55,7 +55,7 @@ public class ThreadPoolSerializationTests extends ESTestCase {\n         StreamInput input = output.bytes().streamInput();\n         ThreadPool.Info newInfo = new ThreadPool.Info(input);\n \n-        assertThat(newInfo.getQueueSize().singles(), is(10000L));\n+        assertThat(newInfo.getQueueSize(), is(10000L));\n     }\n \n     public void testThatNegativeQueueSizesCanBeSerialized() throws Exception {\n@@ -99,7 +99,7 @@ public class ThreadPoolSerializationTests extends ESTestCase {\n             1,\n             10,\n             TimeValue.timeValueMillis(3000),\n-            SizeValue.parseSizeValue(\"1k\")\n+            1000L\n         );\n         XContentBuilder builder = jsonBuilder();\n         builder.startObject();\ndiff --git a/server/src/test/java/org/elasticsearch/threadpool/UpdateThreadPoolSettingsTests.java b/server/src/test/java/org/elasticsearch/threadpool/UpdateThreadPoolSettingsTests.java\nindex 873a7fca..b31f799f 100644\n--- a/server/src/test/java/org/elasticsearch/threadpool/UpdateThreadPoolSettingsTests.java\n+++ b/server/src/test/java/org/elasticsearch/threadpool/UpdateThreadPoolSettingsTests.java\n@@ -146,7 +146,7 @@ public class UpdateThreadPoolSettingsTests extends ESThreadPoolTestCase {\n                 .put(\"node.name\", \"testShutdownNowInterrupts\")\n                 .build();\n             threadPool = new ThreadPool(nodeSettings, MeterRegistry.NOOP, new DefaultBuiltInExecutorBuilders());\n-            assertEquals(info(threadPool, threadPoolName).getQueueSize().singles(), 1000L);\n+assertEquals((long)info(threadPool, threadPoolName).getQueueSize(), 1000L);\n \n             final CountDownLatch shutDownLatch = new CountDownLatch(1);\n             final CountDownLatch latch = new CountDownLatch(1);\n@@ -209,7 +209,7 @@ public class UpdateThreadPoolSettingsTests extends ESThreadPoolTestCase {\n                     assertEquals(info.getThreadPoolType(), ThreadPool.ThreadPoolType.FIXED);\n                     assertThat(info.getMin(), equalTo(1));\n                     assertThat(info.getMax(), equalTo(1));\n-                    assertThat(info.getQueueSize().singles(), equalTo(1L));\n+                    assertThat(info.getQueueSize(), equalTo(1L));\n                 } else {\n                     for (Field field : Names.class.getFields()) {\n                         if (info.getName().equalsIgnoreCase(field.getName())) {",
  "logs_path": "factory/mcp:glm-4.6/6bf04592/elastic_elasticsearch_pr134871/logs.jsonl",
  "errors": [],
  "edit_run_id": "6bf04592",
  "test_label": "v1-mcp"
}