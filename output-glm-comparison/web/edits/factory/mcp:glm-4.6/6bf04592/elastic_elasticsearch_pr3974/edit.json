{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 3974,
  "base_commit": "0e9c049da1231968a56a9abbd5178f07bc49b320",
  "runner": "factory",
  "model": "mcp:glm-4.6",
  "timeout_s": 1800,
  "status": "success",
  "elapsed_ms": 194353,
  "patch_unified": "diff --git a/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/delete/RestDeleteWarmerAction.java b/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/delete/RestDeleteWarmerAction.java\nindex 8682d95..d32d3db 100644\n--- a/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/delete/RestDeleteWarmerAction.java\n+++ b/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/delete/RestDeleteWarmerAction.java\n@@ -26,11 +26,8 @@ import org.elasticsearch.client.Client;\n import org.elasticsearch.common.Strings;\n import org.elasticsearch.common.inject.Inject;\n import org.elasticsearch.common.settings.Settings;\n-import org.elasticsearch.common.xcontent.XContentBuilder;\n import org.elasticsearch.rest.*;\n-import org.elasticsearch.rest.action.support.RestXContentBuilder;\n-\n-import java.io.IOException;\n+import org.elasticsearch.rest.action.support.RestAcknowledgedResponse;\n \n import static org.elasticsearch.rest.RestRequest.Method.DELETE;\n import static org.elasticsearch.rest.RestStatus.OK;\n@@ -54,29 +51,6 @@ public class RestDeleteWarmerAction extends BaseRestHandler {\n         deleteWarmerRequest.listenerThreaded(false);\n         deleteWarmerRequest.timeout(request.paramAsTime(\"timeout\", deleteWarmerRequest.timeout()));\n         deleteWarmerRequest.masterNodeTimeout(request.paramAsTime(\"master_timeout\", deleteWarmerRequest.masterNodeTimeout()));\n-        client.admin().indices().deleteWarmer(deleteWarmerRequest, new ActionListener<DeleteWarmerResponse>() {\n-            @Override\n-            public void onResponse(DeleteWarmerResponse response) {\n-                try {\n-                    XContentBuilder builder = RestXContentBuilder.restContentBuilder(request);\n-                    builder.startObject()\n-                            .field(\"ok\", true)\n-                            .field(\"acknowledged\", response.isAcknowledged());\n-                    builder.endObject();\n-                    channel.sendResponse(new XContentRestResponse(request, OK, builder));\n-                } catch (IOException e) {\n-                    onFailure(e);\n-                }\n-            }\n-\n-            @Override\n-            public void onFailure(Throwable e) {\n-                try {\n-                    channel.sendResponse(new XContentThrowableRestResponse(request, e));\n-                } catch (IOException e1) {\n-                    logger.error(\"Failed to send failure response\", e1);\n-                }\n-            }\n-        });\n+        client.admin().indices().deleteWarmer(deleteWarmerRequest, RestAcknowledgedResponse.listener(request, channel, logger));\n     }\n }\ndiff --git a/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/put/RestPutWarmerAction.java b/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/put/RestPutWarmerAction.java\nindex 47ee0f0..57539a0 100644\n--- a/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/put/RestPutWarmerAction.java\n+++ b/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/put/RestPutWarmerAction.java\n@@ -27,11 +27,8 @@ import org.elasticsearch.client.Client;\n import org.elasticsearch.common.Strings;\n import org.elasticsearch.common.inject.Inject;\n import org.elasticsearch.common.settings.Settings;\n-import org.elasticsearch.common.xcontent.XContentBuilder;\n import org.elasticsearch.rest.*;\n-import org.elasticsearch.rest.action.support.RestXContentBuilder;\n-\n-import java.io.IOException;\n+import org.elasticsearch.rest.action.support.RestAcknowledgedResponse;\n \n import static org.elasticsearch.rest.RestRequest.Method.PUT;\n import static org.elasticsearch.rest.RestStatus.OK;\n@@ -57,29 +54,6 @@ public class RestPutWarmerAction extends BaseRestHandler {\n         putWarmerRequest.searchRequest(searchRequest);\n         putWarmerRequest.timeout(request.paramAsTime(\"timeout\", putWarmerRequest.timeout()));\n         putWarmerRequest.masterNodeTimeout(request.paramAsTime(\"master_timeout\", putWarmerRequest.masterNodeTimeout()));\n-        client.admin().indices().putWarmer(putWarmerRequest, new ActionListener<PutWarmerResponse>() {\n-            @Override\n-            public void onResponse(PutWarmerResponse response) {\n-                try {\n-                    XContentBuilder builder = RestXContentBuilder.restContentBuilder(request);\n-                    builder.startObject()\n-                            .field(\"ok\", true)\n-                            .field(\"acknowledged\", response.isAcknowledged());\n-                    builder.endObject();\n-                    channel.sendResponse(new XContentRestResponse(request, OK, builder));\n-                } catch (IOException e) {\n-                    onFailure(e);\n-                }\n-            }\n-\n-            @Override\n-            public void onFailure(Throwable e) {\n-                try {\n-                    channel.sendResponse(new XContentThrowableRestResponse(request, e));\n-                } catch (IOException e1) {\n-                    logger.error(\"Failed to send failure response\", e1);\n-                }\n-            }\n-        });\n+        client.admin().indices().putWarmer(putWarmerRequest, RestAcknowledgedResponse.listener(request, channel, logger));\n     }\n }",
  "logs_path": "factory/mcp:glm-4.6/6bf04592/elastic_elasticsearch_pr3974/logs.jsonl",
  "errors": [],
  "edit_run_id": "6bf04592",
  "test_label": "v1-mcp"
}