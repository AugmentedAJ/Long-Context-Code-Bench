{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 3966,
  "base_commit": "c9dab6991eff5c01c7b0c36aecaf0f061267e030",
  "runner": "factory",
  "model": "mcp:glm-4.6",
  "timeout_s": 1800,
  "status": "success",
  "elapsed_ms": 477947,
  "patch_unified": "diff --git a/src/main/java/org/elasticsearch/indices/analysis/IndicesAnalysisService.java b/src/main/java/org/elasticsearch/indices/analysis/IndicesAnalysisService.java\nindex 6b52755..90a3308 100644\n--- a/src/main/java/org/elasticsearch/indices/analysis/IndicesAnalysisService.java\n+++ b/src/main/java/org/elasticsearch/indices/analysis/IndicesAnalysisService.java\n@@ -110,56 +110,311 @@ public class IndicesAnalysisService extends AbstractComponent {\n         super(EMPTY_SETTINGS);\n     }\n \n+    private VersionAwarePreBuiltAnalyzerProviderFactory createVersionAwareFactory(String name, AnalyzerScope scope, VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory factory) {\n+        // We'll use the injector to create the factory with proper index and settings\n+        return new VersionAwarePreBuiltAnalyzerProviderFactory(null, null, name, scope, factory);\n+    }\n+\n     @Inject\n     public IndicesAnalysisService(Settings settings) {\n         super(settings);\n \n-        StandardAnalyzer standardAnalyzer = new StandardAnalyzer(Lucene.ANALYZER_VERSION);\n-        analyzerProviderFactories.put(\"default\", new PreBuiltAnalyzerProviderFactory(\"default\", AnalyzerScope.INDICES, standardAnalyzer));\n-        analyzerProviderFactories.put(\"standard\", new PreBuiltAnalyzerProviderFactory(\"standard\", AnalyzerScope.INDICES, standardAnalyzer));\n-        analyzerProviderFactories.put(\"keyword\", new PreBuiltAnalyzerProviderFactory(\"keyword\", AnalyzerScope.INDICES, new KeywordAnalyzer()));\n-        analyzerProviderFactories.put(\"stop\", new PreBuiltAnalyzerProviderFactory(\"stop\", AnalyzerScope.INDICES, new StopAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"whitespace\", new PreBuiltAnalyzerProviderFactory(\"whitespace\", AnalyzerScope.INDICES, new WhitespaceAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"simple\", new PreBuiltAnalyzerProviderFactory(\"simple\", AnalyzerScope.INDICES, new SimpleAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"classic\", new PreBuiltAnalyzerProviderFactory(\"classic\", AnalyzerScope.INDICES, new ClassicAnalyzer(Lucene.ANALYZER_VERSION)));\n+        // Use version-aware factories for all analyzers\n+        analyzerProviderFactories.put(\"default\", createVersionAwareFactory(\"default\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new StandardAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"standard\", createVersionAwareFactory(\"standard\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new StandardAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"keyword\", createVersionAwareFactory(\"keyword\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new KeywordAnalyzer();\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"stop\", createVersionAwareFactory(\"stop\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new StopAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"whitespace\", createVersionAwareFactory(\"whitespace\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new WhitespaceAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"simple\", createVersionAwareFactory(\"simple\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new SimpleAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"classic\", createVersionAwareFactory(\"classic\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new ClassicAnalyzer(version);\n+            }\n+        }));\n \n         // extended ones\n-        analyzerProviderFactories.put(\"pattern\", new PreBuiltAnalyzerProviderFactory(\"pattern\", AnalyzerScope.INDICES, new PatternAnalyzer(Lucene.ANALYZER_VERSION, Regex.compile(\"\\\\W+\" /*PatternAnalyzer.NON_WORD_PATTERN*/, null), true, StopAnalyzer.ENGLISH_STOP_WORDS_SET)));\n-        analyzerProviderFactories.put(\"snowball\", new PreBuiltAnalyzerProviderFactory(\"snowball\", AnalyzerScope.INDICES, new SnowballAnalyzer(Lucene.ANALYZER_VERSION, \"English\", StopAnalyzer.ENGLISH_STOP_WORDS_SET)));\n-        analyzerProviderFactories.put(\"standard_html_strip\", new PreBuiltAnalyzerProviderFactory(\"standard_html_strip\", AnalyzerScope.INDICES, new StandardHtmlStripAnalyzer(Lucene.ANALYZER_VERSION)));\n-\n-        analyzerProviderFactories.put(\"arabic\", new PreBuiltAnalyzerProviderFactory(\"arabic\", AnalyzerScope.INDICES, new ArabicAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"armenian\", new PreBuiltAnalyzerProviderFactory(\"armenian\", AnalyzerScope.INDICES, new ArmenianAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"basque\", new PreBuiltAnalyzerProviderFactory(\"basque\", AnalyzerScope.INDICES, new BasqueAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"brazilian\", new PreBuiltAnalyzerProviderFactory(\"brazilian\", AnalyzerScope.INDICES, new BrazilianAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"bulgarian\", new PreBuiltAnalyzerProviderFactory(\"bulgarian\", AnalyzerScope.INDICES, new BulgarianAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"catalan\", new PreBuiltAnalyzerProviderFactory(\"catalan\", AnalyzerScope.INDICES, new CatalanAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"chinese\", new PreBuiltAnalyzerProviderFactory(\"chinese\", AnalyzerScope.INDICES, new ChineseAnalyzer()));\n-        analyzerProviderFactories.put(\"cjk\", new PreBuiltAnalyzerProviderFactory(\"cjk\", AnalyzerScope.INDICES, new CJKAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"czech\", new PreBuiltAnalyzerProviderFactory(\"czech\", AnalyzerScope.INDICES, new CzechAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"dutch\", new PreBuiltAnalyzerProviderFactory(\"dutch\", AnalyzerScope.INDICES, new DutchAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"danish\", new PreBuiltAnalyzerProviderFactory(\"danish\", AnalyzerScope.INDICES, new DanishAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"english\", new PreBuiltAnalyzerProviderFactory(\"english\", AnalyzerScope.INDICES, new EnglishAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"finnish\", new PreBuiltAnalyzerProviderFactory(\"finnish\", AnalyzerScope.INDICES, new FinnishAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"french\", new PreBuiltAnalyzerProviderFactory(\"french\", AnalyzerScope.INDICES, new FrenchAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"galician\", new PreBuiltAnalyzerProviderFactory(\"galician\", AnalyzerScope.INDICES, new GalicianAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"german\", new PreBuiltAnalyzerProviderFactory(\"german\", AnalyzerScope.INDICES, new GermanAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"greek\", new PreBuiltAnalyzerProviderFactory(\"greek\", AnalyzerScope.INDICES, new GreekAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"hindi\", new PreBuiltAnalyzerProviderFactory(\"hindi\", AnalyzerScope.INDICES, new HindiAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"hungarian\", new PreBuiltAnalyzerProviderFactory(\"hungarian\", AnalyzerScope.INDICES, new HungarianAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"indonesian\", new PreBuiltAnalyzerProviderFactory(\"indonesian\", AnalyzerScope.INDICES, new IndonesianAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"irish\", new PreBuiltAnalyzerProviderFactory(\"irish\", AnalyzerScope.INDICES, new IrishAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"italian\", new PreBuiltAnalyzerProviderFactory(\"italian\", AnalyzerScope.INDICES, new ItalianAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"latvian\", new PreBuiltAnalyzerProviderFactory(\"latvian\", AnalyzerScope.INDICES, new LatvianAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"norwegian\", new PreBuiltAnalyzerProviderFactory(\"norwegian\", AnalyzerScope.INDICES, new NorwegianAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"persian\", new PreBuiltAnalyzerProviderFactory(\"persian\", AnalyzerScope.INDICES, new PersianAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"portuguese\", new PreBuiltAnalyzerProviderFactory(\"portuguese\", AnalyzerScope.INDICES, new PortugueseAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"romanian\", new PreBuiltAnalyzerProviderFactory(\"romanian\", AnalyzerScope.INDICES, new RomanianAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"russian\", new PreBuiltAnalyzerProviderFactory(\"russian\", AnalyzerScope.INDICES, new RussianAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"spanish\", new PreBuiltAnalyzerProviderFactory(\"spanish\", AnalyzerScope.INDICES, new SpanishAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"swedish\", new PreBuiltAnalyzerProviderFactory(\"swedish\", AnalyzerScope.INDICES, new SwedishAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"turkish\", new PreBuiltAnalyzerProviderFactory(\"turkish\", AnalyzerScope.INDICES, new TurkishAnalyzer(Lucene.ANALYZER_VERSION)));\n-        analyzerProviderFactories.put(\"thai\", new PreBuiltAnalyzerProviderFactory(\"thai\", AnalyzerScope.INDICES, new ThaiAnalyzer(Lucene.ANALYZER_VERSION)));\n+        analyzerProviderFactories.put(\"pattern\", createVersionAwareFactory(\"pattern\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new PatternAnalyzer(version, Regex.compile(\"\\\\W+\" /*PatternAnalyzer.NON_WORD_PATTERN*/, null), true, StopAnalyzer.ENGLISH_STOP_WORDS_SET);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"snowball\", createVersionAwareFactory(\"snowball\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new SnowballAnalyzer(version, \"English\", StopAnalyzer.ENGLISH_STOP_WORDS_SET);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"standard_html_strip\", createVersionAwareFactory(\"standard_html_strip\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new StandardHtmlStripAnalyzer(version);\n+            }\n+        }));\n+\n+        // Language-specific analyzers\n+        analyzerProviderFactories.put(\"arabic\", createVersionAwareFactory(\"arabic\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new ArabicAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"armenian\", createVersionAwareFactory(\"armenian\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new ArmenianAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"basque\", createVersionAwareFactory(\"basque\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new BasqueAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"brazilian\", createVersionAwareFactory(\"brazilian\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new BrazilianAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"bulgarian\", createVersionAwareFactory(\"bulgarian\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new BulgarianAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"catalan\", createVersionAwareFactory(\"catalan\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new CatalanAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"chinese\", createVersionAwareFactory(\"chinese\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new ChineseAnalyzer();\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"cjk\", createVersionAwareFactory(\"cjk\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new CJKAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"czech\", createVersionAwareFactory(\"czech\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new CzechAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"dutch\", createVersionAwareFactory(\"dutch\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new DutchAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"danish\", createVersionAwareFactory(\"danish\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new DanishAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"english\", createVersionAwareFactory(\"english\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new EnglishAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"finnish\", createVersionAwareFactory(\"finnish\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new FinnishAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"french\", createVersionAwareFactory(\"french\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new FrenchAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"galician\", createVersionAwareFactory(\"galician\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new GalicianAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"german\", createVersionAwareFactory(\"german\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new GermanAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"greek\", createVersionAwareFactory(\"greek\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new GreekAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"hindi\", createVersionAwareFactory(\"hindi\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new HindiAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"hungarian\", createVersionAwareFactory(\"hungarian\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new HungarianAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"indonesian\", createVersionAwareFactory(\"indonesian\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new IndonesianAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"irish\", createVersionAwareFactory(\"irish\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new IrishAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"italian\", createVersionAwareFactory(\"italian\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new ItalianAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"latvian\", createVersionAwareFactory(\"latvian\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new LatvianAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"norwegian\", createVersionAwareFactory(\"norwegian\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new NorwegianAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"persian\", createVersionAwareFactory(\"persian\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new PersianAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"portuguese\", createVersionAwareFactory(\"portuguese\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new PortugueseAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"romanian\", createVersionAwareFactory(\"romanian\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new RomanianAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"russian\", createVersionAwareFactory(\"russian\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new RussianAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"spanish\", createVersionAwareFactory(\"spanish\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new SpanishAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"swedish\", createVersionAwareFactory(\"swedish\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new SwedishAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"turkish\", createVersionAwareFactory(\"turkish\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new TurkishAnalyzer(version);\n+            }\n+        }));\n+        \n+        analyzerProviderFactories.put(\"thai\", createVersionAwareFactory(\"thai\", AnalyzerScope.INDICES, new VersionAwarePreBuiltAnalyzerProvider.AnalyzerFactory() {\n+            @Override\n+            public Analyzer create(org.apache.lucene.util.Version version) {\n+                return new ThaiAnalyzer(version);\n+            }\n+        }));\n \n         // Base Tokenizers\n         tokenizerFactories.put(\"standard\", new PreBuiltTokenizerFactoryFactory(new TokenizerFactory() {",
  "logs_path": "factory/mcp:glm-4.6/6bf04592/elastic_elasticsearch_pr3966/logs.jsonl",
  "errors": [],
  "edit_run_id": "6bf04592",
  "test_label": "v1-mcp"
}