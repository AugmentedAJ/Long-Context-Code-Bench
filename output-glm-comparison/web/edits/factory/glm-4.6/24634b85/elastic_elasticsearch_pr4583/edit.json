{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 4583,
  "base_commit": "c12427d047b7cf9fd1ac9acc611bc2985ad12c40",
  "runner": "factory",
  "model": "glm-4.6",
  "timeout_s": 1800,
  "status": "success",
  "elapsed_ms": 63581,
  "patch_unified": "diff --git a/src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java b/src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java\nindex 5dfeeba..25ceb72 100644\n--- a/src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java\n+++ b/src/main/java/org/elasticsearch/index/mapper/internal/AllFieldMapper.java\n@@ -259,10 +259,14 @@ public class AllFieldMapper extends AbstractFieldMapper<Void> implements Interna\n         // if all are defaults, no need to write it at all\n         boolean includeDefaults = params.paramAsBoolean(\"include_defaults\", false);\n \n-        if (!includeDefaults && enabled == Defaults.ENABLED && fieldType.stored() == Defaults.FIELD_TYPE.stored() &&\n+        if (!includeDefaults && enabled == Defaults.ENABLED && autoBoost == false && fieldType.stored() == Defaults.FIELD_TYPE.stored() &&\n                 fieldType.storeTermVectors() == Defaults.FIELD_TYPE.storeTermVectors() &&\n-                indexAnalyzer == null && searchAnalyzer == null && customFieldDataSettings == null\n-                && fieldType.omitNorms() == Defaults.FIELD_TYPE.omitNorms()) {\n+                fieldType.storeTermVectorOffsets() == Defaults.FIELD_TYPE.storeTermVectorOffsets() &&\n+                fieldType.storeTermVectorPositions() == Defaults.FIELD_TYPE.storeTermVectorPositions() &&\n+                fieldType.storeTermVectorPayloads() == Defaults.FIELD_TYPE.storeTermVectorPayloads() &&\n+                fieldType.omitNorms() == Defaults.FIELD_TYPE.omitNorms() &&\n+                indexAnalyzer == null && searchAnalyzer == null && customFieldDataSettings == null &&\n+                similarity() == null) {\n             return builder;\n         }\n         builder.startObject(CONTENT_TYPE);\n@@ -324,7 +328,7 @@ public class AllFieldMapper extends AbstractFieldMapper<Void> implements Interna\n         if (similarity() != null) {\n             builder.field(\"similarity\", similarity().name());\n         } else if (includeDefaults) {\n-            builder.field(\"similariry\", SimilarityLookupService.DEFAULT_SIMILARITY);\n+            builder.field(\"similarity\", SimilarityLookupService.DEFAULT_SIMILARITY);\n         }\n \n         if (customFieldDataSettings != null) {",
  "logs_path": "factory/glm-4.6/24634b85/elastic_elasticsearch_pr4583/logs.jsonl",
  "errors": [],
  "edit_run_id": "24634b85",
  "test_label": null
}