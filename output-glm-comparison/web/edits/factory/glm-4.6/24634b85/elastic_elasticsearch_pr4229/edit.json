{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 4229,
  "base_commit": "0ec3eaf53d470a309d3976c7f6798f578bd668d5",
  "runner": "factory",
  "model": "glm-4.6",
  "timeout_s": 1800,
  "status": "success",
  "elapsed_ms": 131636,
  "patch_unified": "diff --git a/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequest.java b/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequest.java\nindex 9eb3352..5e7bbc3 100644\n--- a/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequest.java\n+++ b/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequest.java\n@@ -23,6 +23,7 @@ import com.carrotsearch.hppc.ObjectOpenHashSet;\n import org.elasticsearch.ElasticSearchGenerationException;\n import org.elasticsearch.ElasticSearchIllegalArgumentException;\n import org.elasticsearch.action.ActionRequestValidationException;\n+import org.elasticsearch.action.support.master.AcknowledgedRequest;\n import org.elasticsearch.action.support.master.MasterNodeOperationRequest;\n import org.elasticsearch.common.Strings;\n import org.elasticsearch.common.io.stream.StreamInput;\n@@ -51,7 +52,7 @@ import static org.elasticsearch.common.unit.TimeValue.readTimeValue;\n  * @see org.elasticsearch.client.IndicesAdminClient#putMapping(PutMappingRequest)\n  * @see PutMappingResponse\n  */\n-public class PutMappingRequest extends MasterNodeOperationRequest<PutMappingRequest> {\n+public class PutMappingRequest extends AcknowledgedRequest<PutMappingRequest> {\n \n     private static ObjectOpenHashSet<String> RESERVED_FIELDS = ObjectOpenHashSet.from(\n             \"_uid\", \"_id\", \"_type\", \"_source\",  \"_all\", \"_analyzer\", \"_boost\", \"_parent\", \"_routing\", \"_index\",\n@@ -64,8 +65,6 @@ public class PutMappingRequest extends MasterNodeOperationRequest<PutMappingRequ\n \n     private String source;\n \n-    private TimeValue timeout = new TimeValue(10, TimeUnit.SECONDS);\n-\n     private boolean ignoreConflicts = false;\n \n     PutMappingRequest() {\n@@ -224,31 +223,6 @@ public class PutMappingRequest extends MasterNodeOperationRequest<PutMappingRequ\n         return this;\n     }\n \n-    /**\n-     * Timeout to wait till the put mapping gets acknowledged of all current cluster nodes. Defaults to\n-     * <tt>10s</tt>.\n-     */\n-    TimeValue timeout() {\n-        return timeout;\n-    }\n-\n-    /**\n-     * Timeout to wait till the put mapping gets acknowledged of all current cluster nodes. Defaults to\n-     * <tt>10s</tt>.\n-     */\n-    public PutMappingRequest timeout(TimeValue timeout) {\n-        this.timeout = timeout;\n-        return this;\n-    }\n-\n-    /**\n-     * Timeout to wait till the put mapping gets acknowledged of all current cluster nodes. Defaults to\n-     * <tt>10s</tt>.\n-     */\n-    public PutMappingRequest timeout(String timeout) {\n-        return timeout(TimeValue.parseTimeValue(timeout, null));\n-    }\n-\n     /**\n      * If there is already a mapping definition registered against the type, then it will be merged. If there are\n      * elements that can't be merged are detected, the request will be rejected unless the\n@@ -274,7 +248,6 @@ public class PutMappingRequest extends MasterNodeOperationRequest<PutMappingRequ\n         indices = in.readStringArray();\n         type = in.readOptionalString();\n         source = in.readString();\n-        timeout = readTimeValue(in);\n         ignoreConflicts = in.readBoolean();\n     }\n \n@@ -284,7 +257,6 @@ public class PutMappingRequest extends MasterNodeOperationRequest<PutMappingRequ\n         out.writeStringArrayNullable(indices);\n         out.writeOptionalString(type);\n         out.writeString(source);\n-        timeout.writeTo(out);\n         out.writeBoolean(ignoreConflicts);\n     }\n }\ndiff --git a/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequestBuilder.java b/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequestBuilder.java\nindex e93ca84..f39fffd 100644\n--- a/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequestBuilder.java\n+++ b/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingRequestBuilder.java\n@@ -20,6 +20,7 @@\n package org.elasticsearch.action.admin.indices.mapping.put;\n \n import org.elasticsearch.action.ActionListener;\n+import org.elasticsearch.action.support.master.AcknowledgedRequestBuilder;\n import org.elasticsearch.action.support.master.MasterNodeOperationRequestBuilder;\n import org.elasticsearch.client.IndicesAdminClient;\n import org.elasticsearch.client.internal.InternalIndicesAdminClient;\n@@ -31,7 +32,7 @@ import java.util.Map;\n /**\n  *\n  */\n-public class PutMappingRequestBuilder extends MasterNodeOperationRequestBuilder<PutMappingRequest, PutMappingResponse, PutMappingRequestBuilder> {\n+public class PutMappingRequestBuilder extends AcknowledgedRequestBuilder<PutMappingRequest, PutMappingResponse, PutMappingRequestBuilder> {\n \n     public PutMappingRequestBuilder(IndicesAdminClient indicesClient) {\n         super((InternalIndicesAdminClient) indicesClient, new PutMappingRequest());\n@@ -83,24 +84,6 @@ public class PutMappingRequestBuilder extends MasterNodeOperationRequestBuilder<\n         return this;\n     }\n \n-    /**\n-     * Timeout to wait till the put mapping gets acknowledged of all current cluster nodes. Defaults to\n-     * <tt>10s</tt>.\n-     */\n-    public PutMappingRequestBuilder setTimeout(TimeValue timeout) {\n-        request.timeout(timeout);\n-        return this;\n-    }\n-\n-    /**\n-     * Timeout to wait till the put mapping gets acknowledged of all current cluster nodes. Defaults to\n-     * <tt>10s</tt>.\n-     */\n-    public PutMappingRequestBuilder setTimeout(String timeout) {\n-        request.timeout(timeout);\n-        return this;\n-    }\n-\n     /**\n      * If there is already a mapping definition registered against the type, then it will be merged. If there are\n      * elements that can't be merged are detected, the request will be rejected unless the\ndiff --git a/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse.java b/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse.java\nindex 58edc44..3316086 100644\n--- a/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse.java\n+++ b/src/main/java/org/elasticsearch/action/admin/indices/mapping/put/PutMappingResponse.java\n@@ -19,7 +19,7 @@\n \n package org.elasticsearch.action.admin.indices.mapping.put;\n \n-import org.elasticsearch.action.ActionResponse;\n+import org.elasticsearch.action.support.master.AcknowledgedResponse;\n import org.elasticsearch.common.io.stream.StreamInput;\n import org.elasticsearch.common.io.stream.StreamOutput;\n \n@@ -28,35 +28,25 @@ import java.io.IOException;\n /**\n  * The response of put mapping operation.\n  */\n-public class PutMappingResponse extends ActionResponse {\n-\n-    private boolean acknowledged;\n+public class PutMappingResponse extends AcknowledgedResponse {\n \n     PutMappingResponse() {\n \n     }\n \n     PutMappingResponse(boolean acknowledged) {\n-        this.acknowledged = acknowledged;\n-    }\n-\n-    /**\n-     * Has the put mapping creation been acknowledged by all current cluster nodes within the\n-     * provided {@link PutMappingRequest#timeout(org.elasticsearch.common.unit.TimeValue)}.\n-     */\n-    public boolean isAcknowledged() {\n-        return acknowledged;\n+        super(acknowledged);\n     }\n \n     @Override\n     public void readFrom(StreamInput in) throws IOException {\n         super.readFrom(in);\n-        acknowledged = in.readBoolean();\n+        readAcknowledged(in);\n     }\n \n     @Override\n     public void writeTo(StreamOutput out) throws IOException {\n         super.writeTo(out);\n-        out.writeBoolean(acknowledged);\n+        writeAcknowledged(out);\n     }\n }",
  "logs_path": "factory/glm-4.6/24634b85/elastic_elasticsearch_pr4229/logs.jsonl",
  "errors": [],
  "edit_run_id": "24634b85",
  "test_label": null
}