{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 134296,
  "base_commit": "df8cedf9920c8bf710221ca8579bb90f64d4faa0",
  "runner": "factory",
  "model": "glm-4.6",
  "timeout_s": 1800,
  "status": "success",
  "elapsed_ms": 384944,
  "patch_unified": "diff --git a/server/src/main/java/org/elasticsearch/http/HttpStats.java b/server/src/main/java/org/elasticsearch/http/HttpStats.java\nindex d4df9c8f..b93f417a 100644\n--- a/server/src/main/java/org/elasticsearch/http/HttpStats.java\n+++ b/server/src/main/java/org/elasticsearch/http/HttpStats.java\n@@ -14,6 +14,7 @@ import org.elasticsearch.common.io.stream.StreamInput;\n import org.elasticsearch.common.io.stream.StreamOutput;\n import org.elasticsearch.common.io.stream.Writeable;\n import org.elasticsearch.common.xcontent.ChunkedToXContent;\n+import org.elasticsearch.core.TimeValue;\n import org.elasticsearch.xcontent.ToXContent;\n import org.elasticsearch.xcontent.ToXContentFragment;\n import org.elasticsearch.xcontent.XContentBuilder;\n@@ -90,8 +91,11 @@ public record HttpStats(long serverOpen, long totalOpen, List<ClientStats> clien\n         static final String CLIENT_REMOTE_ADDRESS = \"remote_address\";\n         static final String CLIENT_LAST_URI = \"last_uri\";\n         static final String CLIENT_OPENED_TIME_MILLIS = \"opened_time_millis\";\n+        static final String CLIENT_OPENED_TIME = \"opened_time\";\n         static final String CLIENT_CLOSED_TIME_MILLIS = \"closed_time_millis\";\n+        static final String CLIENT_CLOSED_TIME = \"closed_time\";\n         static final String CLIENT_LAST_REQUEST_TIME_MILLIS = \"last_request_time_millis\";\n+        static final String CLIENT_LAST_REQUEST_TIME = \"last_request_time\";\n         static final String CLIENT_REQUEST_COUNT = \"request_count\";\n         static final String CLIENT_REQUEST_SIZE_BYTES = \"request_size_bytes\";\n         static final String CLIENT_FORWARDED_FOR = \"x_forwarded_for\";\n@@ -179,11 +183,11 @@ public record HttpStats(long serverOpen, long totalOpen, List<ClientStats> clien\n             if (opaqueId != null) {\n                 builder.field(Fields.CLIENT_OPAQUE_ID, opaqueId);\n             }\n-            builder.field(Fields.CLIENT_OPENED_TIME_MILLIS, openedTimeMillis);\n+            builder.humanReadableField(Fields.CLIENT_OPENED_TIME_MILLIS, Fields.CLIENT_OPENED_TIME, new TimeValue(openedTimeMillis));\n             if (closedTimeMillis != NOT_CLOSED) {\n-                builder.field(Fields.CLIENT_CLOSED_TIME_MILLIS, closedTimeMillis);\n+                builder.humanReadableField(Fields.CLIENT_CLOSED_TIME_MILLIS, Fields.CLIENT_CLOSED_TIME, new TimeValue(closedTimeMillis));\n             }\n-            builder.field(Fields.CLIENT_LAST_REQUEST_TIME_MILLIS, lastRequestTimeMillis);\n+            builder.humanReadableField(Fields.CLIENT_LAST_REQUEST_TIME_MILLIS, Fields.CLIENT_LAST_REQUEST_TIME, new TimeValue(lastRequestTimeMillis));\n             builder.field(Fields.CLIENT_REQUEST_COUNT, requestCount);\n             builder.field(Fields.CLIENT_REQUEST_SIZE_BYTES, requestSizeBytes);\n             builder.endObject();\ndiff --git a/server/src/test/java/org/elasticsearch/http/HttpStatsTests.java b/server/src/test/java/org/elasticsearch/http/HttpStatsTests.java\nindex f5271ce2..a1adedca 100644\n--- a/server/src/test/java/org/elasticsearch/http/HttpStatsTests.java\n+++ b/server/src/test/java/org/elasticsearch/http/HttpStatsTests.java\n@@ -75,6 +75,42 @@ public class HttpStatsTests extends ESTestCase {\n         );\n     }\n \n+    public void testClientStatsToXContentHumanTimestamps() {\n+        // Test with human=false (should only have millisecond fields)\n+        var clientStats = new HttpStats.ClientStats(\n+            12345,\n+            \"test-agent\",\n+            \"127.0.0.1:9200\",\n+            \"127.0.0.1:12345\",\n+            \"/test\",\n+            null,\n+            null,\n+            1609459200000L, // Jan 1, 2021 00:00:00 UTC\n+            HttpStats.ClientStats.NOT_CLOSED,\n+            1609459205000L, // Jan 1, 2021 00:00:05 UTC\n+            10,\n+            1024\n+        );\n+\n+        // Create HttpStats with the client stats\n+        var httpStats = new HttpStats(1, 2, List.of(clientStats), Map.of());\n+\n+        // Test without human formatting\n+        String nonHumanOutput = Strings.toString(httpStats, false, false);\n+        assertTrue(nonHumanOutput.contains(\"opened_time_millis\"));\n+        assertTrue(nonHumanOutput.contains(\"last_request_time_millis\"));\n+        // Check that the human readable fields (without _millis suffix) are NOT present\n+        assertFalse(nonHumanOutput.contains(\"\\\"opened_time\\\"\"));\n+        assertFalse(nonHumanOutput.contains(\"\\\"last_request_time\\\"\"));\n+\n+        // Test with human formatting - should contain both raw and human readable fields\n+        String humanOutput = Strings.toString(httpStats, true, true);\n+        assertTrue(humanOutput.contains(\"opened_time_millis\"));\n+        assertTrue(humanOutput.contains(\"last_request_time_millis\"));\n+        assertTrue(humanOutput.contains(\"opened_time\"));\n+        assertTrue(humanOutput.contains(\"last_request_time\"));\n+    }\n+\n     public static HttpStats randomHttpStats() {\n         return new HttpStats(\n             randomLongBetween(0, Long.MAX_VALUE),",
  "logs_path": "factory/glm-4.6/24634b85/elastic_elasticsearch_pr134296/logs.jsonl",
  "errors": [],
  "edit_run_id": "24634b85",
  "test_label": null
}