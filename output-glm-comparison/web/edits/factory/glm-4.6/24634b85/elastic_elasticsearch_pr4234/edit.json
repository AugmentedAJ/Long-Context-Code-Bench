{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 4234,
  "base_commit": "7d3b78c29327a1774695c4567bab0c40e7b97b6a",
  "runner": "factory",
  "model": "glm-4.6",
  "timeout_s": 1800,
  "status": "success",
  "elapsed_ms": 127087,
  "patch_unified": "diff --git a/src/main/java/org/elasticsearch/cluster/routing/operation/plain/PlainOperationRouting.java b/src/main/java/org/elasticsearch/cluster/routing/operation/plain/PlainOperationRouting.java\nindex 3b5376a..c33883c 100644\n--- a/src/main/java/org/elasticsearch/cluster/routing/operation/plain/PlainOperationRouting.java\n+++ b/src/main/java/org/elasticsearch/cluster/routing/operation/plain/PlainOperationRouting.java\n@@ -204,7 +204,12 @@ public class PlainOperationRouting extends AbstractComponent implements Operatio\n                 }\n             }\n             if (preference.startsWith(\"_prefer_node:\")) {\n-                return indexShard.preferNodeActiveInitializingShardsIt(preference.substring(\"_prefer_node:\".length()));\n+                String nodeId = preference.substring(\"_prefer_node:\".length());\n+                // Validate that the node exists in the cluster\n+                if (nodes.get(nodeId) == null) {\n+                    throw new ElasticSearchIllegalArgumentException(\"no node found for [_prefer_node] preference, with id [\" + nodeId + \"]\");\n+                }\n+                return indexShard.preferNodeActiveInitializingShardsIt(nodeId);\n             }\n             if (\"_local\".equals(preference)) {\n                 return indexShard.preferNodeActiveInitializingShardsIt(localNodeId);\n@@ -219,7 +224,12 @@ public class PlainOperationRouting extends AbstractComponent implements Operatio\n                 return indexShard.onlyNodeActiveInitializingShardsIt(localNodeId);\n             }\n             if (preference.startsWith(\"_only_node:\")) {\n-                return indexShard.onlyNodeActiveInitializingShardsIt(preference.substring(\"_only_node:\".length()));\n+                String nodeId = preference.substring(\"_only_node:\".length());\n+                // Validate that the node exists in the cluster\n+                if (nodes.get(nodeId) == null) {\n+                    throw new ElasticSearchIllegalArgumentException(\"no node found for [_only_node] preference, with id [\" + nodeId + \"]\");\n+                }\n+                return indexShard.onlyNodeActiveInitializingShardsIt(nodeId);\n             }\n         }\n         // if not, then use it as the index",
  "logs_path": "factory/glm-4.6/24634b85/elastic_elasticsearch_pr4234/logs.jsonl",
  "errors": [],
  "edit_run_id": "24634b85",
  "test_label": null
}