{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 134915,
  "base_commit": "dd4b8d96484bc1b0f86d7b006d79cac5916b3f45",
  "runner": "auggie",
  "model": "sonnet4.5",
  "timeout_s": 1800,
  "status": "success",
  "elapsed_ms": 243491,
  "patch_unified": "diff --git a/x-pack/plugin/esql/qa/server/single-node/src/javaRestTest/java/org/elasticsearch/xpack/esql/qa/single_node/RestEsqlIT.java b/x-pack/plugin/esql/qa/server/single-node/src/javaRestTest/java/org/elasticsearch/xpack/esql/qa/single_node/RestEsqlIT.java\nindex 458fffaa..7bbd980f 100644\n--- a/x-pack/plugin/esql/qa/server/single-node/src/javaRestTest/java/org/elasticsearch/xpack/esql/qa/single_node/RestEsqlIT.java\n+++ b/x-pack/plugin/esql/qa/server/single-node/src/javaRestTest/java/org/elasticsearch/xpack/esql/qa/single_node/RestEsqlIT.java\n@@ -27,6 +27,7 @@ import org.elasticsearch.test.cluster.LogType;\n import org.elasticsearch.xcontent.XContentBuilder;\n import org.elasticsearch.xcontent.XContentType;\n import org.elasticsearch.xcontent.json.JsonXContent;\n+import org.elasticsearch.xpack.esql.action.EsqlCapabilities;\n import org.elasticsearch.xpack.esql.core.plugin.EsqlCorePlugin;\n import org.elasticsearch.xpack.esql.core.type.DataType;\n import org.elasticsearch.xpack.esql.qa.rest.RestEsqlTestCase;\n@@ -466,7 +467,7 @@ public class RestEsqlIT extends RestEsqlTestCase {\n \n     @AwaitsFix(bugUrl = \"disabled until JOIN infrastructrure properly lands\")\n     public void testInlineStatsProfile() throws IOException {\n-        assumeTrue(\"INLINESTATS only available on snapshots\", Build.current().isSnapshot());\n+        assumeTrue(\"INLINESTATS required\", EsqlCapabilities.Cap.INLINESTATS_V11.isEnabled());\n         indexTimestampData(1);\n \n         RequestObjectBuilder builder = requestObjectBuilder().query(fromIndex() + \" | INLINESTATS AVG(value) | SORT value ASC\");\ndiff --git a/x-pack/plugin/esql/qa/server/src/main/java/org/elasticsearch/xpack/esql/qa/rest/RestEsqlTestCase.java b/x-pack/plugin/esql/qa/server/src/main/java/org/elasticsearch/xpack/esql/qa/rest/RestEsqlTestCase.java\nindex 8c3c243d..10392e42 100644\n--- a/x-pack/plugin/esql/qa/server/src/main/java/org/elasticsearch/xpack/esql/qa/rest/RestEsqlTestCase.java\n+++ b/x-pack/plugin/esql/qa/server/src/main/java/org/elasticsearch/xpack/esql/qa/rest/RestEsqlTestCase.java\n@@ -1221,7 +1221,7 @@ public abstract class RestEsqlTestCase extends ESRestTestCase {\n      * </p>\n      */\n     public void testInlineStatsNow() throws IOException {\n-        assumeTrue(\"INLINESTATS only available on snapshots\", Build.current().isSnapshot());\n+        assumeTrue(\"INLINESTATS required\", EsqlCapabilities.Cap.INLINESTATS_V11.isEnabled());\n         indexTimestampData(1);\n \n         RequestObjectBuilder builder = requestObjectBuilder().query(\ndiff --git a/x-pack/plugin/esql/src/test/java/org/elasticsearch/xpack/esql/analysis/VerifierTests.java b/x-pack/plugin/esql/src/test/java/org/elasticsearch/xpack/esql/analysis/VerifierTests.java\nindex 285add57..0d396618 100644\n--- a/x-pack/plugin/esql/src/test/java/org/elasticsearch/xpack/esql/analysis/VerifierTests.java\n+++ b/x-pack/plugin/esql/src/test/java/org/elasticsearch/xpack/esql/analysis/VerifierTests.java\n@@ -179,7 +179,7 @@ public class VerifierTests extends ESTestCase {\n                 + \" [ip] in [test1, test2, test3] and [2] other indices, [keyword] in [test6]\",\n             error(\"from test* | stats count(1) by multi_typed\", analyzer)\n         );\n-        if (EsqlCapabilities.Cap.INLINESTATS.isEnabled()) {\n+        if (EsqlCapabilities.Cap.INLINESTATS_V11.isEnabled()) {\n             assertEquals(\n                 \"1:38: Cannot use field [unsupported] with unsupported type [flattened]\",\n                 error(\"from test* | inlinestats count(1) by unsupported\", analyzer)\n@@ -200,7 +200,7 @@ public class VerifierTests extends ESTestCase {\n                 + \" [ip] in [test1, test2, test3] and [2] other indices, [keyword] in [test6]\",\n             error(\"from test* | stats values(multi_typed)\", analyzer)\n         );\n-        if (EsqlCapabilities.Cap.INLINESTATS.isEnabled()) {\n+        if (EsqlCapabilities.Cap.INLINESTATS_V11.isEnabled()) {\n             assertEquals(\n                 \"1:33: Cannot use field [unsupported] with unsupported type [flattened]\",\n                 error(\"from test* | inlinestats values(unsupported)\", analyzer)\ndiff --git a/x-pack/plugin/esql/src/test/java/org/elasticsearch/xpack/esql/parser/StatementParserTests.java b/x-pack/plugin/esql/src/test/java/org/elasticsearch/xpack/esql/parser/StatementParserTests.java\nindex d909ef88..ba89d631 100644\n--- a/x-pack/plugin/esql/src/test/java/org/elasticsearch/xpack/esql/parser/StatementParserTests.java\n+++ b/x-pack/plugin/esql/src/test/java/org/elasticsearch/xpack/esql/parser/StatementParserTests.java\n@@ -396,15 +396,8 @@ public class StatementParserTests extends AbstractStatementParserTests {\n     }\n \n     public void testInlineStatsWithGroups() {\n+        assumeTrue(\"INLINESTATS required\", EsqlCapabilities.Cap.INLINESTATS_V11.isEnabled());\n         var query = \"inlinestats b = min(a) by c, d.e\";\n-        if (Build.current().isSnapshot() == false) {\n-            expectThrows(\n-                ParsingException.class,\n-                containsString(\"line 1:13: mismatched input 'inlinestats' expecting {\"),\n-                () -> processingCommand(query)\n-            );\n-            return;\n-        }\n         assertEquals(\n             new InlineStats(\n                 EMPTY,\n@@ -424,15 +417,8 @@ public class StatementParserTests extends AbstractStatementParserTests {\n     }\n \n     public void testInlineStatsWithoutGroups() {\n+        assumeTrue(\"INLINESTATS required\", EsqlCapabilities.Cap.INLINESTATS_V11.isEnabled());\n         var query = \"inlinestats min(a), c = 1\";\n-        if (Build.current().isSnapshot() == false) {\n-            expectThrows(\n-                ParsingException.class,\n-                containsString(\"line 1:13: mismatched input 'inlinestats' expecting {\"),\n-                () -> processingCommand(query)\n-            );\n-            return;\n-        }\n         assertEquals(\n             new InlineStats(\n                 EMPTY,",
  "logs_path": "auggie/sonnet4.5/7ad89f22/elastic_elasticsearch_pr134915/logs.jsonl",
  "errors": [],
  "edit_run_id": "7ad89f22",
  "test_label": "v1-rollouts-1-3-sonnet4.5"
}