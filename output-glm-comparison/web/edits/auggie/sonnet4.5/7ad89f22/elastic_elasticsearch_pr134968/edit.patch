diff --git a/.buildkite/scripts/update-transport-versions.sh b/.buildkite/scripts/update-transport-versions.sh
index c3ae067f..439d237e 100755
--- a/.buildkite/scripts/update-transport-versions.sh
+++ b/.buildkite/scripts/update-transport-versions.sh
@@ -36,11 +36,21 @@ if git diff --exit-code; then
   exit 0
 fi
 
+# Check if there are any non-transport changes
+if git diff --exit-code -- ':!server/src/main/resources/transport/'; then
+  echo "Only transport version changes detected, proceeding with auto-commit"
+else
+  echo "Non-transport changes detected, skipping auto-commit"
+  echo "The following non-transport files have changes:"
+  git diff --name-only -- ':!server/src/main/resources/transport/'
+  exit 0
+fi
+
 git config --global user.name elasticsearchmachine
 git config --global user.email 'infra-root+elasticsearchmachine@elastic.co'
 
 gh pr checkout "${BUILDKITE_PULL_REQUEST}"
-git add -A .
+git add server/src/main/resources/transport/
 git commit -m "$NEW_COMMIT_MESSAGE"
 git push
 