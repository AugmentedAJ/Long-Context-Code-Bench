{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 4466,
  "base_commit": "f4bf0d5112b5c6f29b651586d72c3972db5a2834",
  "runner": "auggie",
  "model": "sonnet4.5",
  "timeout_s": 1800,
  "status": "success",
  "elapsed_ms": 168525,
  "patch_unified": "diff --git a/src/main/java/org/elasticsearch/common/unit/ByteSizeValue.java b/src/main/java/org/elasticsearch/common/unit/ByteSizeValue.java\nindex 0c4e9b1..ad15024 100644\n--- a/src/main/java/org/elasticsearch/common/unit/ByteSizeValue.java\n+++ b/src/main/java/org/elasticsearch/common/unit/ByteSizeValue.java\n@@ -143,19 +143,20 @@ public class ByteSizeValue implements Serializable, Streamable {\n         }\n         long bytes;\n         try {\n-            if (sValue.endsWith(\"k\") || sValue.endsWith(\"K\")) {\n+            String lowerSValue = sValue.toLowerCase();\n+            if (lowerSValue.endsWith(\"k\")) {\n                 bytes = (long) (Double.parseDouble(sValue.substring(0, sValue.length() - 1)) * ByteSizeUnit.C1);\n-            } else if (sValue.endsWith(\"kb\")) {\n+            } else if (lowerSValue.endsWith(\"kb\")) {\n                 bytes = (long) (Double.parseDouble(sValue.substring(0, sValue.length() - 2)) * ByteSizeUnit.C1);\n-            } else if (sValue.endsWith(\"m\") || sValue.endsWith(\"M\")) {\n+            } else if (lowerSValue.endsWith(\"m\")) {\n                 bytes = (long) (Double.parseDouble(sValue.substring(0, sValue.length() - 1)) * ByteSizeUnit.C2);\n-            } else if (sValue.endsWith(\"mb\")) {\n+            } else if (lowerSValue.endsWith(\"mb\")) {\n                 bytes = (long) (Double.parseDouble(sValue.substring(0, sValue.length() - 2)) * ByteSizeUnit.C2);\n-            } else if (sValue.endsWith(\"g\") || sValue.endsWith(\"G\")) {\n+            } else if (lowerSValue.endsWith(\"g\")) {\n                 bytes = (long) (Double.parseDouble(sValue.substring(0, sValue.length() - 1)) * ByteSizeUnit.C3);\n-            } else if (sValue.endsWith(\"gb\")) {\n+            } else if (lowerSValue.endsWith(\"gb\")) {\n                 bytes = (long) (Double.parseDouble(sValue.substring(0, sValue.length() - 2)) * ByteSizeUnit.C3);\n-            } else if (sValue.endsWith(\"b\")) {\n+            } else if (lowerSValue.endsWith(\"b\")) {\n                 bytes = Long.parseLong(sValue.substring(0, sValue.length() - 1));\n             } else {\n                 bytes = Long.parseLong(sValue);\ndiff --git a/src/main/java/org/elasticsearch/common/unit/SizeValue.java b/src/main/java/org/elasticsearch/common/unit/SizeValue.java\nindex 4430dc5..2f59a56 100644\n--- a/src/main/java/org/elasticsearch/common/unit/SizeValue.java\n+++ b/src/main/java/org/elasticsearch/common/unit/SizeValue.java\n@@ -134,13 +134,14 @@ public class SizeValue implements Serializable, Streamable {\n         }\n         long singles;\n         try {\n-            if (sValue.endsWith(\"b\")) {\n+            String lowerSValue = sValue.toLowerCase();\n+            if (lowerSValue.endsWith(\"b\")) {\n                 singles = Long.parseLong(sValue.substring(0, sValue.length() - 1));\n-            } else if (sValue.endsWith(\"k\") || sValue.endsWith(\"K\")) {\n+            } else if (lowerSValue.endsWith(\"k\")) {\n                 singles = (long) (Double.parseDouble(sValue.substring(0, sValue.length() - 1)) * SizeUnit.C1);\n-            } else if (sValue.endsWith(\"m\") || sValue.endsWith(\"M\")) {\n+            } else if (lowerSValue.endsWith(\"m\")) {\n                 singles = (long) (Double.parseDouble(sValue.substring(0, sValue.length() - 1)) * SizeUnit.C2);\n-            } else if (sValue.endsWith(\"g\") || sValue.endsWith(\"G\")) {\n+            } else if (lowerSValue.endsWith(\"g\")) {\n                 singles = (long) (Double.parseDouble(sValue.substring(0, sValue.length() - 1)) * SizeUnit.C3);\n             } else {\n                 singles = Long.parseLong(sValue);\ndiff --git a/src/test/java/org/elasticsearch/common/unit/ByteSizeValueTests.java b/src/test/java/org/elasticsearch/common/unit/ByteSizeValueTests.java\nindex 17d6437..3b325fc 100644\n--- a/src/test/java/org/elasticsearch/common/unit/ByteSizeValueTests.java\n+++ b/src/test/java/org/elasticsearch/common/unit/ByteSizeValueTests.java\n@@ -53,4 +53,31 @@ public class ByteSizeValueTests extends ElasticsearchTestCase {\n         assertThat(\"1.5gb\", is(new ByteSizeValue((long) (1024 * 1.5), ByteSizeUnit.MB).toString()));\n         assertThat(\"1536gb\", is(new ByteSizeValue((long) (1024 * 1.5), ByteSizeUnit.GB).toString()));\n     }\n+\n+    @Test\n+    public void testParseCaseInsensitive() {\n+        // Test lowercase\n+        assertThat(ByteSizeValue.parseBytesSizeValue(\"12gb\").bytes(), equalTo(12L * 1024 * 1024 * 1024));\n+        assertThat(ByteSizeValue.parseBytesSizeValue(\"12mb\").bytes(), equalTo(12L * 1024 * 1024));\n+        assertThat(ByteSizeValue.parseBytesSizeValue(\"12kb\").bytes(), equalTo(12L * 1024));\n+        assertThat(ByteSizeValue.parseBytesSizeValue(\"12g\").bytes(), equalTo(12L * 1024 * 1024 * 1024));\n+        assertThat(ByteSizeValue.parseBytesSizeValue(\"12m\").bytes(), equalTo(12L * 1024 * 1024));\n+        assertThat(ByteSizeValue.parseBytesSizeValue(\"12k\").bytes(), equalTo(12L * 1024));\n+\n+        // Test uppercase\n+        assertThat(ByteSizeValue.parseBytesSizeValue(\"12GB\").bytes(), equalTo(12L * 1024 * 1024 * 1024));\n+        assertThat(ByteSizeValue.parseBytesSizeValue(\"12MB\").bytes(), equalTo(12L * 1024 * 1024));\n+        assertThat(ByteSizeValue.parseBytesSizeValue(\"12KB\").bytes(), equalTo(12L * 1024));\n+        assertThat(ByteSizeValue.parseBytesSizeValue(\"12G\").bytes(), equalTo(12L * 1024 * 1024 * 1024));\n+        assertThat(ByteSizeValue.parseBytesSizeValue(\"12M\").bytes(), equalTo(12L * 1024 * 1024));\n+        assertThat(ByteSizeValue.parseBytesSizeValue(\"12K\").bytes(), equalTo(12L * 1024));\n+\n+        // Test mixed case\n+        assertThat(ByteSizeValue.parseBytesSizeValue(\"12Gb\").bytes(), equalTo(12L * 1024 * 1024 * 1024));\n+        assertThat(ByteSizeValue.parseBytesSizeValue(\"12Mb\").bytes(), equalTo(12L * 1024 * 1024));\n+        assertThat(ByteSizeValue.parseBytesSizeValue(\"12Kb\").bytes(), equalTo(12L * 1024));\n+        assertThat(ByteSizeValue.parseBytesSizeValue(\"12gB\").bytes(), equalTo(12L * 1024 * 1024 * 1024));\n+        assertThat(ByteSizeValue.parseBytesSizeValue(\"12mB\").bytes(), equalTo(12L * 1024 * 1024));\n+        assertThat(ByteSizeValue.parseBytesSizeValue(\"12kB\").bytes(), equalTo(12L * 1024));\n+    }\n }",
  "logs_path": "auggie/sonnet4.5/7ad89f22/elastic_elasticsearch_pr4466/logs.jsonl",
  "errors": [],
  "edit_run_id": "7ad89f22",
  "test_label": "v1-rollouts-1-3-sonnet4.5"
}