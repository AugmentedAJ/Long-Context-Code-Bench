{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 134887,
  "base_commit": "987e7af02b69cd4bb25755aa47e91a6a4bbebf1d",
  "runner": "auggie",
  "model": "sonnet4.5",
  "timeout_s": 1800,
  "status": "success",
  "elapsed_ms": 200462,
  "patch_unified": "diff --git a/modules/mapper-extras/src/main/java/org/elasticsearch/index/mapper/extras/MatchOnlyTextFieldMapper.java b/modules/mapper-extras/src/main/java/org/elasticsearch/index/mapper/extras/MatchOnlyTextFieldMapper.java\nindex 1d9fd9cb..91facbac 100644\n--- a/modules/mapper-extras/src/main/java/org/elasticsearch/index/mapper/extras/MatchOnlyTextFieldMapper.java\n+++ b/modules/mapper-extras/src/main/java/org/elasticsearch/index/mapper/extras/MatchOnlyTextFieldMapper.java\n@@ -301,9 +301,11 @@ public class MatchOnlyTextFieldMapper extends FieldMapper {\n                 String name = storedFieldNameForSyntheticSource();\n                 return storedFieldFetcher(name);\n             }\n+            // Extract SourceProvider and ValueFetcher before lambda to avoid capturing SearchExecutionContext reference\n+            // which is a short-lived object that should not be held by queries\n+            SourceProvider sourceProvider = searchExecutionContext.lookup();\n+            ValueFetcher valueFetcher = valueFetcher(searchExecutionContext, null);\n             return context -> {\n-                ValueFetcher valueFetcher = valueFetcher(searchExecutionContext, null);\n-                SourceProvider sourceProvider = searchExecutionContext.lookup();\n                 valueFetcher.setNextReader(context);\n                 return docID -> {\n                     try {\ndiff --git a/x-pack/plugin/logsdb/src/main/java/org/elasticsearch/xpack/logsdb/patternedtext/PatternedTextFieldType.java b/x-pack/plugin/logsdb/src/main/java/org/elasticsearch/xpack/logsdb/patternedtext/PatternedTextFieldType.java\nindex 35f10475..ca257641 100644\n--- a/x-pack/plugin/logsdb/src/main/java/org/elasticsearch/xpack/logsdb/patternedtext/PatternedTextFieldType.java\n+++ b/x-pack/plugin/logsdb/src/main/java/org/elasticsearch/xpack/logsdb/patternedtext/PatternedTextFieldType.java\n@@ -118,9 +118,11 @@ public class PatternedTextFieldType extends StringFieldType {\n     private IOFunction<LeafReaderContext, CheckedIntFunction<List<Object>, IOException>> getValueFetcherProvider(\n         SearchExecutionContext searchExecutionContext\n     ) {\n+        // Extract SourceProvider and ValueFetcher before lambda to avoid capturing SearchExecutionContext reference\n+        // which is a short-lived object that should not be held by queries\n+        SourceProvider sourceProvider = searchExecutionContext.lookup();\n+        ValueFetcher valueFetcher = valueFetcher(searchExecutionContext, null);\n         return context -> {\n-            ValueFetcher valueFetcher = valueFetcher(searchExecutionContext, null);\n-            SourceProvider sourceProvider = searchExecutionContext.lookup();\n             valueFetcher.setNextReader(context);\n             return docID -> {\n                 try {",
  "logs_path": "auggie/sonnet4.5/7ad89f22/elastic_elasticsearch_pr134887/logs.jsonl",
  "errors": [],
  "edit_run_id": "7ad89f22",
  "test_label": "v1-rollouts-1-3-sonnet4.5"
}