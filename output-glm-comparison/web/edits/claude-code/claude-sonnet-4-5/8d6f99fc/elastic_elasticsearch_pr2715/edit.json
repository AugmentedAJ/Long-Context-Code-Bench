{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 2715,
  "base_commit": "b03f3fcd6c504bfc8a5054a3e81c88930f38b5cd",
  "runner": "claude-code",
  "model": "claude-sonnet-4-5",
  "timeout_s": 1800,
  "status": "success",
  "elapsed_ms": 250784,
  "patch_unified": "diff --git a/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java b/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java\nindex 1293a69..46d6d91 100644\n--- a/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java\n+++ b/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java\n@@ -281,6 +281,14 @@ public class BulkRequest extends ActionRequest<BulkRequest> {\n                         } else if (\"percolate\".equals(currentFieldName) || \"_percolate\".equals(currentFieldName)) {\n                             percolate = parser.textOrNull();\n                         }\n+                    } else if (token == XContentParser.Token.START_ARRAY) {\n+                        if (\"_id\".equals(currentFieldName)) {\n+                            throw new IllegalArgumentException(\"_id field cannot be an array\");\n+                        }\n+                    } else if (token == XContentParser.Token.START_OBJECT) {\n+                        if (\"_id\".equals(currentFieldName)) {\n+                            throw new IllegalArgumentException(\"_id field cannot be an object\");\n+                        }\n                     }\n                 }\n \ndiff --git a/src/main/java/org/elasticsearch/action/get/MultiGetRequest.java b/src/main/java/org/elasticsearch/action/get/MultiGetRequest.java\nindex b087dc9..9f5dad4 100644\n--- a/src/main/java/org/elasticsearch/action/get/MultiGetRequest.java\n+++ b/src/main/java/org/elasticsearch/action/get/MultiGetRequest.java\n@@ -261,12 +261,18 @@ public class MultiGetRequest extends ActionRequest<MultiGetRequest> {\n                                         routing = parser.text();\n                                     }\n                                 } else if (token == XContentParser.Token.START_ARRAY) {\n-                                    if (\"fields\".equals(currentFieldName)) {\n+                                    if (\"_id\".equals(currentFieldName)) {\n+                                        throw new ElasticSearchIllegalArgumentException(\"_id field cannot be an array\");\n+                                    } else if (\"fields\".equals(currentFieldName)) {\n                                         fields = new ArrayList<String>();\n                                         while ((token = parser.nextToken()) != XContentParser.Token.END_ARRAY) {\n                                             fields.add(parser.text());\n                                         }\n                                     }\n+                                } else if (token == XContentParser.Token.START_OBJECT) {\n+                                    if (\"_id\".equals(currentFieldName)) {\n+                                        throw new ElasticSearchIllegalArgumentException(\"_id field cannot be an object\");\n+                                    }\n                                 }\n                             }\n                             String[] aFields;\ndiff --git a/src/main/java/org/elasticsearch/index/query/GeoShapeFilterParser.java b/src/main/java/org/elasticsearch/index/query/GeoShapeFilterParser.java\nindex 846ac5e..fe061d1 100644\n--- a/src/main/java/org/elasticsearch/index/query/GeoShapeFilterParser.java\n+++ b/src/main/java/org/elasticsearch/index/query/GeoShapeFilterParser.java\n@@ -125,6 +125,14 @@ public class GeoShapeFilterParser implements FilterParser {\n                                     } else if (\"shape_field_name\".equals(currentFieldName)) {\n                                         shapeFieldName = parser.text();\n                                     }\n+                                } else if (token == XContentParser.Token.START_ARRAY) {\n+                                    if (\"id\".equals(currentFieldName)) {\n+                                        throw new QueryParsingException(parseContext.index(), \"id field cannot be an array\");\n+                                    }\n+                                } else if (token == XContentParser.Token.START_OBJECT) {\n+                                    if (\"id\".equals(currentFieldName)) {\n+                                        throw new QueryParsingException(parseContext.index(), \"id field cannot be an object\");\n+                                    }\n                                 }\n                             }\n                             if (id == null) {\ndiff --git a/src/main/java/org/elasticsearch/index/query/GeoShapeQueryParser.java b/src/main/java/org/elasticsearch/index/query/GeoShapeQueryParser.java\nindex 1e12934..bd77f4e 100644\n--- a/src/main/java/org/elasticsearch/index/query/GeoShapeQueryParser.java\n+++ b/src/main/java/org/elasticsearch/index/query/GeoShapeQueryParser.java\n@@ -101,6 +101,14 @@ public class GeoShapeQueryParser implements QueryParser {\n                                     } else if (\"shape_field_name\".equals(currentFieldName)) {\n                                         shapeFieldName = parser.text();\n                                     }\n+                                } else if (token == XContentParser.Token.START_ARRAY) {\n+                                    if (\"id\".equals(currentFieldName)) {\n+                                        throw new QueryParsingException(parseContext.index(), \"id field cannot be an array\");\n+                                    }\n+                                } else if (token == XContentParser.Token.START_OBJECT) {\n+                                    if (\"id\".equals(currentFieldName)) {\n+                                        throw new QueryParsingException(parseContext.index(), \"id field cannot be an object\");\n+                                    }\n                                 }\n                             }\n                             if (id == null) {\ndiff --git a/src/main/java/org/elasticsearch/index/query/TermsFilterParser.java b/src/main/java/org/elasticsearch/index/query/TermsFilterParser.java\nindex fe84751..0fa91e8 100644\n--- a/src/main/java/org/elasticsearch/index/query/TermsFilterParser.java\n+++ b/src/main/java/org/elasticsearch/index/query/TermsFilterParser.java\n@@ -112,6 +112,14 @@ public class TermsFilterParser implements FilterParser {\n                         } else {\n                             throw new QueryParsingException(parseContext.index(), \"[terms] filter does not support [\" + currentFieldName + \"] within lookup element\");\n                         }\n+                    } else if (token == XContentParser.Token.START_ARRAY) {\n+                        if (\"id\".equals(currentFieldName)) {\n+                            throw new QueryParsingException(parseContext.index(), \"id field cannot be an array\");\n+                        }\n+                    } else if (token == XContentParser.Token.START_OBJECT) {\n+                        if (\"id\".equals(currentFieldName)) {\n+                            throw new QueryParsingException(parseContext.index(), \"id field cannot be an object\");\n+                        }\n                     }\n                 }\n                 if (lookupType == null) {",
  "logs_path": "claude-code/claude-sonnet-4-5/8d6f99fc/elastic_elasticsearch_pr2715/logs.jsonl",
  "errors": [],
  "edit_run_id": "8d6f99fc",
  "test_label": "v1-rollouts-1-3-sonnet4.5"
}