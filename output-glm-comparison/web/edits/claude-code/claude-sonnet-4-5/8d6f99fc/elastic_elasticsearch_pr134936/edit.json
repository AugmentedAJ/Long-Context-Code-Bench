{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 134936,
  "base_commit": "0d0c0ad2354f522d2dbd3ecd2db295f3cf085ba0",
  "runner": "claude-code",
  "model": "claude-sonnet-4-5",
  "timeout_s": 1800,
  "status": "success",
  "elapsed_ms": 108569,
  "patch_unified": "diff --git a/server/src/main/java/org/elasticsearch/ingest/ConditionalProcessor.java b/server/src/main/java/org/elasticsearch/ingest/ConditionalProcessor.java\nindex 24e093d5..95a9e72d 100644\n--- a/server/src/main/java/org/elasticsearch/ingest/ConditionalProcessor.java\n+++ b/server/src/main/java/org/elasticsearch/ingest/ConditionalProcessor.java\n@@ -158,6 +158,8 @@ public class ConditionalProcessor extends AbstractProcessor implements WrappingP\n             return new UnmodifiableIngestData((Map<String, Object>) raw);\n         } else if (raw instanceof List) {\n             return new UnmodifiableIngestList((List<Object>) raw);\n+        } else if (raw instanceof Set) {\n+            return Collections.unmodifiableSet((Set<?>) raw);\n         } else if (raw instanceof byte[] bytes) {\n             return bytes.clone();\n         }\ndiff --git a/server/src/test/java/org/elasticsearch/ingest/ConditionalProcessorTests.java b/server/src/test/java/org/elasticsearch/ingest/ConditionalProcessorTests.java\nindex 1317233d..29174aa2 100644\n--- a/server/src/test/java/org/elasticsearch/ingest/ConditionalProcessorTests.java\n+++ b/server/src/test/java/org/elasticsearch/ingest/ConditionalProcessorTests.java\n@@ -26,8 +26,10 @@ import org.elasticsearch.test.ESTestCase;\n import java.text.ParseException;\n import java.util.ArrayList;\n import java.util.HashMap;\n+import java.util.HashSet;\n import java.util.List;\n import java.util.Map;\n+import java.util.Set;\n import java.util.concurrent.TimeUnit;\n import java.util.concurrent.atomic.AtomicBoolean;\n import java.util.function.BiConsumer;\n@@ -141,6 +143,8 @@ public class ConditionalProcessorTests extends ESTestCase {\n         assertMutatingCtxThrows(ctx -> ctx.put(\"foo\", \"bar\"));\n         assertMutatingCtxThrows(ctx -> ((List<Object>) ctx.get(\"listField\")).add(\"bar\"));\n         assertMutatingCtxThrows(ctx -> ((List<Object>) ctx.get(\"listField\")).remove(\"bar\"));\n+        assertMutatingCtxThrows(ctx -> ((Set<Object>) ctx.get(\"setField\")).add(\"bar\"));\n+        assertMutatingCtxThrows(ctx -> ((Set<Object>) ctx.get(\"setField\")).remove(\"bar\"));\n     }\n \n     public void testPrecompiledError() {\n@@ -221,6 +225,7 @@ public class ConditionalProcessorTests extends ESTestCase {\n         );\n         IngestDocument ingestDocument = RandomDocumentPicks.randomIngestDocument(random(), document);\n         ingestDocument.setFieldValue(\"listField\", new ArrayList<>());\n+        ingestDocument.setFieldValue(\"setField\", new HashSet<>());\n         execProcessor(processor, ingestDocument, (result, e) -> {});\n         Exception e = safeGet(expectedException);\n         assertThat(e, instanceOf(UnsupportedOperationException.class));",
  "logs_path": "claude-code/claude-sonnet-4-5/8d6f99fc/elastic_elasticsearch_pr134936/logs.jsonl",
  "errors": [],
  "edit_run_id": "8d6f99fc",
  "test_label": "v1-rollouts-1-3-sonnet4.5"
}