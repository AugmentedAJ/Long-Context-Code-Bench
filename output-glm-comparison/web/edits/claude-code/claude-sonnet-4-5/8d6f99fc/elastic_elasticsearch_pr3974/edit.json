{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 3974,
  "base_commit": "0e9c049da1231968a56a9abbd5178f07bc49b320",
  "runner": "claude-code",
  "model": "claude-sonnet-4-5",
  "timeout_s": 1800,
  "status": "success",
  "elapsed_ms": 191818,
  "patch_unified": "diff --git a/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/delete/RestDeleteWarmerAction.java b/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/delete/RestDeleteWarmerAction.java\nindex 8682d95..a1838bb 100644\n--- a/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/delete/RestDeleteWarmerAction.java\n+++ b/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/delete/RestDeleteWarmerAction.java\n@@ -19,21 +19,16 @@\n \n package org.elasticsearch.rest.action.admin.indices.warmer.delete;\n \n-import org.elasticsearch.action.ActionListener;\n import org.elasticsearch.action.admin.indices.warmer.delete.DeleteWarmerRequest;\n import org.elasticsearch.action.admin.indices.warmer.delete.DeleteWarmerResponse;\n import org.elasticsearch.client.Client;\n import org.elasticsearch.common.Strings;\n import org.elasticsearch.common.inject.Inject;\n import org.elasticsearch.common.settings.Settings;\n-import org.elasticsearch.common.xcontent.XContentBuilder;\n import org.elasticsearch.rest.*;\n-import org.elasticsearch.rest.action.support.RestXContentBuilder;\n-\n-import java.io.IOException;\n+import org.elasticsearch.rest.action.support.RestActions;\n \n import static org.elasticsearch.rest.RestRequest.Method.DELETE;\n-import static org.elasticsearch.rest.RestStatus.OK;\n \n /**\n  */\n@@ -54,29 +49,7 @@ public class RestDeleteWarmerAction extends BaseRestHandler {\n         deleteWarmerRequest.listenerThreaded(false);\n         deleteWarmerRequest.timeout(request.paramAsTime(\"timeout\", deleteWarmerRequest.timeout()));\n         deleteWarmerRequest.masterNodeTimeout(request.paramAsTime(\"master_timeout\", deleteWarmerRequest.masterNodeTimeout()));\n-        client.admin().indices().deleteWarmer(deleteWarmerRequest, new ActionListener<DeleteWarmerResponse>() {\n-            @Override\n-            public void onResponse(DeleteWarmerResponse response) {\n-                try {\n-                    XContentBuilder builder = RestXContentBuilder.restContentBuilder(request);\n-                    builder.startObject()\n-                            .field(\"ok\", true)\n-                            .field(\"acknowledged\", response.isAcknowledged());\n-                    builder.endObject();\n-                    channel.sendResponse(new XContentRestResponse(request, OK, builder));\n-                } catch (IOException e) {\n-                    onFailure(e);\n-                }\n-            }\n-\n-            @Override\n-            public void onFailure(Throwable e) {\n-                try {\n-                    channel.sendResponse(new XContentThrowableRestResponse(request, e));\n-                } catch (IOException e1) {\n-                    logger.error(\"Failed to send failure response\", e1);\n-                }\n-            }\n-        });\n+        client.admin().indices().deleteWarmer(deleteWarmerRequest,\n+                RestActions.newAcknowledgedResponseActionListener(request, channel, logger));\n     }\n }\ndiff --git a/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/put/RestPutWarmerAction.java b/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/put/RestPutWarmerAction.java\nindex 47ee0f0..f5738a2 100644\n--- a/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/put/RestPutWarmerAction.java\n+++ b/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/put/RestPutWarmerAction.java\n@@ -19,7 +19,6 @@\n \n package org.elasticsearch.rest.action.admin.indices.warmer.put;\n \n-import org.elasticsearch.action.ActionListener;\n import org.elasticsearch.action.admin.indices.warmer.put.PutWarmerRequest;\n import org.elasticsearch.action.admin.indices.warmer.put.PutWarmerResponse;\n import org.elasticsearch.action.search.SearchRequest;\n@@ -27,14 +26,10 @@ import org.elasticsearch.client.Client;\n import org.elasticsearch.common.Strings;\n import org.elasticsearch.common.inject.Inject;\n import org.elasticsearch.common.settings.Settings;\n-import org.elasticsearch.common.xcontent.XContentBuilder;\n import org.elasticsearch.rest.*;\n-import org.elasticsearch.rest.action.support.RestXContentBuilder;\n-\n-import java.io.IOException;\n+import org.elasticsearch.rest.action.support.RestActions;\n \n import static org.elasticsearch.rest.RestRequest.Method.PUT;\n-import static org.elasticsearch.rest.RestStatus.OK;\n \n /**\n  */\n@@ -57,29 +52,7 @@ public class RestPutWarmerAction extends BaseRestHandler {\n         putWarmerRequest.searchRequest(searchRequest);\n         putWarmerRequest.timeout(request.paramAsTime(\"timeout\", putWarmerRequest.timeout()));\n         putWarmerRequest.masterNodeTimeout(request.paramAsTime(\"master_timeout\", putWarmerRequest.masterNodeTimeout()));\n-        client.admin().indices().putWarmer(putWarmerRequest, new ActionListener<PutWarmerResponse>() {\n-            @Override\n-            public void onResponse(PutWarmerResponse response) {\n-                try {\n-                    XContentBuilder builder = RestXContentBuilder.restContentBuilder(request);\n-                    builder.startObject()\n-                            .field(\"ok\", true)\n-                            .field(\"acknowledged\", response.isAcknowledged());\n-                    builder.endObject();\n-                    channel.sendResponse(new XContentRestResponse(request, OK, builder));\n-                } catch (IOException e) {\n-                    onFailure(e);\n-                }\n-            }\n-\n-            @Override\n-            public void onFailure(Throwable e) {\n-                try {\n-                    channel.sendResponse(new XContentThrowableRestResponse(request, e));\n-                } catch (IOException e1) {\n-                    logger.error(\"Failed to send failure response\", e1);\n-                }\n-            }\n-        });\n+        client.admin().indices().putWarmer(putWarmerRequest,\n+                RestActions.newAcknowledgedResponseActionListener(request, channel, logger));\n     }\n }\ndiff --git a/src/main/java/org/elasticsearch/rest/action/support/RestActions.java b/src/main/java/org/elasticsearch/rest/action/support/RestActions.java\nindex 7df94db..00a4654 100644\n--- a/src/main/java/org/elasticsearch/rest/action/support/RestActions.java\n+++ b/src/main/java/org/elasticsearch/rest/action/support/RestActions.java\n@@ -20,17 +20,25 @@\n package org.elasticsearch.rest.action.support;\n \n import org.elasticsearch.ElasticSearchIllegalArgumentException;\n+import org.elasticsearch.action.ActionListener;\n import org.elasticsearch.action.ShardOperationFailedException;\n import org.elasticsearch.action.support.broadcast.BroadcastOperationResponse;\n+import org.elasticsearch.action.support.master.AcknowledgedResponse;\n import org.elasticsearch.common.bytes.BytesReference;\n+import org.elasticsearch.common.logging.ESLogger;\n import org.elasticsearch.common.xcontent.XContentBuilder;\n import org.elasticsearch.common.xcontent.XContentBuilderString;\n import org.elasticsearch.index.query.QueryBuilders;\n import org.elasticsearch.index.query.QueryStringQueryBuilder;\n+import org.elasticsearch.rest.RestChannel;\n import org.elasticsearch.rest.RestRequest;\n+import org.elasticsearch.rest.XContentRestResponse;\n+import org.elasticsearch.rest.XContentThrowableRestResponse;\n \n import java.io.IOException;\n \n+import static org.elasticsearch.rest.RestStatus.OK;\n+\n /**\n  *\n  */\n@@ -101,4 +109,42 @@ public class RestActions {\n         }\n         return queryBuilder.buildAsBytes();\n     }\n+\n+    /**\n+     * Creates an ActionListener that handles acknowledged responses by sending\n+     * a REST response with {\"ok\": true, \"acknowledged\": boolean}.\n+     *\n+     * @param request the REST request\n+     * @param channel the REST channel to send the response to\n+     * @param logger the logger to use for error messages\n+     * @param <T> the response type that extends AcknowledgedResponse\n+     * @return an ActionListener that handles the acknowledged response\n+     */\n+    public static <T extends AcknowledgedResponse> ActionListener<T> newAcknowledgedResponseActionListener(\n+            final RestRequest request, final RestChannel channel, final ESLogger logger) {\n+        return new ActionListener<T>() {\n+            @Override\n+            public void onResponse(T response) {\n+                try {\n+                    XContentBuilder builder = RestXContentBuilder.restContentBuilder(request);\n+                    builder.startObject()\n+                            .field(\"ok\", true)\n+                            .field(\"acknowledged\", response.isAcknowledged());\n+                    builder.endObject();\n+                    channel.sendResponse(new XContentRestResponse(request, OK, builder));\n+                } catch (IOException e) {\n+                    onFailure(e);\n+                }\n+            }\n+\n+            @Override\n+            public void onFailure(Throwable e) {\n+                try {\n+                    channel.sendResponse(new XContentThrowableRestResponse(request, e));\n+                } catch (IOException e1) {\n+                    logger.error(\"Failed to send failure response\", e1);\n+                }\n+            }\n+        };\n+    }\n }",
  "logs_path": "claude-code/claude-sonnet-4-5/8d6f99fc/elastic_elasticsearch_pr3974/logs.jsonl",
  "errors": [],
  "edit_run_id": "8d6f99fc",
  "test_label": "v1-rollouts-1-3-sonnet4.5"
}