diff --git a/src/main/java/org/elasticsearch/common/util/concurrent/EsThreadPoolExecutor.java b/src/main/java/org/elasticsearch/common/util/concurrent/EsThreadPoolExecutor.java
index 86301ec..40443bd 100644
--- a/src/main/java/org/elasticsearch/common/util/concurrent/EsThreadPoolExecutor.java
+++ b/src/main/java/org/elasticsearch/common/util/concurrent/EsThreadPoolExecutor.java
@@ -44,17 +44,21 @@ public class EsThreadPoolExecutor extends ThreadPoolExecutor {
     }
 
     public void shutdown(ShutdownListener listener) {
+        boolean terminated = false;
         synchronized (monitor) {
             if (this.listener != null) {
                 throw new ElasticSearchIllegalStateException("Shutdown was already called on this thread pool");
             }
             if (isTerminated()) {
-                listener.onTerminated();
+                terminated = true;
             } else {
                 this.listener = listener;
             }
-            shutdown();
         }
+        if (terminated) {
+            listener.onTerminated();
+        }
+        super.shutdown();
     }
 
     @Override