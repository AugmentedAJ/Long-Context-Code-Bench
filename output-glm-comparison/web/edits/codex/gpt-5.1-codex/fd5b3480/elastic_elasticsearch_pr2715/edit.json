{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 2715,
  "base_commit": "b03f3fcd6c504bfc8a5054a3e81c88930f38b5cd",
  "runner": "codex",
  "model": "gpt-5.1-codex",
  "timeout_s": 10800,
  "status": "success",
  "elapsed_ms": 104958,
  "patch_unified": "diff --git a/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java b/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java\nindex 1293a69..c9e6a12 100644\n--- a/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java\n+++ b/src/main/java/org/elasticsearch/action/bulk/BulkRequest.java\n@@ -21,6 +21,7 @@ package org.elasticsearch.action.bulk;\n \n import com.google.common.collect.Lists;\n import org.elasticsearch.ElasticSearchIllegalArgumentException;\n+import org.elasticsearch.ElasticSearchParseException;\n import org.elasticsearch.action.ActionRequest;\n import org.elasticsearch.action.ActionRequestValidationException;\n import org.elasticsearch.action.WriteConsistencyLevel;\n@@ -281,6 +282,10 @@ public class BulkRequest extends ActionRequest<BulkRequest> {\n                         } else if (\"percolate\".equals(currentFieldName) || \"_percolate\".equals(currentFieldName)) {\n                             percolate = parser.textOrNull();\n                         }\n+                    } else if (token == XContentParser.Token.START_ARRAY || token == XContentParser.Token.START_OBJECT) {\n+                        if (\"_id\".equals(currentFieldName)) {\n+                            throw new ElasticSearchParseException(\"_id is not allowed to be an object or an array\");\n+                        }\n                     }\n                 }\n \ndiff --git a/src/main/java/org/elasticsearch/action/get/MultiGetRequest.java b/src/main/java/org/elasticsearch/action/get/MultiGetRequest.java\nindex b087dc9..6f9accb 100644\n--- a/src/main/java/org/elasticsearch/action/get/MultiGetRequest.java\n+++ b/src/main/java/org/elasticsearch/action/get/MultiGetRequest.java\n@@ -20,6 +20,7 @@\n package org.elasticsearch.action.get;\n \n import org.elasticsearch.ElasticSearchIllegalArgumentException;\n+import org.elasticsearch.ElasticSearchParseException;\n import org.elasticsearch.action.ActionRequest;\n import org.elasticsearch.action.ActionRequestValidationException;\n import org.elasticsearch.action.ValidateActions;\n@@ -261,12 +262,19 @@ public class MultiGetRequest extends ActionRequest<MultiGetRequest> {\n                                         routing = parser.text();\n                                     }\n                                 } else if (token == XContentParser.Token.START_ARRAY) {\n+                                    if (\"_id\".equals(currentFieldName)) {\n+                                        throw new ElasticSearchParseException(\"_id is not allowed to be an array\");\n+                                    }\n                                     if (\"fields\".equals(currentFieldName)) {\n                                         fields = new ArrayList<String>();\n                                         while ((token = parser.nextToken()) != XContentParser.Token.END_ARRAY) {\n                                             fields.add(parser.text());\n                                         }\n                                     }\n+                                } else if (token == XContentParser.Token.START_OBJECT) {\n+                                    if (\"_id\".equals(currentFieldName)) {\n+                                        throw new ElasticSearchParseException(\"_id is not allowed to be an object\");\n+                                    }\n                                 }\n                             }\n                             String[] aFields;",
  "logs_path": "codex/gpt-5.1-codex/1c2e04d5/elastic_elasticsearch_pr2715/logs.jsonl",
  "errors": [],
  "edit_run_id": "fd5b3480",
  "test_label": "v1-agent-comparison"
}