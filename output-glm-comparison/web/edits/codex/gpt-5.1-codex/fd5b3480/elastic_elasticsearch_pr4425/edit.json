{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 4425,
  "base_commit": "be860c8004d18cb9bfb24e7cc3abcbee212e622d",
  "runner": "codex",
  "model": "gpt-5.1-codex",
  "timeout_s": 10800,
  "status": "success",
  "elapsed_ms": 200155,
  "patch_unified": "diff --git a/src/main/java/org/elasticsearch/cluster/metadata/IndexTemplateMetaData.java b/src/main/java/org/elasticsearch/cluster/metadata/IndexTemplateMetaData.java\nindex 6a15044..f7de990 100644\n--- a/src/main/java/org/elasticsearch/cluster/metadata/IndexTemplateMetaData.java\n+++ b/src/main/java/org/elasticsearch/cluster/metadata/IndexTemplateMetaData.java\n@@ -303,7 +303,16 @@ public class IndexTemplateMetaData {\n                     currentFieldName = parser.currentName();\n                 } else if (token == XContentParser.Token.START_OBJECT) {\n                     if (\"settings\".equals(currentFieldName)) {\n-                        builder.settings(ImmutableSettings.settingsBuilder().put(SettingsLoader.Helper.loadNestedFromMap(parser.mapOrdered())));\n+                        ImmutableSettings.Builder settingsBuilder = ImmutableSettings.settingsBuilder().put(SettingsLoader.Helper.loadNestedFromMap(parser.mapOrdered()));\n+                        ImmutableSettings.Builder updatedSettingsBuilder = ImmutableSettings.settingsBuilder();\n+                        for (Map.Entry<String, String> entry : settingsBuilder.build().getAsMap().entrySet()) {\n+                            if (!entry.getKey().startsWith(\"index.\")) {\n+                                updatedSettingsBuilder.put(\"index.\" + entry.getKey(), entry.getValue());\n+                            } else {\n+                                updatedSettingsBuilder.put(entry.getKey(), entry.getValue());\n+                            }\n+                        }\n+                        builder.settings(updatedSettingsBuilder);\n                     } else if (\"mappings\".equals(currentFieldName)) {\n                         while ((token = parser.nextToken()) != XContentParser.Token.END_OBJECT) {\n                             if (token == XContentParser.Token.FIELD_NAME) {\ndiff --git a/src/test/java/org/elasticsearch/indices/template/template.json b/src/test/java/org/elasticsearch/indices/template/template.json\nindex 3b2ace1..fd66751 100644\n--- a/src/test/java/org/elasticsearch/indices/template/template.json\n+++ b/src/test/java/org/elasticsearch/indices/template/template.json\n@@ -1,7 +1,7 @@\n {\n     \"template\" : \"foo*\",\n     \"settings\" : {\n-        \"index.number_of_shards\": 10,\n-        \"index.number_of_replicas\": 0\n+        \"number_of_shards\": 10,\n+        \"number_of_replicas\": 0\n    }\n-}\n\\ No newline at end of file\n+}",
  "logs_path": "codex/gpt-5.1-codex/bdf2fcfe/elastic_elasticsearch_pr4425/logs.jsonl",
  "errors": [],
  "edit_run_id": "fd5b3480",
  "test_label": "v1-agent-comparison"
}