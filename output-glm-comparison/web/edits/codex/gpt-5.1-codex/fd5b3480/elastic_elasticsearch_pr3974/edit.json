{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 3974,
  "base_commit": "0e9c049da1231968a56a9abbd5178f07bc49b320",
  "runner": "codex",
  "model": "gpt-5.1-codex",
  "timeout_s": 10800,
  "status": "success",
  "elapsed_ms": 297902,
  "patch_unified": "diff --git a/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/RestIndicesAliasesAction.java b/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/RestIndicesAliasesAction.java\nindex 357f032..15fa222 100644\n--- a/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/RestIndicesAliasesAction.java\n+++ b/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/RestIndicesAliasesAction.java\n@@ -20,17 +20,16 @@\n package org.elasticsearch.rest.action.admin.indices.alias;\n \n import org.elasticsearch.ElasticSearchIllegalArgumentException;\n-import org.elasticsearch.action.ActionListener;\n import org.elasticsearch.action.admin.indices.alias.IndicesAliasesRequest;\n import org.elasticsearch.action.admin.indices.alias.IndicesAliasesResponse;\n import org.elasticsearch.client.Client;\n import org.elasticsearch.cluster.metadata.AliasAction;\n import org.elasticsearch.common.inject.Inject;\n import org.elasticsearch.common.settings.Settings;\n-import org.elasticsearch.common.xcontent.XContentBuilder;\n import org.elasticsearch.common.xcontent.XContentFactory;\n import org.elasticsearch.common.xcontent.XContentParser;\n import org.elasticsearch.rest.*;\n+import org.elasticsearch.rest.action.support.AcknowledgedRestListener;\n \n import java.io.IOException;\n import java.util.Map;\n@@ -38,8 +37,6 @@ import java.util.Map;\n import static org.elasticsearch.cluster.metadata.AliasAction.newAddAliasAction;\n import static org.elasticsearch.common.unit.TimeValue.timeValueSeconds;\n import static org.elasticsearch.rest.RestRequest.Method.POST;\n-import static org.elasticsearch.rest.RestStatus.OK;\n-import static org.elasticsearch.rest.action.support.RestXContentBuilder.restContentBuilder;\n \n /**\n  *\n@@ -148,29 +145,7 @@ public class RestIndicesAliasesAction extends BaseRestHandler {\n         } finally {\n             parser.close();\n         }\n-        client.admin().indices().aliases(indicesAliasesRequest, new ActionListener<IndicesAliasesResponse>() {\n-            @Override\n-            public void onResponse(IndicesAliasesResponse response) {\n-                try {\n-                    XContentBuilder builder = restContentBuilder(request);\n-                    builder.startObject()\n-                            .field(\"ok\", true)\n-                            .field(\"acknowledged\", response.isAcknowledged())\n-                            .endObject();\n-                    channel.sendResponse(new XContentRestResponse(request, OK, builder));\n-                } catch (Throwable e) {\n-                    onFailure(e);\n-                }\n-            }\n-\n-            @Override\n-            public void onFailure(Throwable e) {\n-                try {\n-                    channel.sendResponse(new XContentThrowableRestResponse(request, e));\n-                } catch (IOException e1) {\n-                    logger.error(\"Failed to send failure response\", e1);\n-                }\n-            }\n-        });\n+        client.admin().indices().aliases(indicesAliasesRequest,\n+                new AcknowledgedRestListener<IndicesAliasesResponse>(request, channel, logger));\n     }\n }\ndiff --git a/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/delete/RestIndexDeleteAliasesAction.java b/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/delete/RestIndexDeleteAliasesAction.java\nindex 3e4da95..b48c73d 100644\n--- a/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/delete/RestIndexDeleteAliasesAction.java\n+++ b/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/delete/RestIndexDeleteAliasesAction.java\n@@ -18,22 +18,16 @@\n \n package org.elasticsearch.rest.action.admin.indices.alias.delete;\n \n-import org.elasticsearch.action.ActionListener;\n import org.elasticsearch.action.admin.indices.alias.IndicesAliasesRequest;\n import org.elasticsearch.action.admin.indices.alias.IndicesAliasesResponse;\n import org.elasticsearch.client.Client;\n import org.elasticsearch.common.inject.Inject;\n import org.elasticsearch.common.settings.Settings;\n-import org.elasticsearch.common.xcontent.XContentBuilder;\n-import org.elasticsearch.common.xcontent.XContentBuilderString;\n import org.elasticsearch.rest.*;\n-import org.elasticsearch.rest.action.support.RestXContentBuilder;\n-\n-import java.io.IOException;\n+import org.elasticsearch.rest.action.support.AcknowledgedRestListener;\n \n import static org.elasticsearch.common.unit.TimeValue.timeValueSeconds;\n import static org.elasticsearch.rest.RestRequest.Method.DELETE;\n-import static org.elasticsearch.rest.RestStatus.OK;\n \n /**\n  */\n@@ -54,37 +48,7 @@ public class RestIndexDeleteAliasesAction extends BaseRestHandler {\n         indicesAliasesRequest.removeAlias(index, alias);\n         indicesAliasesRequest.masterNodeTimeout(request.paramAsTime(\"master_timeout\", indicesAliasesRequest.masterNodeTimeout()));\n \n-        client.admin().indices().aliases(indicesAliasesRequest, new ActionListener<IndicesAliasesResponse>() {\n-\n-            @Override\n-            public void onResponse(IndicesAliasesResponse response) {\n-                try {\n-                    XContentBuilder builder = RestXContentBuilder.restContentBuilder(request);\n-                    builder.startObject();\n-                    builder.field(Fields.OK, true);\n-                    builder.field(Fields.ACK, response.isAcknowledged());\n-                    builder.endObject();\n-                    channel.sendResponse(new XContentRestResponse(request, OK, builder));\n-                } catch (Throwable e) {\n-                    onFailure(e);\n-                }\n-            }\n-\n-            @Override\n-            public void onFailure(Throwable e) {\n-                try {\n-                    channel.sendResponse(new XContentThrowableRestResponse(request, e));\n-                } catch (IOException e1) {\n-                    logger.error(\"Failed to send failure response\", e1);\n-                }\n-            }\n-        });\n-    }\n-\n-    static class Fields {\n-\n-        static final XContentBuilderString OK = new XContentBuilderString(\"ok\");\n-        static final XContentBuilderString ACK = new XContentBuilderString(\"acknowledged\");\n-\n+        client.admin().indices().aliases(indicesAliasesRequest,\n+                new AcknowledgedRestListener<IndicesAliasesResponse>(request, channel, logger));\n     }\n }\ndiff --git a/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/put/RestIndexPutAliasAction.java b/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/put/RestIndexPutAliasAction.java\nindex 8023510..3584bbf 100644\n--- a/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/put/RestIndexPutAliasAction.java\n+++ b/src/main/java/org/elasticsearch/rest/action/admin/indices/alias/put/RestIndexPutAliasAction.java\n@@ -19,26 +19,22 @@\n package org.elasticsearch.rest.action.admin.indices.alias.put;\n \n import org.elasticsearch.ElasticSearchIllegalArgumentException;\n-import org.elasticsearch.action.ActionListener;\n import org.elasticsearch.action.admin.indices.alias.IndicesAliasesRequest;\n import org.elasticsearch.action.admin.indices.alias.IndicesAliasesResponse;\n import org.elasticsearch.client.Client;\n import org.elasticsearch.cluster.metadata.AliasAction;\n import org.elasticsearch.common.inject.Inject;\n import org.elasticsearch.common.settings.Settings;\n-import org.elasticsearch.common.xcontent.XContentBuilder;\n-import org.elasticsearch.common.xcontent.XContentBuilderString;\n import org.elasticsearch.common.xcontent.XContentFactory;\n import org.elasticsearch.common.xcontent.XContentParser;\n import org.elasticsearch.rest.*;\n-import org.elasticsearch.rest.action.support.RestXContentBuilder;\n+import org.elasticsearch.rest.action.support.AcknowledgedRestListener;\n \n import java.io.IOException;\n import java.util.Map;\n \n import static org.elasticsearch.common.unit.TimeValue.timeValueSeconds;\n import static org.elasticsearch.rest.RestRequest.Method.PUT;\n-import static org.elasticsearch.rest.RestStatus.OK;\n \n /**\n  */\n@@ -124,37 +120,7 @@ public class RestIndexPutAliasAction extends BaseRestHandler {\n         if (filter != null) {\n             aliasAction.filter(filter);\n         }\n-        client.admin().indices().aliases(indicesAliasesRequest, new ActionListener<IndicesAliasesResponse>() {\n-\n-            @Override\n-            public void onResponse(IndicesAliasesResponse response) {\n-                try {\n-                    XContentBuilder builder = RestXContentBuilder.restContentBuilder(request);\n-                    builder.startObject();\n-                    builder.field(Fields.OK, true);\n-                    builder.field(Fields.ACK, response.isAcknowledged());\n-                    builder.endObject();\n-                    channel.sendResponse(new XContentRestResponse(request, OK, builder));\n-                } catch (Throwable e) {\n-                    onFailure(e);\n-                }\n-            }\n-\n-            @Override\n-            public void onFailure(Throwable e) {\n-                try {\n-                    channel.sendResponse(new XContentThrowableRestResponse(request, e));\n-                } catch (IOException e1) {\n-                    logger.error(\"Failed to send failure response\", e1);\n-                }\n-            }\n-        });\n-    }\n-\n-    static class Fields {\n-\n-        static final XContentBuilderString OK = new XContentBuilderString(\"ok\");\n-        static final XContentBuilderString ACK = new XContentBuilderString(\"acknowledged\");\n-\n+        client.admin().indices().aliases(indicesAliasesRequest,\n+                new AcknowledgedRestListener<IndicesAliasesResponse>(request, channel, logger));\n     }\n }\ndiff --git a/src/main/java/org/elasticsearch/rest/action/admin/indices/close/RestCloseIndexAction.java b/src/main/java/org/elasticsearch/rest/action/admin/indices/close/RestCloseIndexAction.java\nindex 9dc271f..0974e13 100644\n--- a/src/main/java/org/elasticsearch/rest/action/admin/indices/close/RestCloseIndexAction.java\n+++ b/src/main/java/org/elasticsearch/rest/action/admin/indices/close/RestCloseIndexAction.java\n@@ -19,7 +19,6 @@\n \n package org.elasticsearch.rest.action.admin.indices.close;\n \n-import org.elasticsearch.action.ActionListener;\n import org.elasticsearch.action.admin.indices.close.CloseIndexRequest;\n import org.elasticsearch.action.admin.indices.close.CloseIndexResponse;\n import org.elasticsearch.action.support.IgnoreIndices;\n@@ -27,15 +26,10 @@ import org.elasticsearch.client.Client;\n import org.elasticsearch.common.Strings;\n import org.elasticsearch.common.inject.Inject;\n import org.elasticsearch.common.settings.Settings;\n-import org.elasticsearch.common.xcontent.XContentBuilder;\n-import org.elasticsearch.common.xcontent.XContentBuilderString;\n import org.elasticsearch.rest.*;\n-import org.elasticsearch.rest.action.support.RestXContentBuilder;\n-\n-import java.io.IOException;\n+import org.elasticsearch.rest.action.support.AcknowledgedRestListener;\n \n import static org.elasticsearch.common.unit.TimeValue.timeValueSeconds;\n-import static org.elasticsearch.rest.RestStatus.OK;\n \n /**\n  *\n@@ -58,34 +52,7 @@ public class RestCloseIndexAction extends BaseRestHandler {\n         if (request.hasParam(\"ignore_indices\")) {\n             closeIndexRequest.ignoreIndices(IgnoreIndices.fromString(request.param(\"ignore_indices\")));\n         }\n-        client.admin().indices().close(closeIndexRequest, new ActionListener<CloseIndexResponse>() {\n-            @Override\n-            public void onResponse(CloseIndexResponse response) {\n-                try {\n-                    XContentBuilder builder = RestXContentBuilder.restContentBuilder(request);\n-                    builder.startObject()\n-                            .field(Fields.OK, true)\n-                            .field(Fields.ACKNOWLEDGED, response.isAcknowledged())\n-                            .endObject();\n-                    channel.sendResponse(new XContentRestResponse(request, OK, builder));\n-                } catch (IOException e) {\n-                    onFailure(e);\n-                }\n-            }\n-\n-            @Override\n-            public void onFailure(Throwable e) {\n-                try {\n-                    channel.sendResponse(new XContentThrowableRestResponse(request, e));\n-                } catch (IOException e1) {\n-                    logger.error(\"Failed to send failure response\", e1);\n-                }\n-            }\n-        });\n-    }\n-\n-    static final class Fields {\n-        static final XContentBuilderString OK = new XContentBuilderString(\"ok\");\n-        static final XContentBuilderString ACKNOWLEDGED = new XContentBuilderString(\"acknowledged\");\n+        client.admin().indices().close(closeIndexRequest,\n+                new AcknowledgedRestListener<CloseIndexResponse>(request, channel, logger));\n     }\n }\ndiff --git a/src/main/java/org/elasticsearch/rest/action/admin/indices/create/RestCreateIndexAction.java b/src/main/java/org/elasticsearch/rest/action/admin/indices/create/RestCreateIndexAction.java\nindex 21abac1..a5cd621 100644\n--- a/src/main/java/org/elasticsearch/rest/action/admin/indices/create/RestCreateIndexAction.java\n+++ b/src/main/java/org/elasticsearch/rest/action/admin/indices/create/RestCreateIndexAction.java\n@@ -19,20 +19,17 @@\n \n package org.elasticsearch.rest.action.admin.indices.create;\n \n-import org.elasticsearch.action.ActionListener;\n import org.elasticsearch.action.admin.indices.create.CreateIndexRequest;\n import org.elasticsearch.action.admin.indices.create.CreateIndexResponse;\n import org.elasticsearch.client.Client;\n import org.elasticsearch.common.inject.Inject;\n import org.elasticsearch.common.settings.Settings;\n-import org.elasticsearch.common.xcontent.XContentBuilder;\n import org.elasticsearch.rest.*;\n-import org.elasticsearch.rest.action.support.RestXContentBuilder;\n+import org.elasticsearch.rest.action.support.AcknowledgedRestListener;\n \n import java.io.IOException;\n \n import static org.elasticsearch.common.unit.TimeValue.timeValueSeconds;\n-import static org.elasticsearch.rest.RestStatus.OK;\n \n /**\n  *\n@@ -67,29 +64,7 @@ public class RestCreateIndexAction extends BaseRestHandler {\n         createIndexRequest.timeout(request.paramAsTime(\"timeout\", timeValueSeconds(10)));\n         createIndexRequest.masterNodeTimeout(request.paramAsTime(\"master_timeout\", createIndexRequest.masterNodeTimeout()));\n \n-        client.admin().indices().create(createIndexRequest, new ActionListener<CreateIndexResponse>() {\n-            @Override\n-            public void onResponse(CreateIndexResponse response) {\n-                try {\n-                    XContentBuilder builder = RestXContentBuilder.restContentBuilder(request);\n-                    builder.startObject()\n-                            .field(\"ok\", true)\n-                            .field(\"acknowledged\", response.isAcknowledged())\n-                            .endObject();\n-                    channel.sendResponse(new XContentRestResponse(request, OK, builder));\n-                } catch (Throwable e) {\n-                    onFailure(e);\n-                }\n-            }\n-\n-            @Override\n-            public void onFailure(Throwable e) {\n-                try {\n-                    channel.sendResponse(new XContentThrowableRestResponse(request, e));\n-                } catch (IOException e1) {\n-                    logger.error(\"Failed to send failure response\", e1);\n-                }\n-            }\n-        });\n+        client.admin().indices().create(createIndexRequest,\n+                new AcknowledgedRestListener<CreateIndexResponse>(request, channel, logger));\n     }\n }\ndiff --git a/src/main/java/org/elasticsearch/rest/action/admin/indices/delete/RestDeleteIndexAction.java b/src/main/java/org/elasticsearch/rest/action/admin/indices/delete/RestDeleteIndexAction.java\nindex 25edc2e..c1ca95a 100644\n--- a/src/main/java/org/elasticsearch/rest/action/admin/indices/delete/RestDeleteIndexAction.java\n+++ b/src/main/java/org/elasticsearch/rest/action/admin/indices/delete/RestDeleteIndexAction.java\n@@ -19,22 +19,16 @@\n \n package org.elasticsearch.rest.action.admin.indices.delete;\n \n-import org.elasticsearch.action.ActionListener;\n import org.elasticsearch.action.admin.indices.delete.DeleteIndexRequest;\n import org.elasticsearch.action.admin.indices.delete.DeleteIndexResponse;\n import org.elasticsearch.client.Client;\n import org.elasticsearch.common.Strings;\n import org.elasticsearch.common.inject.Inject;\n import org.elasticsearch.common.settings.Settings;\n-import org.elasticsearch.common.xcontent.XContentBuilder;\n-import org.elasticsearch.common.xcontent.XContentBuilderString;\n import org.elasticsearch.rest.*;\n-import org.elasticsearch.rest.action.support.RestXContentBuilder;\n-\n-import java.io.IOException;\n+import org.elasticsearch.rest.action.support.AcknowledgedRestListener;\n \n import static org.elasticsearch.common.unit.TimeValue.timeValueSeconds;\n-import static org.elasticsearch.rest.RestStatus.OK;\n \n /**\n  *\n@@ -54,34 +48,7 @@ public class RestDeleteIndexAction extends BaseRestHandler {\n         deleteIndexRequest.listenerThreaded(false);\n         deleteIndexRequest.timeout(request.paramAsTime(\"timeout\", timeValueSeconds(10)));\n         deleteIndexRequest.masterNodeTimeout(request.paramAsTime(\"master_timeout\", deleteIndexRequest.masterNodeTimeout()));\n-        client.admin().indices().delete(deleteIndexRequest, new ActionListener<DeleteIndexResponse>() {\n-            @Override\n-            public void onResponse(DeleteIndexResponse response) {\n-                try {\n-                    XContentBuilder builder = RestXContentBuilder.restContentBuilder(request);\n-                    builder.startObject()\n-                            .field(Fields.OK, true)\n-                            .field(Fields.ACKNOWLEDGED, response.isAcknowledged())\n-                            .endObject();\n-                    channel.sendResponse(new XContentRestResponse(request, OK, builder));\n-                } catch (IOException e) {\n-                    onFailure(e);\n-                }\n-            }\n-\n-            @Override\n-            public void onFailure(Throwable e) {\n-                try {\n-                    channel.sendResponse(new XContentThrowableRestResponse(request, e));\n-                } catch (IOException e1) {\n-                    logger.error(\"Failed to send failure response\", e1);\n-                }\n-            }\n-        });\n-    }\n-\n-    static final class Fields {\n-        static final XContentBuilderString OK = new XContentBuilderString(\"ok\");\n-        static final XContentBuilderString ACKNOWLEDGED = new XContentBuilderString(\"acknowledged\");\n+        client.admin().indices().delete(deleteIndexRequest,\n+                new AcknowledgedRestListener<DeleteIndexResponse>(request, channel, logger));\n     }\n }\ndiff --git a/src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/put/RestPutMappingAction.java b/src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/put/RestPutMappingAction.java\nindex bd05b43..d8c8752 100644\n--- a/src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/put/RestPutMappingAction.java\n+++ b/src/main/java/org/elasticsearch/rest/action/admin/indices/mapping/put/RestPutMappingAction.java\n@@ -19,24 +19,19 @@\n \n package org.elasticsearch.rest.action.admin.indices.mapping.put;\n \n-import org.elasticsearch.action.ActionListener;\n import org.elasticsearch.action.admin.indices.mapping.put.PutMappingRequest;\n import org.elasticsearch.action.admin.indices.mapping.put.PutMappingResponse;\n import org.elasticsearch.client.Client;\n import org.elasticsearch.common.Strings;\n import org.elasticsearch.common.inject.Inject;\n import org.elasticsearch.common.settings.Settings;\n-import org.elasticsearch.common.xcontent.XContentBuilder;\n import org.elasticsearch.rest.*;\n-import org.elasticsearch.rest.action.support.RestXContentBuilder;\n-\n-import java.io.IOException;\n+import org.elasticsearch.rest.action.support.AcknowledgedRestListener;\n \n import static org.elasticsearch.client.Requests.putMappingRequest;\n import static org.elasticsearch.common.unit.TimeValue.timeValueSeconds;\n import static org.elasticsearch.rest.RestRequest.Method.POST;\n import static org.elasticsearch.rest.RestRequest.Method.PUT;\n-import static org.elasticsearch.rest.RestStatus.OK;\n \n /**\n  *\n@@ -62,29 +57,7 @@ public class RestPutMappingAction extends BaseRestHandler {\n         putMappingRequest.timeout(request.paramAsTime(\"timeout\", timeValueSeconds(10)));\n         putMappingRequest.ignoreConflicts(request.paramAsBoolean(\"ignore_conflicts\", putMappingRequest.ignoreConflicts()));\n         putMappingRequest.masterNodeTimeout(request.paramAsTime(\"master_timeout\", putMappingRequest.masterNodeTimeout()));\n-        client.admin().indices().putMapping(putMappingRequest, new ActionListener<PutMappingResponse>() {\n-            @Override\n-            public void onResponse(PutMappingResponse response) {\n-                try {\n-                    XContentBuilder builder = RestXContentBuilder.restContentBuilder(request);\n-                    builder.startObject()\n-                            .field(\"ok\", true)\n-                            .field(\"acknowledged\", response.isAcknowledged());\n-                    builder.endObject();\n-                    channel.sendResponse(new XContentRestResponse(request, OK, builder));\n-                } catch (IOException e) {\n-                    onFailure(e);\n-                }\n-            }\n-\n-            @Override\n-            public void onFailure(Throwable e) {\n-                try {\n-                    channel.sendResponse(new XContentThrowableRestResponse(request, e));\n-                } catch (IOException e1) {\n-                    logger.error(\"Failed to send failure response\", e1);\n-                }\n-            }\n-        });\n+        client.admin().indices().putMapping(putMappingRequest,\n+                new AcknowledgedRestListener<PutMappingResponse>(request, channel, logger));\n     }\n }\ndiff --git a/src/main/java/org/elasticsearch/rest/action/admin/indices/open/RestOpenIndexAction.java b/src/main/java/org/elasticsearch/rest/action/admin/indices/open/RestOpenIndexAction.java\nindex cab3577..05c3617 100644\n--- a/src/main/java/org/elasticsearch/rest/action/admin/indices/open/RestOpenIndexAction.java\n+++ b/src/main/java/org/elasticsearch/rest/action/admin/indices/open/RestOpenIndexAction.java\n@@ -19,7 +19,6 @@\n \n package org.elasticsearch.rest.action.admin.indices.open;\n \n-import org.elasticsearch.action.ActionListener;\n import org.elasticsearch.action.admin.indices.open.OpenIndexRequest;\n import org.elasticsearch.action.admin.indices.open.OpenIndexResponse;\n import org.elasticsearch.action.support.IgnoreIndices;\n@@ -27,15 +26,10 @@ import org.elasticsearch.client.Client;\n import org.elasticsearch.common.Strings;\n import org.elasticsearch.common.inject.Inject;\n import org.elasticsearch.common.settings.Settings;\n-import org.elasticsearch.common.xcontent.XContentBuilder;\n-import org.elasticsearch.common.xcontent.XContentBuilderString;\n import org.elasticsearch.rest.*;\n-import org.elasticsearch.rest.action.support.RestXContentBuilder;\n-\n-import java.io.IOException;\n+import org.elasticsearch.rest.action.support.AcknowledgedRestListener;\n \n import static org.elasticsearch.common.unit.TimeValue.timeValueSeconds;\n-import static org.elasticsearch.rest.RestStatus.OK;\n \n /**\n  *\n@@ -58,34 +52,7 @@ public class RestOpenIndexAction extends BaseRestHandler {\n         if (request.hasParam(\"ignore_indices\")) {\n             openIndexRequest.ignoreIndices(IgnoreIndices.fromString(request.param(\"ignore_indices\")));\n         }\n-        client.admin().indices().open(openIndexRequest, new ActionListener<OpenIndexResponse>() {\n-            @Override\n-            public void onResponse(OpenIndexResponse response) {\n-                try {\n-                    XContentBuilder builder = RestXContentBuilder.restContentBuilder(request);\n-                    builder.startObject()\n-                            .field(Fields.OK, true)\n-                            .field(Fields.ACKNOWLEDGED, response.isAcknowledged())\n-                            .endObject();\n-                    channel.sendResponse(new XContentRestResponse(request, OK, builder));\n-                } catch (IOException e) {\n-                    onFailure(e);\n-                }\n-            }\n-\n-            @Override\n-            public void onFailure(Throwable e) {\n-                try {\n-                    channel.sendResponse(new XContentThrowableRestResponse(request, e));\n-                } catch (IOException e1) {\n-                    logger.error(\"Failed to send failure response\", e1);\n-                }\n-            }\n-        });\n-    }\n-\n-    static final class Fields {\n-        static final XContentBuilderString OK = new XContentBuilderString(\"ok\");\n-        static final XContentBuilderString ACKNOWLEDGED = new XContentBuilderString(\"acknowledged\");\n+        client.admin().indices().open(openIndexRequest,\n+                new AcknowledgedRestListener<OpenIndexResponse>(request, channel, logger));\n     }\n }\ndiff --git a/src/main/java/org/elasticsearch/rest/action/admin/indices/template/delete/RestDeleteIndexTemplateAction.java b/src/main/java/org/elasticsearch/rest/action/admin/indices/template/delete/RestDeleteIndexTemplateAction.java\nindex 2f78c3c..6780d33 100644\n--- a/src/main/java/org/elasticsearch/rest/action/admin/indices/template/delete/RestDeleteIndexTemplateAction.java\n+++ b/src/main/java/org/elasticsearch/rest/action/admin/indices/template/delete/RestDeleteIndexTemplateAction.java\n@@ -19,21 +19,15 @@\n \n package org.elasticsearch.rest.action.admin.indices.template.delete;\n \n-import org.elasticsearch.action.ActionListener;\n import org.elasticsearch.action.admin.indices.template.delete.DeleteIndexTemplateRequest;\n import org.elasticsearch.action.admin.indices.template.delete.DeleteIndexTemplateResponse;\n import org.elasticsearch.client.Client;\n import org.elasticsearch.common.inject.Inject;\n import org.elasticsearch.common.settings.Settings;\n-import org.elasticsearch.common.xcontent.XContentBuilder;\n-import org.elasticsearch.common.xcontent.XContentBuilderString;\n import org.elasticsearch.rest.*;\n-import org.elasticsearch.rest.action.support.RestXContentBuilder;\n-\n-import java.io.IOException;\n+import org.elasticsearch.rest.action.support.AcknowledgedRestListener;\n \n import static org.elasticsearch.common.unit.TimeValue.timeValueSeconds;\n-import static org.elasticsearch.rest.RestStatus.OK;\n \n /**\n  *\n@@ -52,34 +46,7 @@ public class RestDeleteIndexTemplateAction extends BaseRestHandler {\n         deleteIndexTemplateRequest.listenerThreaded(false);\n         deleteIndexTemplateRequest.timeout(request.paramAsTime(\"timeout\", timeValueSeconds(10)));\n         deleteIndexTemplateRequest.masterNodeTimeout(request.paramAsTime(\"master_timeout\", deleteIndexTemplateRequest.masterNodeTimeout()));\n-        client.admin().indices().deleteTemplate(deleteIndexTemplateRequest, new ActionListener<DeleteIndexTemplateResponse>() {\n-            @Override\n-            public void onResponse(DeleteIndexTemplateResponse response) {\n-                try {\n-                    XContentBuilder builder = RestXContentBuilder.restContentBuilder(request);\n-                    builder.startObject()\n-                            .field(Fields.OK, true)\n-                            .field(Fields.ACKNOWLEDGED, response.isAcknowledged())\n-                            .endObject();\n-                    channel.sendResponse(new XContentRestResponse(request, OK, builder));\n-                } catch (IOException e) {\n-                    onFailure(e);\n-                }\n-            }\n-\n-            @Override\n-            public void onFailure(Throwable e) {\n-                try {\n-                    channel.sendResponse(new XContentThrowableRestResponse(request, e));\n-                } catch (IOException e1) {\n-                    logger.error(\"Failed to send failure response\", e1);\n-                }\n-            }\n-        });\n-    }\n-\n-    static final class Fields {\n-        static final XContentBuilderString OK = new XContentBuilderString(\"ok\");\n-        static final XContentBuilderString ACKNOWLEDGED = new XContentBuilderString(\"acknowledged\");\n+        client.admin().indices().deleteTemplate(deleteIndexTemplateRequest,\n+                new AcknowledgedRestListener<DeleteIndexTemplateResponse>(request, channel, logger));\n     }\n }\ndiff --git a/src/main/java/org/elasticsearch/rest/action/admin/indices/template/put/RestPutIndexTemplateAction.java b/src/main/java/org/elasticsearch/rest/action/admin/indices/template/put/RestPutIndexTemplateAction.java\nindex 40c8074..1983529 100644\n--- a/src/main/java/org/elasticsearch/rest/action/admin/indices/template/put/RestPutIndexTemplateAction.java\n+++ b/src/main/java/org/elasticsearch/rest/action/admin/indices/template/put/RestPutIndexTemplateAction.java\n@@ -19,21 +19,17 @@\n \n package org.elasticsearch.rest.action.admin.indices.template.put;\n \n-import org.elasticsearch.action.ActionListener;\n import org.elasticsearch.action.admin.indices.template.put.PutIndexTemplateRequest;\n import org.elasticsearch.action.admin.indices.template.put.PutIndexTemplateResponse;\n import org.elasticsearch.client.Client;\n import org.elasticsearch.common.inject.Inject;\n import org.elasticsearch.common.settings.Settings;\n-import org.elasticsearch.common.xcontent.XContentBuilder;\n-import org.elasticsearch.common.xcontent.XContentBuilderString;\n import org.elasticsearch.rest.*;\n-import org.elasticsearch.rest.action.support.RestXContentBuilder;\n+import org.elasticsearch.rest.action.support.AcknowledgedRestListener;\n \n import java.io.IOException;\n \n import static org.elasticsearch.common.unit.TimeValue.timeValueSeconds;\n-import static org.elasticsearch.rest.RestStatus.OK;\n \n /**\n  *\n@@ -78,34 +74,7 @@ public class RestPutIndexTemplateAction extends BaseRestHandler {\n             return;\n         }\n \n-        client.admin().indices().putTemplate(putRequest, new ActionListener<PutIndexTemplateResponse>() {\n-            @Override\n-            public void onResponse(PutIndexTemplateResponse response) {\n-                try {\n-                    XContentBuilder builder = RestXContentBuilder.restContentBuilder(request);\n-                    builder.startObject()\n-                            .field(Fields.OK, true)\n-                            .field(Fields.ACKNOWLEDGED, response.isAcknowledged())\n-                            .endObject();\n-                    channel.sendResponse(new XContentRestResponse(request, OK, builder));\n-                } catch (IOException e) {\n-                    onFailure(e);\n-                }\n-            }\n-\n-            @Override\n-            public void onFailure(Throwable e) {\n-                try {\n-                    channel.sendResponse(new XContentThrowableRestResponse(request, e));\n-                } catch (IOException e1) {\n-                    logger.error(\"Failed to send failure response\", e1);\n-                }\n-            }\n-        });\n-    }\n-\n-    static final class Fields {\n-        static final XContentBuilderString OK = new XContentBuilderString(\"ok\");\n-        static final XContentBuilderString ACKNOWLEDGED = new XContentBuilderString(\"acknowledged\");\n+        client.admin().indices().putTemplate(putRequest,\n+                new AcknowledgedRestListener<PutIndexTemplateResponse>(request, channel, logger));\n     }\n }\ndiff --git a/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/delete/RestDeleteWarmerAction.java b/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/delete/RestDeleteWarmerAction.java\nindex 8682d95..52be0cb 100644\n--- a/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/delete/RestDeleteWarmerAction.java\n+++ b/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/delete/RestDeleteWarmerAction.java\n@@ -19,21 +19,16 @@\n \n package org.elasticsearch.rest.action.admin.indices.warmer.delete;\n \n-import org.elasticsearch.action.ActionListener;\n import org.elasticsearch.action.admin.indices.warmer.delete.DeleteWarmerRequest;\n import org.elasticsearch.action.admin.indices.warmer.delete.DeleteWarmerResponse;\n import org.elasticsearch.client.Client;\n import org.elasticsearch.common.Strings;\n import org.elasticsearch.common.inject.Inject;\n import org.elasticsearch.common.settings.Settings;\n-import org.elasticsearch.common.xcontent.XContentBuilder;\n import org.elasticsearch.rest.*;\n-import org.elasticsearch.rest.action.support.RestXContentBuilder;\n-\n-import java.io.IOException;\n+import org.elasticsearch.rest.action.support.AcknowledgedRestListener;\n \n import static org.elasticsearch.rest.RestRequest.Method.DELETE;\n-import static org.elasticsearch.rest.RestStatus.OK;\n \n /**\n  */\n@@ -54,29 +49,7 @@ public class RestDeleteWarmerAction extends BaseRestHandler {\n         deleteWarmerRequest.listenerThreaded(false);\n         deleteWarmerRequest.timeout(request.paramAsTime(\"timeout\", deleteWarmerRequest.timeout()));\n         deleteWarmerRequest.masterNodeTimeout(request.paramAsTime(\"master_timeout\", deleteWarmerRequest.masterNodeTimeout()));\n-        client.admin().indices().deleteWarmer(deleteWarmerRequest, new ActionListener<DeleteWarmerResponse>() {\n-            @Override\n-            public void onResponse(DeleteWarmerResponse response) {\n-                try {\n-                    XContentBuilder builder = RestXContentBuilder.restContentBuilder(request);\n-                    builder.startObject()\n-                            .field(\"ok\", true)\n-                            .field(\"acknowledged\", response.isAcknowledged());\n-                    builder.endObject();\n-                    channel.sendResponse(new XContentRestResponse(request, OK, builder));\n-                } catch (IOException e) {\n-                    onFailure(e);\n-                }\n-            }\n-\n-            @Override\n-            public void onFailure(Throwable e) {\n-                try {\n-                    channel.sendResponse(new XContentThrowableRestResponse(request, e));\n-                } catch (IOException e1) {\n-                    logger.error(\"Failed to send failure response\", e1);\n-                }\n-            }\n-        });\n+        client.admin().indices().deleteWarmer(deleteWarmerRequest,\n+                new AcknowledgedRestListener<DeleteWarmerResponse>(request, channel, logger));\n     }\n }\ndiff --git a/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/put/RestPutWarmerAction.java b/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/put/RestPutWarmerAction.java\nindex 47ee0f0..af59aab 100644\n--- a/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/put/RestPutWarmerAction.java\n+++ b/src/main/java/org/elasticsearch/rest/action/admin/indices/warmer/put/RestPutWarmerAction.java\n@@ -19,7 +19,6 @@\n \n package org.elasticsearch.rest.action.admin.indices.warmer.put;\n \n-import org.elasticsearch.action.ActionListener;\n import org.elasticsearch.action.admin.indices.warmer.put.PutWarmerRequest;\n import org.elasticsearch.action.admin.indices.warmer.put.PutWarmerResponse;\n import org.elasticsearch.action.search.SearchRequest;\n@@ -27,14 +26,10 @@ import org.elasticsearch.client.Client;\n import org.elasticsearch.common.Strings;\n import org.elasticsearch.common.inject.Inject;\n import org.elasticsearch.common.settings.Settings;\n-import org.elasticsearch.common.xcontent.XContentBuilder;\n import org.elasticsearch.rest.*;\n-import org.elasticsearch.rest.action.support.RestXContentBuilder;\n-\n-import java.io.IOException;\n+import org.elasticsearch.rest.action.support.AcknowledgedRestListener;\n \n import static org.elasticsearch.rest.RestRequest.Method.PUT;\n-import static org.elasticsearch.rest.RestStatus.OK;\n \n /**\n  */\n@@ -57,29 +52,7 @@ public class RestPutWarmerAction extends BaseRestHandler {\n         putWarmerRequest.searchRequest(searchRequest);\n         putWarmerRequest.timeout(request.paramAsTime(\"timeout\", putWarmerRequest.timeout()));\n         putWarmerRequest.masterNodeTimeout(request.paramAsTime(\"master_timeout\", putWarmerRequest.masterNodeTimeout()));\n-        client.admin().indices().putWarmer(putWarmerRequest, new ActionListener<PutWarmerResponse>() {\n-            @Override\n-            public void onResponse(PutWarmerResponse response) {\n-                try {\n-                    XContentBuilder builder = RestXContentBuilder.restContentBuilder(request);\n-                    builder.startObject()\n-                            .field(\"ok\", true)\n-                            .field(\"acknowledged\", response.isAcknowledged());\n-                    builder.endObject();\n-                    channel.sendResponse(new XContentRestResponse(request, OK, builder));\n-                } catch (IOException e) {\n-                    onFailure(e);\n-                }\n-            }\n-\n-            @Override\n-            public void onFailure(Throwable e) {\n-                try {\n-                    channel.sendResponse(new XContentThrowableRestResponse(request, e));\n-                } catch (IOException e1) {\n-                    logger.error(\"Failed to send failure response\", e1);\n-                }\n-            }\n-        });\n+        client.admin().indices().putWarmer(putWarmerRequest,\n+                new AcknowledgedRestListener<PutWarmerResponse>(request, channel, logger));\n     }\n }",
  "logs_path": "codex/gpt-5.1-codex/b8978668/elastic_elasticsearch_pr3974/logs.jsonl",
  "errors": [],
  "edit_run_id": "fd5b3480",
  "test_label": "v1-agent-comparison"
}