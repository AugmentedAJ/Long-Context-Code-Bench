{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 4155,
  "base_commit": "16ee74268240118c59b64ea3ee2ee854c7566505",
  "runner": "codex",
  "model": "gpt-5.1-codex",
  "timeout_s": 10800,
  "status": "success",
  "elapsed_ms": 28968,
  "patch_unified": "diff --git a/src/main/java/org/elasticsearch/action/bulk/BulkProcessor.java b/src/main/java/org/elasticsearch/action/bulk/BulkProcessor.java\nindex b8fb83a..677e99f 100644\n--- a/src/main/java/org/elasticsearch/action/bulk/BulkProcessor.java\n+++ b/src/main/java/org/elasticsearch/action/bulk/BulkProcessor.java\n@@ -283,7 +283,8 @@ public class BulkProcessor {\n                 return;\n             }\n             listener.beforeBulk(executionId, bulkRequest);\n-            client.bulk(bulkRequest, new ActionListener<BulkResponse>() {\n+            try {\n+                client.bulk(bulkRequest, new ActionListener<BulkResponse>() {\n                 @Override\n                 public void onResponse(BulkResponse response) {\n                     try {\n@@ -301,7 +302,14 @@ public class BulkProcessor {\n                         semaphore.release();\n                     }\n                 }\n-            });\n+                });\n+            } catch (Exception e) {\n+                try {\n+                    listener.afterBulk(executionId, bulkRequest, e);\n+                } finally {\n+                    semaphore.release();\n+                }\n+            }\n         }\n     }\n ",
  "logs_path": "codex/gpt-5.1-codex/1c2e04d5/elastic_elasticsearch_pr4155/logs.jsonl",
  "errors": [],
  "edit_run_id": "fd5b3480",
  "test_label": "v1-agent-comparison"
}