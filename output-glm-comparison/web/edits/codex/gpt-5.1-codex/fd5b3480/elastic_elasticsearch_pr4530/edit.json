{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 4530,
  "base_commit": "bbffeb1b39b864a8bf6c9844dfa23869e44c8639",
  "runner": "codex",
  "model": "gpt-5.1-codex",
  "timeout_s": 10800,
  "status": "success",
  "elapsed_ms": 175374,
  "patch_unified": "diff --git a/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java\nindex a394166..0c79048 100644\n--- a/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java\n+++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java\n@@ -482,9 +482,26 @@ public class MetaDataCreateIndexService extends AbstractComponent {\n                     try {\n                         byte[] templatesData = Streams.copyToByteArray(templatesFile);\n                         parser = XContentHelper.createParser(templatesData, 0, templatesData.length);\n-                        IndexTemplateMetaData template = IndexTemplateMetaData.Builder.fromXContent(parser);\n-                        if (Regex.simpleMatch(template.template(), request.index)) {\n-                            templates.add(template);\n+                        XContentParser.Token token = parser.nextToken();\n+                        if (token == null) {\n+                            continue;\n+                        }\n+                        if (token != XContentParser.Token.START_OBJECT) {\n+                            logger.warn(\"[{}] failed to parse template [{}] from config, not starting with object\", request.index, templatesFile.getAbsolutePath());\n+                            continue;\n+                        }\n+                        String currentFieldName = null;\n+                        while ((token = parser.nextToken()) != XContentParser.Token.END_OBJECT) {\n+                            if (token == XContentParser.Token.FIELD_NAME) {\n+                                currentFieldName = parser.currentName();\n+                            } else if (token == XContentParser.Token.START_OBJECT) {\n+                                IndexTemplateMetaData template = IndexTemplateMetaData.Builder.fromXContent(parser);\n+                                if (Regex.simpleMatch(template.template(), request.index)) {\n+                                    templates.add(template);\n+                                }\n+                            } else {\n+                                parser.skipChildren();\n+                            }\n                         }\n                     } catch (Exception e) {\n                         logger.warn(\"[{}] failed to read template [{}] from config\", e, request.index, templatesFile.getAbsolutePath());",
  "logs_path": "codex/gpt-5.1-codex/1c2e04d5/elastic_elasticsearch_pr4530/logs.jsonl",
  "errors": [],
  "edit_run_id": "fd5b3480",
  "test_label": "v1-agent-comparison"
}