{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 4197,
  "base_commit": "513611bd48e471a6c9594301149c390476a4bc0d",
  "runner": "codex",
  "model": "gpt-5.1-codex",
  "timeout_s": 10800,
  "status": "success",
  "elapsed_ms": 118698,
  "patch_unified": "diff --git a/src/main/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerRequest.java b/src/main/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerRequest.java\nindex 0b59da7..0f83be8 100644\n--- a/src/main/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerRequest.java\n+++ b/src/main/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerRequest.java\n@@ -88,7 +88,12 @@ public class PutWarmerRequest extends AcknowledgedRequest<PutWarmerRequest> {\n \n     @Override\n     public ActionRequestValidationException validate() {\n-        ActionRequestValidationException validationException = searchRequest.validate();\n+        ActionRequestValidationException validationException = null;\n+        if (searchRequest == null) {\n+            validationException = addValidationError(\"search request is missing\", validationException);\n+        } else {\n+            validationException = searchRequest.validate();\n+        }\n         if (name == null) {\n             validationException = addValidationError(\"name is missing\", validationException);\n         }\ndiff --git a/src/test/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerRequestTests.java b/src/test/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerRequestTests.java\nindex d29dfaa..154c7a9 100644\n--- a/src/test/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerRequestTests.java\n+++ b/src/test/java/org/elasticsearch/action/admin/indices/warmer/put/PutWarmerRequestTests.java\n@@ -19,6 +19,8 @@\n package org.elasticsearch.action.admin.indices.warmer.put;\n \n import org.elasticsearch.Version;\n+import org.elasticsearch.action.ActionRequestValidationException;\n+import org.elasticsearch.action.search.SearchRequest;\n import org.elasticsearch.common.io.stream.InputStreamStreamInput;\n import org.elasticsearch.common.io.stream.OutputStreamStreamOutput;\n import org.elasticsearch.common.unit.TimeValue;\n@@ -29,6 +31,7 @@ import java.io.ByteArrayInputStream;\n import java.io.ByteArrayOutputStream;\n \n import static org.hamcrest.CoreMatchers.equalTo;\n+import static org.hamcrest.Matchers.hasItem;\n \n public class PutWarmerRequestTests extends ElasticsearchTestCase {\n \n@@ -73,4 +76,28 @@ public class PutWarmerRequestTests extends ElasticsearchTestCase {\n         //timeout is default as we don't read it from the received buffer\n         assertThat(inRequest.timeout().millis(), equalTo(outRequest.timeout().millis()));\n     }\n+\n+    @Test\n+    public void testValidationFailsWhenSearchRequestMissing() {\n+        PutWarmerRequest request = new PutWarmerRequest(\"warmer1\");\n+        ActionRequestValidationException validationException = request.validate();\n+        assertNotNull(validationException);\n+        assertThat(validationException.validationErrors(), hasItem(\"search request is missing\"));\n+    }\n+\n+    @Test\n+    public void testValidationFailsWhenNameMissing() {\n+        PutWarmerRequest request = new PutWarmerRequest();\n+        request.searchRequest(new SearchRequest(\"test\"));\n+        ActionRequestValidationException validationException = request.validate();\n+        assertNotNull(validationException);\n+        assertThat(validationException.validationErrors(), hasItem(\"name is missing\"));\n+    }\n+\n+    @Test\n+    public void testValidationPassesWhenNameAndSearchRequestPresent() {\n+        PutWarmerRequest request = new PutWarmerRequest(\"warmer1\");\n+        request.searchRequest(new SearchRequest(\"test\"));\n+        assertNull(request.validate());\n+    }\n }",
  "logs_path": "codex/gpt-5.1-codex/1c2e04d5/elastic_elasticsearch_pr4197/logs.jsonl",
  "errors": [],
  "edit_run_id": "fd5b3480",
  "test_label": "v1-agent-comparison"
}