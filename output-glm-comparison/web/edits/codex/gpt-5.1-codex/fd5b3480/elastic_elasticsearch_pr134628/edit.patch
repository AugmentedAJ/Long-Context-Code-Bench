diff --git a/server/src/main/java/org/elasticsearch/search/aggregations/bucket/filter/QueryToFilterAdapter.java b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/filter/QueryToFilterAdapter.java
index 9c6f7ddd..151bb9c9 100644
--- a/server/src/main/java/org/elasticsearch/search/aggregations/bucket/filter/QueryToFilterAdapter.java
+++ b/server/src/main/java/org/elasticsearch/search/aggregations/bucket/filter/QueryToFilterAdapter.java
@@ -51,14 +51,14 @@ public class QueryToFilterAdapter {
         // Wrapping with a ConstantScoreQuery enables a few more rewrite
         // rules as of Lucene 9.2
         query = searcher.rewrite(new ConstantScoreQuery(query));
-        if (query instanceof ConstantScoreQuery) {
+        if (query instanceof ConstantScoreQuery constantScoreQuery) {
             /*
              * Unwrap constant score because it gets in the way of us
              * understanding what the queries are trying to do and we
              * don't use the score at all anyway. Effectively we always
              * run in constant score mode.
              */
-            query = ((ConstantScoreQuery) query).getQuery();
+            query = constantScoreQuery.getQuery();
         }
         return new QueryToFilterAdapter(searcher, key, query);
     }
@@ -132,8 +132,9 @@ public class QueryToFilterAdapter {
         extraQuery = searcher().rewrite(new ConstantScoreQuery(extraQuery));
         Query unwrappedExtraQuery = unwrap(extraQuery);
         Query unwrappedQuery = unwrap(query);
-        if (unwrappedQuery instanceof PointRangeQuery && unwrappedExtraQuery instanceof PointRangeQuery) {
-            Query merged = MergedPointRangeQuery.merge((PointRangeQuery) unwrappedQuery, (PointRangeQuery) unwrappedExtraQuery);
+        if (unwrappedQuery instanceof PointRangeQuery pointRangeQuery
+            && unwrappedExtraQuery instanceof PointRangeQuery extraPointRangeQuery) {
+            Query merged = MergedPointRangeQuery.merge(pointRangeQuery, extraPointRangeQuery);
             if (merged != null) {
                 // Should we rewrap here?
                 return new QueryToFilterAdapter(searcher(), key(), merged);
@@ -143,8 +144,8 @@ public class QueryToFilterAdapter {
         builder.add(query, BooleanClause.Occur.FILTER);
         builder.add(extraQuery, BooleanClause.Occur.FILTER);
         Query rewrittenUnion = searcher().rewrite(new ConstantScoreQuery(builder.build()));
-        if (rewrittenUnion instanceof ConstantScoreQuery) {
-            rewrittenUnion = ((ConstantScoreQuery) rewrittenUnion).getQuery();
+        if (rewrittenUnion instanceof ConstantScoreQuery constantScoreQuery) {
+            rewrittenUnion = constantScoreQuery.getQuery();
         }
         // This union is inefficient if Lucene cannot merge clauses of the boolean query through a rewrite.
         final boolean inefficientUnion = rewrittenUnion instanceof BooleanQuery;
@@ -157,16 +158,16 @@ public class QueryToFilterAdapter {
 
     private static Query unwrap(Query query) {
         while (true) {
-            if (query instanceof ConstantScoreQuery) {
-                query = ((ConstantScoreQuery) query).getQuery();
+            if (query instanceof ConstantScoreQuery constantScoreQuery) {
+                query = constantScoreQuery.getQuery();
                 continue;
             }
-            if (query instanceof IndexSortSortedNumericDocValuesRangeQuery) {
-                query = ((IndexSortSortedNumericDocValuesRangeQuery) query).getFallbackQuery();
+            if (query instanceof IndexSortSortedNumericDocValuesRangeQuery indexSortSortedNumericDocValuesRangeQuery) {
+                query = indexSortSortedNumericDocValuesRangeQuery.getFallbackQuery();
                 continue;
             }
-            if (query instanceof IndexOrDocValuesQuery) {
-                query = ((IndexOrDocValuesQuery) query).getIndexQuery();
+            if (query instanceof IndexOrDocValuesQuery indexOrDocValuesQuery) {
+                query = indexOrDocValuesQuery.getIndexQuery();
                 continue;
             }
             return query;