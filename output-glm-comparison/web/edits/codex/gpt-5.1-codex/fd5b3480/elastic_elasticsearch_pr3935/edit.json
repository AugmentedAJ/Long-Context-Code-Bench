{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 3935,
  "base_commit": "60550e4cc27bd11488540d911081794d69434478",
  "runner": "codex",
  "model": "gpt-5.1-codex",
  "timeout_s": 10800,
  "status": "success",
  "elapsed_ms": 197111,
  "patch_unified": "diff --git a/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AwarenessAllocationDecider.java b/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AwarenessAllocationDecider.java\nindex 21ab3bb..1c00fb0 100644\n--- a/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AwarenessAllocationDecider.java\n+++ b/src/main/java/org/elasticsearch/cluster/routing/allocation/decider/AwarenessAllocationDecider.java\n@@ -26,6 +26,7 @@ import org.elasticsearch.cluster.routing.MutableShardRouting;\n import org.elasticsearch.cluster.routing.RoutingNode;\n import org.elasticsearch.cluster.routing.ShardRouting;\n import org.elasticsearch.cluster.routing.allocation.RoutingAllocation;\n+import org.elasticsearch.common.Strings;\n import org.elasticsearch.common.inject.Inject;\n import org.elasticsearch.common.settings.ImmutableSettings;\n import org.elasticsearch.common.settings.Settings;\n@@ -87,8 +88,10 @@ public class AwarenessAllocationDecider extends AllocationDecider {\n     class ApplySettings implements NodeSettingsService.Listener {\n         @Override\n         public void onRefreshSettings(Settings settings) {\n-            String[] awarenessAttributes = settings.getAsArray(CLUSTER_ROUTING_ALLOCATION_AWARENESS_ATTRIBUTES, null);\n-            if (awarenessAttributes != null) {\n+            Settings awarenessAttributesSettings = settings.getByPrefix(CLUSTER_ROUTING_ALLOCATION_AWARENESS_ATTRIBUTES + \".\");\n+            boolean awarenessAttributesExplicitlySet = settings.get(CLUSTER_ROUTING_ALLOCATION_AWARENESS_ATTRIBUTES) != null || !awarenessAttributesSettings.getAsMap().isEmpty();\n+            if (awarenessAttributesExplicitlySet) {\n+                String[] awarenessAttributes = settings.getAsArray(CLUSTER_ROUTING_ALLOCATION_AWARENESS_ATTRIBUTES, Strings.EMPTY_ARRAY);\n                 logger.info(\"updating [cluster.routing.allocation.awareness.attributes] from [{}] to [{}]\", AwarenessAllocationDecider.this.awarenessAttributes, awarenessAttributes);\n                 AwarenessAllocationDecider.this.awarenessAttributes = awarenessAttributes;\n             }",
  "logs_path": "codex/gpt-5.1-codex/b8978668/elastic_elasticsearch_pr3935/logs.jsonl",
  "errors": [],
  "edit_run_id": "fd5b3480",
  "test_label": "v1-agent-comparison"
}