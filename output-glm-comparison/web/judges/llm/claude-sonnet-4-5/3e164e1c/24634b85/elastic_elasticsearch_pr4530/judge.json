{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 4530,
  "base_commit": "bbffeb1b39b864a8bf6c9844dfa23869e44c8639",
  "head_commit": "0bef2c66a996d7a30dc369df7db5e7bc34dcf292",
  "judge_mode": "llm",
  "judge_model": "claude-sonnet-4-5",
  "scores": {
    "correctness": -0.9,
    "completeness": -0.8,
    "code_reuse": -0.7,
    "best_practices": -0.6,
    "unsolicited_docs": 1.0
  },
  "aggregate": -0.4000000000000001,
  "rationale": "The agent fundamentally misunderstood the task. Ground truth shows a minimal change: switching from `fromXContent()` to `fromXContentStandalone()` in MetaDataCreateIndexService.java (one method call change), updating test files to wrap templates in a named object structure (template0.json, template1.json, template2.json), and fixing the random template selector from `randomInt(1)` to `randomInt(2)` in the test. The agent instead implemented a massive 100+ line inline parser directly in MetaDataCreateIndexService.java, bypassing the existing `fromXContentStandalone()` method entirely. This is the opposite of code reuse - the ground truth relies on an existing method, while the agent reimplements parsing logic from scratch. The agent also completely missed all test file changes (template0.json, template1.json, template2.json structure changes and the randomInt fix). The inline parsing code adds unnecessary complexity, imports unused classes (MapBuilder, SettingsLoader), and violates separation of concerns by embedding parsing logic in the service class. No unsolicited documentation was added, which is the only positive aspect.",
  "edit_run_id": "24634b85",
  "judge_run_id": "3e164e1c",
  "ground_truth_patch": "diff --git a/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java\nindex a394166439d..a7f1d841bc3 100644\n--- a/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java\n+++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java\n@@ -482,7 +482,7 @@ public class MetaDataCreateIndexService extends AbstractComponent {\n                     try {\n                         byte[] templatesData = Streams.copyToByteArray(templatesFile);\n                         parser = XContentHelper.createParser(templatesData, 0, templatesData.length);\n-                        IndexTemplateMetaData template = IndexTemplateMetaData.Builder.fromXContent(parser);\n+                        IndexTemplateMetaData template = IndexTemplateMetaData.Builder.fromXContentStandalone(parser);\n                         if (Regex.simpleMatch(template.template(), request.index)) {\n                             templates.add(template);\n                         }\ndiff --git a/src/test/java/org/elasticsearch/indices/template/IndexTemplateFileLoadingTests.java b/src/test/java/org/elasticsearch/indices/template/IndexTemplateFileLoadingTests.java\nindex de451120370..d0f37ed83c4 100644\n--- a/src/test/java/org/elasticsearch/indices/template/IndexTemplateFileLoadingTests.java\n+++ b/src/test/java/org/elasticsearch/indices/template/IndexTemplateFileLoadingTests.java\n@@ -58,7 +58,7 @@ public class IndexTemplateFileLoadingTests extends ElasticsearchIntegrationTest\n \n             File dst = new File(templatesDir, \"template.json\");\n             // random template, one uses the 'setting.index.number_of_shards', the other 'settings.number_of_shards'\n-            String template = Streams.copyToStringFromClasspath(\"/org/elasticsearch/indices/template/template\" + randomInt(1) + \".json\");\n+            String template = Streams.copyToStringFromClasspath(\"/org/elasticsearch/indices/template/template\" + randomInt(2) + \".json\");\n             Files.write(template, dst, Charsets.UTF_8);\n         } catch (Exception e) {\n             throw new RuntimeException(e);\ndiff --git a/src/test/java/org/elasticsearch/indices/template/template0.json b/src/test/java/org/elasticsearch/indices/template/template0.json\nindex 3b2ace1389b..ce677f64b4f 100644\n--- a/src/test/java/org/elasticsearch/indices/template/template0.json\n+++ b/src/test/java/org/elasticsearch/indices/template/template0.json\n@@ -1,7 +1,9 @@\n {\n-    \"template\" : \"foo*\",\n-    \"settings\" : {\n-        \"index.number_of_shards\": 10,\n-        \"index.number_of_replicas\": 0\n-   }\n+    \"template_1\" : {\n+        \"template\" : \"foo*\",\n+        \"settings\" : {\n+            \"index.number_of_shards\": 10,\n+            \"index.number_of_replicas\": 0\n+        }\n+    }\n }\n\\ No newline at end of file\ndiff --git a/src/test/java/org/elasticsearch/indices/template/template1.json b/src/test/java/org/elasticsearch/indices/template/template1.json\nindex f91866865e7..5ca82aa4a8d 100644\n--- a/src/test/java/org/elasticsearch/indices/template/template1.json\n+++ b/src/test/java/org/elasticsearch/indices/template/template1.json\n@@ -1,7 +1,9 @@\n {\n-    \"template\" : \"foo*\",\n-    \"settings\" : {\n-        \"number_of_shards\": 10,\n-        \"number_of_replicas\": 0\n+    \"template_1\" : {\n+        \"template\" : \"foo*\",\n+        \"settings\" : {\n+            \"number_of_shards\": 10,\n+            \"number_of_replicas\": 0\n+        }\n     }\n }\n\\ No newline at end of file\ndiff --git a/src/test/java/org/elasticsearch/indices/template/template2.json b/src/test/java/org/elasticsearch/indices/template/template2.json\nindex c48169f15a5..bea03cc7e99 100644\n--- a/src/test/java/org/elasticsearch/indices/template/template2.json\n+++ b/src/test/java/org/elasticsearch/indices/template/template2.json\n@@ -1,9 +1,11 @@\n {\n-    \"template\" : \"foo*\",\n-    \"settings\" : {\n-        \"index\" : {\n-            \"number_of_shards\": 10,\n-            \"number_of_replicas\": 0\n+    \"template_1\" : {\n+        \"template\" : \"foo*\",\n+        \"settings\" : {\n+            \"index\" : {\n+                \"number_of_shards\": 10,\n+                \"number_of_replicas\": 0\n+            }\n         }\n     }\n }\n\\ No newline at end of file"
}