{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 4530,
  "base_commit": "bbffeb1b39b864a8bf6c9844dfa23869e44c8639",
  "head_commit": "0bef2c66a996d7a30dc369df7db5e7bc34dcf292",
  "judge_mode": "llm",
  "judge_model": "claude-sonnet-4-5",
  "scores": {
    "correctness": -0.4,
    "completeness": -0.3,
    "code_reuse": 0.0,
    "best_practices": -0.3,
    "unsolicited_docs": 1.0
  },
  "aggregate": 0.0,
  "rationale": "The agent correctly changed the method call from fromXContent to fromXContentStandalone in MetaDataCreateIndexService.java and properly restructured the three template JSON files to use the 0.90.7 format with wrapper objects. However, there are two critical issues: (1) The agent used different template names (template_0, template_1, template_2) instead of the ground truth's consistent 'template_1' for all three files, which deviates from the expected 0.90.7 format and could cause inconsistent behavior; (2) The agent completely missed updating IndexTemplateFileLoadingTests.java to change randomInt(1) to randomInt(2), which is necessary to include the third template file in the random selection. This omission means template2.json would never be tested, representing a significant gap in completeness. The different naming approach suggests a misunderstanding of the 0.90.7 format requirements.",
  "edit_run_id": "7ad89f22",
  "judge_run_id": "3e164e1c",
  "ground_truth_patch": "diff --git a/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java\nindex a394166439d..a7f1d841bc3 100644\n--- a/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java\n+++ b/src/main/java/org/elasticsearch/cluster/metadata/MetaDataCreateIndexService.java\n@@ -482,7 +482,7 @@ public class MetaDataCreateIndexService extends AbstractComponent {\n                     try {\n                         byte[] templatesData = Streams.copyToByteArray(templatesFile);\n                         parser = XContentHelper.createParser(templatesData, 0, templatesData.length);\n-                        IndexTemplateMetaData template = IndexTemplateMetaData.Builder.fromXContent(parser);\n+                        IndexTemplateMetaData template = IndexTemplateMetaData.Builder.fromXContentStandalone(parser);\n                         if (Regex.simpleMatch(template.template(), request.index)) {\n                             templates.add(template);\n                         }\ndiff --git a/src/test/java/org/elasticsearch/indices/template/IndexTemplateFileLoadingTests.java b/src/test/java/org/elasticsearch/indices/template/IndexTemplateFileLoadingTests.java\nindex de451120370..d0f37ed83c4 100644\n--- a/src/test/java/org/elasticsearch/indices/template/IndexTemplateFileLoadingTests.java\n+++ b/src/test/java/org/elasticsearch/indices/template/IndexTemplateFileLoadingTests.java\n@@ -58,7 +58,7 @@ public class IndexTemplateFileLoadingTests extends ElasticsearchIntegrationTest\n \n             File dst = new File(templatesDir, \"template.json\");\n             // random template, one uses the 'setting.index.number_of_shards', the other 'settings.number_of_shards'\n-            String template = Streams.copyToStringFromClasspath(\"/org/elasticsearch/indices/template/template\" + randomInt(1) + \".json\");\n+            String template = Streams.copyToStringFromClasspath(\"/org/elasticsearch/indices/template/template\" + randomInt(2) + \".json\");\n             Files.write(template, dst, Charsets.UTF_8);\n         } catch (Exception e) {\n             throw new RuntimeException(e);\ndiff --git a/src/test/java/org/elasticsearch/indices/template/template0.json b/src/test/java/org/elasticsearch/indices/template/template0.json\nindex 3b2ace1389b..ce677f64b4f 100644\n--- a/src/test/java/org/elasticsearch/indices/template/template0.json\n+++ b/src/test/java/org/elasticsearch/indices/template/template0.json\n@@ -1,7 +1,9 @@\n {\n-    \"template\" : \"foo*\",\n-    \"settings\" : {\n-        \"index.number_of_shards\": 10,\n-        \"index.number_of_replicas\": 0\n-   }\n+    \"template_1\" : {\n+        \"template\" : \"foo*\",\n+        \"settings\" : {\n+            \"index.number_of_shards\": 10,\n+            \"index.number_of_replicas\": 0\n+        }\n+    }\n }\n\\ No newline at end of file\ndiff --git a/src/test/java/org/elasticsearch/indices/template/template1.json b/src/test/java/org/elasticsearch/indices/template/template1.json\nindex f91866865e7..5ca82aa4a8d 100644\n--- a/src/test/java/org/elasticsearch/indices/template/template1.json\n+++ b/src/test/java/org/elasticsearch/indices/template/template1.json\n@@ -1,7 +1,9 @@\n {\n-    \"template\" : \"foo*\",\n-    \"settings\" : {\n-        \"number_of_shards\": 10,\n-        \"number_of_replicas\": 0\n+    \"template_1\" : {\n+        \"template\" : \"foo*\",\n+        \"settings\" : {\n+            \"number_of_shards\": 10,\n+            \"number_of_replicas\": 0\n+        }\n     }\n }\n\\ No newline at end of file\ndiff --git a/src/test/java/org/elasticsearch/indices/template/template2.json b/src/test/java/org/elasticsearch/indices/template/template2.json\nindex c48169f15a5..bea03cc7e99 100644\n--- a/src/test/java/org/elasticsearch/indices/template/template2.json\n+++ b/src/test/java/org/elasticsearch/indices/template/template2.json\n@@ -1,9 +1,11 @@\n {\n-    \"template\" : \"foo*\",\n-    \"settings\" : {\n-        \"index\" : {\n-            \"number_of_shards\": 10,\n-            \"number_of_replicas\": 0\n+    \"template_1\" : {\n+        \"template\" : \"foo*\",\n+        \"settings\" : {\n+            \"index\" : {\n+                \"number_of_shards\": 10,\n+                \"number_of_replicas\": 0\n+            }\n         }\n     }\n }\n\\ No newline at end of file"
}