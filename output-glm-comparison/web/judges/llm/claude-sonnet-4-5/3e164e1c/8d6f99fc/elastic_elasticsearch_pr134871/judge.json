{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 134871,
  "base_commit": "1923634bf7b0aa66d701b756aa3ded92370ffeb4",
  "head_commit": "00a7ffe9940e83e3123c50df9c5777a2c140e089",
  "judge_mode": "llm",
  "judge_model": "claude-sonnet-4-5",
  "scores": {
    "correctness": -0.7,
    "completeness": -0.6,
    "code_reuse": 0.0,
    "best_practices": -0.3,
    "unsolicited_docs": 1.0
  },
  "aggregate": -0.11999999999999997,
  "rationale": "The agent's implementation has multiple critical issues: (1) Missing deletion of SizeValue.java and SizeValueTests.java files entirely - these are core to the task. (2) Missing updates to RestThreadPoolAction.java where getQueueSize() usage needs modification. (3) Missing updates to KibanaThreadPoolIT.java and IncrementalBulkIT.java where .singles() method calls need removal. (4) Missing updates to UpdateThreadPoolSettingsTests.java. (5) Uses readOptionalLong/writeOptionalLong instead of readOptionalVLong/writeOptionalVLong for serialization, which is incorrect for variable-length encoding. (6) Uses Long.valueOf(queueSize) instead of the cleaner cast (long) queueSize in FixedExecutorBuilder. The agent only completed about 40% of the required changes, missing the most important part (deleting the actual SizeValue class and tests) and several usage sites.",
  "edit_run_id": "8d6f99fc",
  "judge_run_id": "3e164e1c",
  "ground_truth_patch": "diff --git a/modules/kibana/src/internalClusterTest/java/org/elasticsearch/kibana/KibanaThreadPoolIT.java b/modules/kibana/src/internalClusterTest/java/org/elasticsearch/kibana/KibanaThreadPoolIT.java\nindex a9ab0c02612..351ae510b47 100644\n--- a/modules/kibana/src/internalClusterTest/java/org/elasticsearch/kibana/KibanaThreadPoolIT.java\n+++ b/modules/kibana/src/internalClusterTest/java/org/elasticsearch/kibana/KibanaThreadPoolIT.java\n@@ -233,7 +233,7 @@ public class KibanaThreadPoolIT extends ESIntegTestCase {\n     private static void fillThreadPoolQueues(String threadPoolName, ThreadPool threadPool) {\n         ThreadPool.Info info = threadPool.info(threadPoolName);\n \n-        for (int i = 0; i < info.getQueueSize().singles(); i++) {\n+        for (int i = 0; i < info.getQueueSize(); i++) {\n             try {\n                 threadPool.executor(threadPoolName).execute(() -> {});\n             } catch (EsRejectedExecutionException e) {\ndiff --git a/server/src/internalClusterTest/java/org/elasticsearch/action/bulk/IncrementalBulkIT.java b/server/src/internalClusterTest/java/org/elasticsearch/action/bulk/IncrementalBulkIT.java\nindex d4d49bc4aa8..528ab5760d9 100644\n--- a/server/src/internalClusterTest/java/org/elasticsearch/action/bulk/IncrementalBulkIT.java\n+++ b/server/src/internalClusterTest/java/org/elasticsearch/action/bulk/IncrementalBulkIT.java\n@@ -558,7 +558,7 @@ public class IncrementalBulkIT extends ESIntegTestCase {\n     }\n \n     private static void fillWriteCoordinationQueue(ThreadPool threadPool) {\n-        final var queueSize = Math.toIntExact(threadPool.info(ThreadPool.Names.WRITE_COORDINATION).getQueueSize().singles());\n+        final var queueSize = Math.toIntExact(threadPool.info(ThreadPool.Names.WRITE_COORDINATION).getQueueSize());\n         final var queueFilled = new AtomicBoolean(false);\n         final var queueFillingTask = new AbstractRunnable() {\n             @Override\ndiff --git a/server/src/main/java/org/elasticsearch/common/unit/SizeValue.java b/server/src/main/java/org/elasticsearch/common/unit/SizeValue.java\ndeleted file mode 100644\nindex 9fa57e3b34b..00000000000\n--- a/server/src/main/java/org/elasticsearch/common/unit/SizeValue.java\n+++ /dev/null\n@@ -1,164 +0,0 @@\n-/*\n- * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n- * or more contributor license agreements. Licensed under the \"Elastic License\n- * 2.0\", the \"GNU Affero General Public License v3.0 only\", and the \"Server Side\n- * Public License v 1\"; you may not use this file except in compliance with, at\n- * your election, the \"Elastic License 2.0\", the \"GNU Affero General Public\n- * License v3.0 only\", or the \"Server Side Public License, v 1\".\n- */\n-\n-package org.elasticsearch.common.unit;\n-\n-import org.elasticsearch.ElasticsearchParseException;\n-import org.elasticsearch.common.Strings;\n-import org.elasticsearch.common.io.stream.StreamInput;\n-import org.elasticsearch.common.io.stream.StreamOutput;\n-import org.elasticsearch.common.io.stream.Writeable;\n-\n-import java.io.IOException;\n-\n-public class SizeValue implements Writeable, Comparable<SizeValue> {\n-\n-    private final long size;\n-    private final SizeUnit sizeUnit;\n-\n-    public SizeValue(long singles) {\n-        this(singles, SizeUnit.SINGLE);\n-    }\n-\n-    public SizeValue(long size, SizeUnit sizeUnit) {\n-        if (size < 0) {\n-            throw new IllegalArgumentException(\"size in SizeValue may not be negative\");\n-        }\n-        this.size = size;\n-        this.sizeUnit = sizeUnit;\n-    }\n-\n-    public SizeValue(StreamInput in) throws IOException {\n-        size = in.readVLong();\n-        sizeUnit = SizeUnit.SINGLE;\n-    }\n-\n-    @Override\n-    public void writeTo(StreamOutput out) throws IOException {\n-        out.writeVLong(singles());\n-    }\n-\n-    public long singles() {\n-        return sizeUnit.toSingles(size);\n-    }\n-\n-    public long kilo() {\n-        return sizeUnit.toKilo(size);\n-    }\n-\n-    public long mega() {\n-        return sizeUnit.toMega(size);\n-    }\n-\n-    public long giga() {\n-        return sizeUnit.toGiga(size);\n-    }\n-\n-    public long tera() {\n-        return sizeUnit.toTera(size);\n-    }\n-\n-    public long peta() {\n-        return sizeUnit.toPeta(size);\n-    }\n-\n-    public double kiloFrac() {\n-        return ((double) singles()) / SizeUnit.C1;\n-    }\n-\n-    public double megaFrac() {\n-        return ((double) singles()) / SizeUnit.C2;\n-    }\n-\n-    public double gigaFrac() {\n-        return ((double) singles()) / SizeUnit.C3;\n-    }\n-\n-    public double teraFrac() {\n-        return ((double) singles()) / SizeUnit.C4;\n-    }\n-\n-    public double petaFrac() {\n-        return ((double) singles()) / SizeUnit.C5;\n-    }\n-\n-    @Override\n-    public String toString() {\n-        long singles = singles();\n-        double value = singles;\n-        String suffix = \"\";\n-        if (singles >= SizeUnit.C5) {\n-            value = petaFrac();\n-            suffix = \"p\";\n-        } else if (singles >= SizeUnit.C4) {\n-            value = teraFrac();\n-            suffix = \"t\";\n-        } else if (singles >= SizeUnit.C3) {\n-            value = gigaFrac();\n-            suffix = \"g\";\n-        } else if (singles >= SizeUnit.C2) {\n-            value = megaFrac();\n-            suffix = \"m\";\n-        } else if (singles >= SizeUnit.C1) {\n-            value = kiloFrac();\n-            suffix = \"k\";\n-        }\n-\n-        return Strings.format1Decimals(value, suffix);\n-    }\n-\n-    public static SizeValue parseSizeValue(String sValue) throws ElasticsearchParseException {\n-        return parseSizeValue(sValue, null);\n-    }\n-\n-    public static SizeValue parseSizeValue(String sValue, SizeValue defaultValue) throws ElasticsearchParseException {\n-        if (sValue == null) {\n-            return defaultValue;\n-        }\n-        long singles;\n-        try {\n-            if (sValue.endsWith(\"k\") || sValue.endsWith(\"K\")) {\n-                singles = (long) (Double.parseDouble(sValue.substring(0, sValue.length() - 1)) * SizeUnit.C1);\n-            } else if (sValue.endsWith(\"m\") || sValue.endsWith(\"M\")) {\n-                singles = (long) (Double.parseDouble(sValue.substring(0, sValue.length() - 1)) * SizeUnit.C2);\n-            } else if (sValue.endsWith(\"g\") || sValue.endsWith(\"G\")) {\n-                singles = (long) (Double.parseDouble(sValue.substring(0, sValue.length() - 1)) * SizeUnit.C3);\n-            } else if (sValue.endsWith(\"t\") || sValue.endsWith(\"T\")) {\n-                singles = (long) (Double.parseDouble(sValue.substring(0, sValue.length() - 1)) * SizeUnit.C4);\n-            } else if (sValue.endsWith(\"p\") || sValue.endsWith(\"P\")) {\n-                singles = (long) (Double.parseDouble(sValue.substring(0, sValue.length() - 1)) * SizeUnit.C5);\n-            } else {\n-                singles = Long.parseLong(sValue);\n-            }\n-        } catch (NumberFormatException e) {\n-            throw new ElasticsearchParseException(\"failed to parse [{}]\", e, sValue);\n-        }\n-        return new SizeValue(singles, SizeUnit.SINGLE);\n-    }\n-\n-    @Override\n-    public boolean equals(Object o) {\n-        if (this == o) return true;\n-        if (o == null || getClass() != o.getClass()) return false;\n-\n-        return compareTo((SizeValue) o) == 0;\n-    }\n-\n-    @Override\n-    public int hashCode() {\n-        return Double.hashCode(((double) size) * sizeUnit.toSingles(1));\n-    }\n-\n-    @Override\n-    public int compareTo(SizeValue other) {\n-        double thisValue = ((double) size) * sizeUnit.toSingles(1);\n-        double otherValue = ((double) other.size) * other.sizeUnit.toSingles(1);\n-        return Double.compare(thisValue, otherValue);\n-    }\n-}\ndiff --git a/server/src/main/java/org/elasticsearch/rest/action/cat/RestTable.java b/server/src/main/java/org/elasticsearch/rest/action/cat/RestTable.java\nindex 68716a86d44..cdaba1f74c2 100644\n--- a/server/src/main/java/org/elasticsearch/rest/action/cat/RestTable.java\n+++ b/server/src/main/java/org/elasticsearch/rest/action/cat/RestTable.java\n@@ -14,7 +14,6 @@ import org.elasticsearch.common.Table;\n import org.elasticsearch.common.collect.Iterators;\n import org.elasticsearch.common.regex.Regex;\n import org.elasticsearch.common.unit.ByteSizeValue;\n-import org.elasticsearch.common.unit.SizeValue;\n import org.elasticsearch.common.util.set.Sets;\n import org.elasticsearch.core.Booleans;\n import org.elasticsearch.core.TimeValue;\n@@ -370,24 +369,6 @@ public class RestTable {\n                 return v.toString();\n             }\n         }\n-        if (value instanceof SizeValue v) {\n-            String resolution = request.param(\"size\");\n-            if (\"\".equals(resolution)) {\n-                return Long.toString(v.singles());\n-            } else if (\"k\".equals(resolution)) {\n-                return Long.toString(v.kilo());\n-            } else if (\"m\".equals(resolution)) {\n-                return Long.toString(v.mega());\n-            } else if (\"g\".equals(resolution)) {\n-                return Long.toString(v.giga());\n-            } else if (\"t\".equals(resolution)) {\n-                return Long.toString(v.tera());\n-            } else if (\"p\".equals(resolution)) {\n-                return Long.toString(v.peta());\n-            } else {\n-                return v.toString();\n-            }\n-        }\n         if (value instanceof TimeValue v) {\n             String resolution = request.param(\"time\");\n             if (\"nanos\".equals(resolution)) {\ndiff --git a/server/src/main/java/org/elasticsearch/rest/action/cat/RestThreadPoolAction.java b/server/src/main/java/org/elasticsearch/rest/action/cat/RestThreadPoolAction.java\nindex 5cde4e70059..5e4b364b81b 100644\n--- a/server/src/main/java/org/elasticsearch/rest/action/cat/RestThreadPoolAction.java\n+++ b/server/src/main/java/org/elasticsearch/rest/action/cat/RestThreadPoolAction.java\n@@ -207,9 +207,7 @@ public class RestThreadPoolAction extends AbstractCatAction {\n                 Integer size = null;\n \n                 if (poolInfo != null) {\n-                    if (poolInfo.getQueueSize() != null) {\n-                        maxQueueSize = poolInfo.getQueueSize().singles();\n-                    }\n+                    maxQueueSize = poolInfo.getQueueSize();\n                     if (poolInfo.getKeepAlive() != null) {\n                         keepAlive = poolInfo.getKeepAlive();\n                     }\ndiff --git a/server/src/main/java/org/elasticsearch/threadpool/FixedExecutorBuilder.java b/server/src/main/java/org/elasticsearch/threadpool/FixedExecutorBuilder.java\nindex 9c723f241f1..bbc8409efdd 100644\n--- a/server/src/main/java/org/elasticsearch/threadpool/FixedExecutorBuilder.java\n+++ b/server/src/main/java/org/elasticsearch/threadpool/FixedExecutorBuilder.java\n@@ -11,7 +11,6 @@ package org.elasticsearch.threadpool;\n \n import org.elasticsearch.common.settings.Setting;\n import org.elasticsearch.common.settings.Settings;\n-import org.elasticsearch.common.unit.SizeValue;\n import org.elasticsearch.common.util.concurrent.EsExecutors;\n import org.elasticsearch.common.util.concurrent.EsExecutors.TaskTrackingConfig;\n import org.elasticsearch.common.util.concurrent.ThreadContext;\n@@ -160,7 +159,7 @@ public final class FixedExecutorBuilder extends ExecutorBuilder<FixedExecutorBui\n             size,\n             size,\n             null,\n-            queueSize < 0 ? null : new SizeValue(queueSize)\n+            queueSize < 0 ? null : (long) queueSize\n         );\n         return new ThreadPool.ExecutorHolder(executor, info);\n     }\ndiff --git a/server/src/main/java/org/elasticsearch/threadpool/ThreadPool.java b/server/src/main/java/org/elasticsearch/threadpool/ThreadPool.java\nindex 2a8c42c95cd..3c67a1e6554 100644\n--- a/server/src/main/java/org/elasticsearch/threadpool/ThreadPool.java\n+++ b/server/src/main/java/org/elasticsearch/threadpool/ThreadPool.java\n@@ -19,7 +19,6 @@ import org.elasticsearch.common.settings.Settings;\n import org.elasticsearch.common.time.TimeProvider;\n import org.elasticsearch.common.unit.ByteSizeUnit;\n import org.elasticsearch.common.unit.ByteSizeValue;\n-import org.elasticsearch.common.unit.SizeValue;\n import org.elasticsearch.common.util.concurrent.EsExecutors;\n import org.elasticsearch.common.util.concurrent.EsRejectedExecutionException;\n import org.elasticsearch.common.util.concurrent.EsRejectedExecutionHandler;\n@@ -934,7 +933,7 @@ public class ThreadPool implements ReportingService<ThreadPoolInfo>, Scheduler,\n         private final int min;\n         private final int max;\n         private final TimeValue keepAlive;\n-        private final SizeValue queueSize;\n+        private final Long queueSize;\n \n         public Info(String name, ThreadPoolType type) {\n             this(name, type, -1);\n@@ -944,7 +943,7 @@ public class ThreadPool implements ReportingService<ThreadPoolInfo>, Scheduler,\n             this(name, type, size, size, null, null);\n         }\n \n-        public Info(String name, ThreadPoolType type, int min, int max, @Nullable TimeValue keepAlive, @Nullable SizeValue queueSize) {\n+        public Info(String name, ThreadPoolType type, int min, int max, @Nullable TimeValue keepAlive, @Nullable Long queueSize) {\n             this.name = name;\n             this.type = type;\n             this.min = min;\n@@ -959,7 +958,7 @@ public class ThreadPool implements ReportingService<ThreadPoolInfo>, Scheduler,\n             min = in.readInt();\n             max = in.readInt();\n             keepAlive = in.readOptionalTimeValue();\n-            queueSize = in.readOptionalWriteable(SizeValue::new);\n+            queueSize = in.readOptionalVLong();\n         }\n \n         @Override\n@@ -969,7 +968,7 @@ public class ThreadPool implements ReportingService<ThreadPoolInfo>, Scheduler,\n             out.writeInt(min);\n             out.writeInt(max);\n             out.writeOptionalTimeValue(keepAlive);\n-            out.writeOptionalWriteable(queueSize);\n+            out.writeOptionalVLong(queueSize);\n         }\n \n         public String getName() {\n@@ -994,7 +993,7 @@ public class ThreadPool implements ReportingService<ThreadPoolInfo>, Scheduler,\n         }\n \n         @Nullable\n-        public SizeValue getQueueSize() {\n+        public Long getQueueSize() {\n             return this.queueSize;\n         }\n \n@@ -1018,7 +1017,7 @@ public class ThreadPool implements ReportingService<ThreadPoolInfo>, Scheduler,\n             if (queueSize == null) {\n                 builder.field(\"queue_size\", -1);\n             } else {\n-                builder.field(\"queue_size\", queueSize.singles());\n+                builder.field(\"queue_size\", queueSize);\n             }\n             builder.endObject();\n             return builder;\ndiff --git a/server/src/test/java/org/elasticsearch/common/unit/SizeValueTests.java b/server/src/test/java/org/elasticsearch/common/unit/SizeValueTests.java\ndeleted file mode 100644\nindex 91f3c45a9c7..00000000000\n--- a/server/src/test/java/org/elasticsearch/common/unit/SizeValueTests.java\n+++ /dev/null\n@@ -1,90 +0,0 @@\n-/*\n- * Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one\n- * or more contributor license agreements. Licensed under the \"Elastic License\n- * 2.0\", the \"GNU Affero General Public License v3.0 only\", and the \"Server Side\n- * Public License v 1\"; you may not use this file except in compliance with, at\n- * your election, the \"Elastic License 2.0\", the \"GNU Affero General Public\n- * License v3.0 only\", or the \"Server Side Public License, v 1\".\n- */\n-package org.elasticsearch.common.unit;\n-\n-import org.elasticsearch.test.ESTestCase;\n-\n-import static org.hamcrest.Matchers.containsString;\n-import static org.hamcrest.Matchers.is;\n-\n-public class SizeValueTests extends ESTestCase {\n-    public void testThatConversionWorks() {\n-        SizeValue sizeValue = new SizeValue(1000);\n-        assertThat(sizeValue.kilo(), is(1L));\n-        assertThat(sizeValue.toString(), is(\"1k\"));\n-\n-        sizeValue = new SizeValue(1000, SizeUnit.KILO);\n-        assertThat(sizeValue.singles(), is(1000000L));\n-        assertThat(sizeValue.toString(), is(\"1m\"));\n-\n-        sizeValue = new SizeValue(1000, SizeUnit.MEGA);\n-        assertThat(sizeValue.singles(), is(1000000000L));\n-        assertThat(sizeValue.toString(), is(\"1g\"));\n-\n-        sizeValue = new SizeValue(1000, SizeUnit.GIGA);\n-        assertThat(sizeValue.singles(), is(1000000000000L));\n-        assertThat(sizeValue.toString(), is(\"1t\"));\n-\n-        sizeValue = new SizeValue(1000, SizeUnit.TERA);\n-        assertThat(sizeValue.singles(), is(1000000000000000L));\n-        assertThat(sizeValue.toString(), is(\"1p\"));\n-\n-        sizeValue = new SizeValue(1000, SizeUnit.PETA);\n-        assertThat(sizeValue.singles(), is(1000000000000000000L));\n-        assertThat(sizeValue.toString(), is(\"1000p\"));\n-    }\n-\n-    public void testThatParsingWorks() {\n-        assertThat(SizeValue.parseSizeValue(\"1k\").toString(), is(new SizeValue(1000).toString()));\n-        assertThat(SizeValue.parseSizeValue(\"1p\").toString(), is(new SizeValue(1, SizeUnit.PETA).toString()));\n-        assertThat(SizeValue.parseSizeValue(\"1G\").toString(), is(new SizeValue(1, SizeUnit.GIGA).toString()));\n-    }\n-\n-    public void testThatNegativeValuesThrowException() {\n-        try {\n-            new SizeValue(-1);\n-            fail(\"Expected IllegalArgumentException\");\n-        } catch (IllegalArgumentException e) {\n-            assertThat(e.getMessage(), containsString(\"may not be negative\"));\n-        }\n-    }\n-\n-    public void testCompareEquality() {\n-        long randomValue = randomNonNegativeLong();\n-        SizeUnit randomUnit = randomFrom(SizeUnit.values());\n-        SizeValue firstValue = new SizeValue(randomValue, randomUnit);\n-        SizeValue secondValue = new SizeValue(randomValue, randomUnit);\n-        assertEquals(0, firstValue.compareTo(secondValue));\n-    }\n-\n-    public void testCompareValue() {\n-        long firstRandom = randomNonNegativeLong();\n-        long secondRandom = randomValueOtherThan(firstRandom, ESTestCase::randomNonNegativeLong);\n-        SizeUnit unit = randomFrom(SizeUnit.values());\n-        SizeValue firstSizeValue = new SizeValue(firstRandom, unit);\n-        SizeValue secondSizeValue = new SizeValue(secondRandom, unit);\n-        assertEquals(firstRandom > secondRandom, firstSizeValue.compareTo(secondSizeValue) > 0);\n-        assertEquals(secondRandom > firstRandom, secondSizeValue.compareTo(firstSizeValue) > 0);\n-    }\n-\n-    public void testCompareUnits() {\n-        long number = randomNonNegativeLong();\n-        SizeUnit randomUnit = randomValueOtherThan(SizeUnit.PETA, () -> randomFrom(SizeUnit.values()));\n-        SizeValue firstValue = new SizeValue(number, randomUnit);\n-        SizeValue secondValue = new SizeValue(number, SizeUnit.PETA);\n-        assertTrue(firstValue.compareTo(secondValue) < 0);\n-        assertTrue(secondValue.compareTo(firstValue) > 0);\n-    }\n-\n-    public void testConversionHashCode() {\n-        SizeValue firstValue = new SizeValue(randomIntBetween(0, Integer.MAX_VALUE), SizeUnit.GIGA);\n-        SizeValue secondValue = new SizeValue(firstValue.singles(), SizeUnit.SINGLE);\n-        assertEquals(firstValue.hashCode(), secondValue.hashCode());\n-    }\n-}\ndiff --git a/server/src/test/java/org/elasticsearch/threadpool/ThreadPoolSerializationTests.java b/server/src/test/java/org/elasticsearch/threadpool/ThreadPoolSerializationTests.java\nindex 29af090245c..bc8d57d033f 100644\n--- a/server/src/test/java/org/elasticsearch/threadpool/ThreadPoolSerializationTests.java\n+++ b/server/src/test/java/org/elasticsearch/threadpool/ThreadPoolSerializationTests.java\n@@ -13,7 +13,6 @@ import org.elasticsearch.common.bytes.BytesReference;\n import org.elasticsearch.common.io.stream.BytesStreamOutput;\n import org.elasticsearch.common.io.stream.StreamInput;\n import org.elasticsearch.common.settings.Settings;\n-import org.elasticsearch.common.unit.SizeValue;\n import org.elasticsearch.common.xcontent.XContentHelper;\n import org.elasticsearch.core.TimeValue;\n import org.elasticsearch.telemetry.metric.MeterRegistry;\n@@ -41,21 +40,14 @@ public class ThreadPoolSerializationTests extends ESTestCase {\n     }\n \n     public void testThatQueueSizeSerializationWorks() throws Exception {\n-        ThreadPool.Info info = new ThreadPool.Info(\n-            \"foo\",\n-            threadPoolType,\n-            1,\n-            10,\n-            TimeValue.timeValueMillis(3000),\n-            SizeValue.parseSizeValue(\"10k\")\n-        );\n+        ThreadPool.Info info = new ThreadPool.Info(\"foo\", threadPoolType, 1, 10, TimeValue.timeValueMillis(3000), 10_000L);\n         output.setTransportVersion(TransportVersion.current());\n         info.writeTo(output);\n \n         StreamInput input = output.bytes().streamInput();\n         ThreadPool.Info newInfo = new ThreadPool.Info(input);\n \n-        assertThat(newInfo.getQueueSize().singles(), is(10000L));\n+        assertThat(newInfo.getQueueSize(), is(10_000L));\n     }\n \n     public void testThatNegativeQueueSizesCanBeSerialized() throws Exception {\n@@ -93,14 +85,7 @@ public class ThreadPoolSerializationTests extends ESTestCase {\n \n     @SuppressWarnings(\"unchecked\")\n     public void testThatToXContentWritesInteger() throws Exception {\n-        ThreadPool.Info info = new ThreadPool.Info(\n-            \"foo\",\n-            threadPoolType,\n-            1,\n-            10,\n-            TimeValue.timeValueMillis(3000),\n-            SizeValue.parseSizeValue(\"1k\")\n-        );\n+        ThreadPool.Info info = new ThreadPool.Info(\"foo\", threadPoolType, 1, 10, TimeValue.timeValueMillis(3000), 1_000L);\n         XContentBuilder builder = jsonBuilder();\n         builder.startObject();\n         info.toXContent(builder, ToXContent.EMPTY_PARAMS);\ndiff --git a/server/src/test/java/org/elasticsearch/threadpool/UpdateThreadPoolSettingsTests.java b/server/src/test/java/org/elasticsearch/threadpool/UpdateThreadPoolSettingsTests.java\nindex 873a7fcaab8..cce520283ad 100644\n--- a/server/src/test/java/org/elasticsearch/threadpool/UpdateThreadPoolSettingsTests.java\n+++ b/server/src/test/java/org/elasticsearch/threadpool/UpdateThreadPoolSettingsTests.java\n@@ -146,7 +146,7 @@ public class UpdateThreadPoolSettingsTests extends ESThreadPoolTestCase {\n                 .put(\"node.name\", \"testShutdownNowInterrupts\")\n                 .build();\n             threadPool = new ThreadPool(nodeSettings, MeterRegistry.NOOP, new DefaultBuiltInExecutorBuilders());\n-            assertEquals(info(threadPool, threadPoolName).getQueueSize().singles(), 1000L);\n+            assertEquals(info(threadPool, threadPoolName).getQueueSize(), (Long) 1000L);\n \n             final CountDownLatch shutDownLatch = new CountDownLatch(1);\n             final CountDownLatch latch = new CountDownLatch(1);\n@@ -209,7 +209,7 @@ public class UpdateThreadPoolSettingsTests extends ESThreadPoolTestCase {\n                     assertEquals(info.getThreadPoolType(), ThreadPool.ThreadPoolType.FIXED);\n                     assertThat(info.getMin(), equalTo(1));\n                     assertThat(info.getMax(), equalTo(1));\n-                    assertThat(info.getQueueSize().singles(), equalTo(1L));\n+                    assertThat(info.getQueueSize(), equalTo(1L));\n                 } else {\n                     for (Field field : Names.class.getFields()) {\n                         if (info.getName().equalsIgnoreCase(field.getName())) {"
}