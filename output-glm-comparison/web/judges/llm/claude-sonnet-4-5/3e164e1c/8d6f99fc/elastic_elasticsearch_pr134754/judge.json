{
  "repo_url": "https://github.com/elastic/elasticsearch.git",
  "pr_number": 134754,
  "base_commit": "d70e2bd0d84d610b8ad101288141196261ad7628",
  "head_commit": "2cc243bc322c281704335c5ee86cf3e4e7da71af",
  "judge_mode": "llm",
  "judge_model": "claude-sonnet-4-5",
  "scores": {
    "correctness": 0.8,
    "completeness": 0.6,
    "code_reuse": 0.0,
    "best_practices": 0.0,
    "unsolicited_docs": 1.0
  },
  "aggregate": 0.48,
  "rationale": "The agent correctly wrapped all assertAsyncSearchHitCount calls with assertBusy() as required (matching ground truth), which addresses the intermittent test failures. However, it missed the critical enhancement to the assertAsyncSearchHitCount method itself - the ground truth added three important assertions (checking is_running is false, is_partial is false, and improving the error message) that provide better debugging information and ensure the async search is complete before checking results. The agent instead added wait_for_completion_timeout=10s to the request URL, which is a reasonable alternative approach to ensure completion but doesn't provide the same level of validation or debugging capability. The extra assertions in ground truth would catch issues where async searches haven't fully completed, making tests more reliable and failures easier to diagnose. No unsolicited documentation was added.",
  "edit_run_id": "8d6f99fc",
  "judge_run_id": "3e164e1c",
  "ground_truth_patch": "diff --git a/qa/lucene-index-compatibility/src/javaRestTest/java/org/elasticsearch/lucene/FullClusterRestartSystemIndexCompatibilityIT.java b/qa/lucene-index-compatibility/src/javaRestTest/java/org/elasticsearch/lucene/FullClusterRestartSystemIndexCompatibilityIT.java\nindex 3bc2fde3e39..1817e63eea9 100644\n--- a/qa/lucene-index-compatibility/src/javaRestTest/java/org/elasticsearch/lucene/FullClusterRestartSystemIndexCompatibilityIT.java\n+++ b/qa/lucene-index-compatibility/src/javaRestTest/java/org/elasticsearch/lucene/FullClusterRestartSystemIndexCompatibilityIT.java\n@@ -67,7 +67,7 @@ public class FullClusterRestartSystemIndexCompatibilityIT extends FullClusterRes\n             String asyncId = searchAsyncAndStoreId(asyncSearchRequest, \"n-2_id\");\n             ensureGreen(asyncSearchIndex);\n \n-            assertAsyncSearchHitCount(asyncId, numDocs);\n+            assertBusy(() -> assertAsyncSearchHitCount(asyncId, numDocs));\n             assertBusy(() -> assertDocCountNoWarnings(client(), asyncSearchIndex, 1));\n             assertThat(indexVersion(asyncSearchIndex, true), equalTo(VERSION_MINUS_2));\n             return;\n@@ -103,7 +103,7 @@ public class FullClusterRestartSystemIndexCompatibilityIT extends FullClusterRes\n \n             // perform new async search and check its readable\n             String asyncId = searchAsyncAndStoreId(asyncSearchRequest, \"n-1_id\");\n-            assertAsyncSearchHitCount(asyncId, numDocs);\n+            assertBusy(() -> assertAsyncSearchHitCount(asyncId, numDocs));\n             assertBusy(() -> assertDocCountNoWarnings(client(), asyncSearchIndex, 2));\n \n             // in order to move to current version we need write block for n-2 index\n@@ -117,7 +117,7 @@ public class FullClusterRestartSystemIndexCompatibilityIT extends FullClusterRes\n \n             // check system index is still writeable\n             String asyncId = searchAsyncAndStoreId(asyncSearchRequest, \"n_id\");\n-            assertAsyncSearchHitCount(asyncId, numDocs);\n+            assertBusy(() -> assertAsyncSearchHitCount(asyncId, numDocs));\n             assertBusy(() -> assertDocCountNoWarnings(client(), asyncSearchIndex, 3));\n         }\n \n@@ -134,7 +134,13 @@ public class FullClusterRestartSystemIndexCompatibilityIT extends FullClusterRes\n     private static void assertAsyncSearchHitCount(String asyncId, int numDocs) throws IOException {\n         var asyncGet = new Request(\"GET\", \"/_async_search/\" + asyncId);\n         ObjectPath resp = ObjectPath.createFromResponse(client().performRequest(asyncGet));\n-        assertEquals(Integer.valueOf(numDocs), resp.evaluate(\"response.hits.total.value\"));\n+        assertFalse(\"Async search is not complete\", resp.evaluate(\"is_running\"));\n+        assertFalse(\"Async search has partial results\", resp.evaluate(\"is_partial\"));\n+        assertEquals(\n+            \"Unexpected number of hits in search response. Response: \\n\" + resp.evaluate(\"response\"),\n+            Integer.valueOf(numDocs),\n+            resp.evaluate(\"response.hits.total.value\")\n+        );\n     }\n \n     /**"
}